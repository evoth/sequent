var br=Object.defineProperty;var vr=(i,e,t)=>e in i?br(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var z=(i,e,t)=>(vr(i,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function ne(){}const Yt=i=>i;function wr(i,e){for(const t in e)i[t]=e[t];return i}function Ki(i){return i()}function gn(){return Object.create(null)}function ve(i){i.forEach(Ki)}function Xe(i){return typeof i=="function"}function ie(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}function kr(i){return Object.keys(i).length===0}function Sr(i,...e){if(i==null){for(const n of e)n(void 0);return ne}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function de(i,e,t){i.$$.on_destroy.push(Sr(e,t))}function Ue(i,e,t,n){if(i){const r=Gi(i,e,t,n);return i[0](r)}}function Gi(i,e,t,n){return i[1]&&n?wr(t.ctx.slice(),i[1](n(e))):t.ctx}function He(i,e,t,n){if(i[2]&&n){const r=i[2](n(t));if(e.dirty===void 0)return r;if(typeof r=="object"){const l=[],s=Math.max(e.dirty.length,r.length);for(let o=0;o<s;o+=1)l[o]=e.dirty[o]|r[o];return l}return e.dirty|r}return e.dirty}function Ye(i,e,t,n,r,l){if(r){const s=Gi(e,t,n,l);i.p(s,r)}}function ze(i){if(i.ctx.length>32){const e=[],t=i.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function _n(i){return i??""}function ke(i,e,t){return i.set(t),e}function Qi(i){return i&&Xe(i.destroy)?i.destroy:ne}const Zi=typeof window<"u";let Gt=Zi?()=>window.performance.now():()=>Date.now(),Qt=Zi?i=>requestAnimationFrame(i):ne;const ft=new Set;function $i(i){ft.forEach(e=>{e.c(i)||(ft.delete(e),e.f())}),ft.size!==0&&Qt($i)}function Zt(i){let e;return ft.size===0&&Qt($i),{promise:new Promise(t=>{ft.add(e={c:i,f:t})}),abort(){ft.delete(e)}}}function D(i,e){i.appendChild(e)}function xi(i){if(!i)return document;const e=i.getRootNode?i.getRootNode():i.ownerDocument;return e&&e.host?e:i.ownerDocument}function Mr(i){const e=O("style");return e.textContent="/* empty */",yr(xi(i),e),e.sheet}function yr(i,e){return D(i.head||i,e),e.sheet}function k(i,e,t){i.insertBefore(e,t||null)}function w(i){i.parentNode&&i.parentNode.removeChild(i)}function je(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function O(i){return document.createElement(i)}function Te(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function te(i){return document.createTextNode(i)}function H(){return te(" ")}function Z(){return te("")}function K(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function g(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function Or(i){return Array.from(i.childNodes)}function Ae(i,e){e=""+e,i.data!==e&&(i.data=e)}function Dt(i,e){i.value=e??""}function L(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,n?"important":"")}let Nt;function Dr(){if(Nt===void 0){Nt=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Nt=!0}}return Nt}function Ct(i,e){getComputedStyle(i).position==="static"&&(i.style.position="relative");const n=O("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=Dr();let l;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=K(window,"message",s=>{s.source===n.contentWindow&&e()})):(n.src="about:blank",n.onload=()=>{l=K(n.contentWindow,"resize",e),e()}),D(i,n),()=>{(r||l&&n.contentWindow)&&l(),w(n)}}function Ne(i,e,t){i.classList.toggle(e,!!t)}function er(i,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(i,{detail:e,bubbles:t,cancelable:n})}const Tt=new Map;let It=0;function Nr(i){let e=5381,t=i.length;for(;t--;)e=(e<<5)-e^i.charCodeAt(t);return e>>>0}function qr(i,e){const t={stylesheet:Mr(e),rules:{}};return Tt.set(i,t),t}function Et(i,e,t,n,r,l,s,o=0){const a=16.666/n;let u=`{
`;for(let _=0;_<=1;_+=a){const S=e+(t-e)*l(_);u+=_*100+`%{${s(S,1-S)}}
`}const c=u+`100% {${s(t,1-t)}}
}`,f=`__svelte_${Nr(c)}_${o}`,d=xi(i),{stylesheet:m,rules:p}=Tt.get(d)||qr(d,i);p[f]||(p[f]=!0,m.insertRule(`@keyframes ${f} ${c}`,m.cssRules.length));const h=i.style.animation||"";return i.style.animation=`${h?`${h}, `:""}${f} ${n}ms linear ${r}ms 1 both`,It+=1,f}function At(i,e){const t=(i.style.animation||"").split(", "),n=t.filter(e?l=>l.indexOf(e)<0:l=>l.indexOf("__svelte")===-1),r=t.length-n.length;r&&(i.style.animation=n.join(", "),It-=r,It||Cr())}function Cr(){Qt(()=>{It||(Tt.forEach(i=>{const{ownerNode:e}=i.stylesheet;e&&w(e)}),Tt.clear())})}let Mt;function wt(i){Mt=i}function $t(){if(!Mt)throw new Error("Function called outside component initialization");return Mt}function Tr(i){$t().$$.on_mount.push(i)}function Ir(i){$t().$$.on_destroy.push(i)}function Er(){const i=$t();return(e,t,{cancelable:n=!1}={})=>{const r=i.$$.callbacks[e];if(r){const l=er(e,t,{cancelable:n});return r.slice().forEach(s=>{s.call(i,l)}),!l.defaultPrevented}return!0}}function bn(i,e){const t=i.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const at=[],oe=[];let ct=[];const jt=[],tr=Promise.resolve();let Xt=!1;function nr(){Xt||(Xt=!0,tr.then(ir))}function Ar(){return nr(),tr}function be(i){ct.push(i)}function ge(i){jt.push(i)}const Vt=new Set;let st=0;function ir(){if(st!==0)return;const i=Mt;do{try{for(;st<at.length;){const e=at[st];st++,wt(e),Pr(e.$$)}}catch(e){throw at.length=0,st=0,e}for(wt(null),at.length=0,st=0;oe.length;)oe.pop()();for(let e=0;e<ct.length;e+=1){const t=ct[e];Vt.has(t)||(Vt.add(t),t())}ct.length=0}while(at.length);for(;jt.length;)jt.pop()();Xt=!1,Vt.clear(),wt(i)}function Pr(i){if(i.fragment!==null){i.update(),ve(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(be)}}function Lr(i){const e=[],t=[];ct.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),ct=e}let gt;function xt(){return gt||(gt=Promise.resolve(),gt.then(()=>{gt=null})),gt}function lt(i,e,t){i.dispatchEvent(er(`${e?"intro":"outro"}${t}`))}const qt=new Set;let Be;function $(){Be={r:0,c:[],p:Be}}function x(){Be.r||ve(Be.c),Be=Be.p}function v(i,e){i&&i.i&&(qt.delete(i),i.i(e))}function y(i,e,t,n){if(i&&i.o){if(qt.has(i))return;qt.add(i),Be.c.push(()=>{qt.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}const en={duration:0};function Pt(i,e,t){const n={direction:"in"};let r=e(i,t,n),l=!1,s,o,a=0;function u(){s&&At(i,s)}function c(){const{delay:d=0,duration:m=300,easing:p=Yt,tick:h=ne,css:_}=r||en;_&&(s=Et(i,0,1,m,d,p,_,a++)),h(0,1);const S=Gt()+d,M=S+m;o&&o.abort(),l=!0,be(()=>lt(i,!0,"start")),o=Zt(N=>{if(l){if(N>=M)return h(1,0),lt(i,!0,"end"),u(),l=!1;if(N>=S){const T=p((N-S)/m);h(T,1-T)}}return l})}let f=!1;return{start(){f||(f=!0,At(i),Xe(r)?(r=r(n),xt().then(c)):c())},invalidate(){f=!1},end(){l&&(u(),l=!1)}}}function Lt(i,e,t){const n={direction:"out"};let r=e(i,t,n),l=!0,s;const o=Be;o.r+=1;let a;function u(){const{delay:c=0,duration:f=300,easing:d=Yt,tick:m=ne,css:p}=r||en;p&&(s=Et(i,1,0,f,c,d,p));const h=Gt()+c,_=h+f;be(()=>lt(i,!1,"start")),"inert"in i&&(a=i.inert,i.inert=!0),Zt(S=>{if(l){if(S>=_)return m(0,1),lt(i,!1,"end"),--o.r||ve(o.c),!1;if(S>=h){const M=d((S-h)/f);m(1-M,M)}}return l})}return Xe(r)?xt().then(()=>{r=r(n),u()}):u(),{end(c){c&&"inert"in i&&(i.inert=a),c&&r.tick&&r.tick(1,0),l&&(s&&At(i,s),l=!1)}}}function et(i,e,t,n){let l=e(i,t,{direction:"both"}),s=n?0:1,o=null,a=null,u=null,c;function f(){u&&At(i,u)}function d(p,h){const _=p.b-s;return h*=Math.abs(_),{a:s,b:p.b,d:_,duration:h,start:p.start,end:p.start+h,group:p.group}}function m(p){const{delay:h=0,duration:_=300,easing:S=Yt,tick:M=ne,css:N}=l||en,T={start:Gt()+h,b:p};p||(T.group=Be,Be.r+=1),"inert"in i&&(p?c!==void 0&&(i.inert=c):(c=i.inert,i.inert=!0)),o||a?a=T:(N&&(f(),u=Et(i,s,p,_,h,S,N)),p&&M(0,1),o=d(T,_),be(()=>lt(i,p,"start")),Zt(b=>{if(a&&b>a.start&&(o=d(a,_),a=null,lt(i,o.b,"start"),N&&(f(),u=Et(i,s,o.b,o.duration,0,S,l.css))),o){if(b>=o.end)M(s=o.b,1-s),lt(i,o.b,"end"),a||(o.b?f():--o.group.r||ve(o.group.c)),o=null;else if(b>=o.start){const J=b-o.start;s=o.a+o.d*S(J/o.duration),M(s,1-s)}}return!!(o||a)}))}return{run(p){Xe(l)?xt().then(()=>{l=l({direction:p?"in":"out"}),m(p)}):m(p)},end(){f(),o=a=null}}}function Q(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Ur(i,e){i.d(1),e.delete(i.key)}function $e(i,e){y(i,1,1,()=>{e.delete(i.key)})}function Qe(i,e,t,n,r,l,s,o,a,u,c,f){let d=i.length,m=l.length,p=d;const h={};for(;p--;)h[i[p].key]=p;const _=[],S=new Map,M=new Map,N=[];for(p=m;p--;){const Y=f(r,l,p),q=t(Y);let C=s.get(q);C?n&&N.push(()=>C.p(Y,e)):(C=u(q,Y),C.c()),S.set(q,_[p]=C),q in h&&M.set(q,Math.abs(p-h[q]))}const T=new Set,b=new Set;function J(Y){v(Y,1),Y.m(o,c),s.set(Y.key,Y),c=Y.first,m--}for(;d&&m;){const Y=_[m-1],q=i[d-1],C=Y.key,I=q.key;Y===q?(c=Y.first,d--,m--):S.has(I)?!s.has(C)||T.has(C)?J(Y):b.has(I)?d--:M.get(C)>M.get(I)?(b.add(C),J(Y)):(T.add(I),d--):(a(q,s),d--)}for(;d--;){const Y=i[d];S.has(Y.key)||a(Y,s)}for(;m;)J(_[m-1]);return ve(N),_}function _e(i,e,t){const n=i.$$.props[e];n!==void 0&&(i.$$.bound[n]=t,t(i.$$.ctx[n]))}function j(i){i&&i.c()}function V(i,e,t){const{fragment:n,after_update:r}=i.$$;n&&n.m(e,t),be(()=>{const l=i.$$.on_mount.map(Ki).filter(Xe);i.$$.on_destroy?i.$$.on_destroy.push(...l):ve(l),i.$$.on_mount=[]}),r.forEach(be)}function B(i,e){const t=i.$$;t.fragment!==null&&(Lr(t.after_update),ve(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Hr(i,e){i.$$.dirty[0]===-1&&(at.push(i),nr(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function re(i,e,t,n,r,l,s=null,o=[-1]){const a=Mt;wt(i);const u=i.$$={fragment:null,ctx:[],props:l,update:ne,not_equal:r,bound:gn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:gn(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};s&&s(u.root);let c=!1;if(u.ctx=t?t(i,e.props||{},(f,d,...m)=>{const p=m.length?m[0]:d;return u.ctx&&r(u.ctx[f],u.ctx[f]=p)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](p),c&&Hr(i,f)),d}):[],u.update(),c=!0,ve(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const f=Or(e.target);u.fragment&&u.fragment.l(f),f.forEach(w)}else u.fragment&&u.fragment.c();e.intro&&v(i.$$.fragment),V(i,e.target,e.anchor),ir()}wt(a)}class le{constructor(){z(this,"$$");z(this,"$$set")}$destroy(){B(this,1),this.$destroy=ne}$on(e,t){if(!Xe(t))return ne;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!kr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Yr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yr);function zr(i){const e=i-1;return e*e*e+1}function qe(i,{delay:e=0,duration:t=400,easing:n=Yt}={}){const r=+getComputedStyle(i).opacity;return{delay:e,duration:t,easing:n,css:l=>`opacity: ${l*r}`}}function dt(i,{delay:e=0,duration:t=400,easing:n=zr,axis:r="y"}={}){const l=getComputedStyle(i),s=+l.opacity,o=r==="y"?"height":"width",a=parseFloat(l[o]),u=r==="y"?["top","bottom"]:["left","right"],c=u.map(S=>`${S[0].toUpperCase()}${S.slice(1)}`),f=parseFloat(l[`padding${c[0]}`]),d=parseFloat(l[`padding${c[1]}`]),m=parseFloat(l[`margin${c[0]}`]),p=parseFloat(l[`margin${c[1]}`]),h=parseFloat(l[`border${c[0]}Width`]),_=parseFloat(l[`border${c[1]}Width`]);return{delay:e,duration:t,easing:n,css:S=>`overflow: hidden;opacity: ${Math.min(S*20,1)*s};${o}: ${S*a}px;padding-${u[0]}: ${S*f}px;padding-${u[1]}: ${S*d}px;margin-${u[0]}: ${S*m}px;margin-${u[1]}: ${S*p}px;border-${u[0]}-width: ${S*h}px;border-${u[1]}-width: ${S*_}px;`}}function vn(i){let e,t,n,r,l,s,o,a,u;return{c(){e=O("div"),t=O("div"),l=H(),s=O("div"),g(t,"class","v-track svelte-iodyq2"),L(t,"height",i[6]+"px"),g(s,"class","v-thumb svelte-iodyq2"),L(s,"height",i[12]+"px"),L(s,"top",i[11]+"px"),g(e,"class","v-scrollbar svelte-iodyq2"),L(e,"height",i[6]+"px"),L(e,"margin",i[8]+"px "+i[14]+"px "+i[7]+"px "+i[13]+"px"),Ne(e,"fixed",i[9])},m(c,f){k(c,e,f),D(e,t),i[24](t),D(e,l),D(e,s),i[25](s),u=!0},p(c,f){(!u||f[0]&64)&&L(t,"height",c[6]+"px"),(!u||f[0]&4096)&&L(s,"height",c[12]+"px"),(!u||f[0]&2048)&&L(s,"top",c[11]+"px"),(!u||f[0]&64)&&L(e,"height",c[6]+"px"),(!u||f[0]&24960)&&L(e,"margin",c[8]+"px "+c[14]+"px "+c[7]+"px "+c[13]+"px"),(!u||f[0]&512)&&Ne(e,"fixed",c[9])},i(c){u||(c&&be(()=>{u&&(r&&r.end(1),n=Pt(t,i[0],{}),n.start())}),c&&be(()=>{u&&(a&&a.end(1),o=Pt(s,i[2],{}),o.start())}),u=!0)},o(c){n&&n.invalidate(),c&&(r=Lt(t,i[1],{})),o&&o.invalidate(),c&&(a=Lt(s,i[3],{})),u=!1},d(c){c&&w(e),i[24](null),c&&r&&r.end(),i[25](null),c&&a&&a.end()}}}function Fr(i){let e,t=i[10]&&vn(i);return{c(){t&&t.c(),e=Z()},m(n,r){t&&t.m(n,r),k(n,e,r)},p(n,r){n[10]?t?(t.p(n,r),r[0]&1024&&v(t,1)):(t=vn(n),t.c(),v(t,1),t.m(e.parentNode,e)):t&&($(),y(t,1,1,()=>{t=null}),x())},i(n){v(t)},o(n){y(t)},d(n){n&&w(e),t&&t.d(n)}}}function Jr(i,e,t){let n,r,l,s,o,a,u,c,f,d,m,p,h,_,S,{viewport:M}=e,{contents:N}=e,{hideAfter:T=1e3}=e,{alwaysVisible:b=!1}=e,{initiallyVisible:J=!1}=e,{margin:Y={}}=e,{vTrackIn:q=F=>qe(F,{duration:100})}=e,{vTrackOut:C=F=>qe(F,{duration:300})}=e,{vThumbIn:I=F=>qe(F,{duration:100})}=e,{vThumbOut:U=F=>qe(F,{duration:300})}=e;const P=Er();let W,G,ae=0,E=0,R=0,ee=!1,X=!1;function we(F){if(!F)return;if(n==null||n(),typeof window.ResizeObserver>"u")throw new Error("window.ResizeObserver is missing.");t(9,ee=document.scrollingElement===F);const Ze=ee?document:F;Ze.addEventListener("scroll",Ke,{passive:!0});const it=new ResizeObserver(pn=>{for(const _o of pn)t(21,f=(F==null?void 0:F.scrollHeight)??0),t(6,m=(F==null?void 0:F.clientHeight)-(o+a))});return it.observe(F),()=>{Ze.removeEventListener("scroll",Ke),it.unobserve(N),it.disconnect()}}function he(F){if(F)return l==null||l(),W.addEventListener("mouseenter",ce),W.addEventListener("mouseleave",Se),()=>{W.removeEventListener("mouseenter",ce),W.removeEventListener("mouseleave",Se)}}function me(F){if(F)return s==null||s(),G.addEventListener("mousedown",Ee,{passive:!0}),G.addEventListener("touchstart",Ee,{passive:!0}),()=>{G.removeEventListener("mousedown",Ee),G.removeEventListener("touchstart",Ee)}}function ue(F){if(!F)return;if(r==null||r(),typeof window.ResizeObserver>"u")throw new Error("window.ResizeObserver is missing.");const Ze=new ResizeObserver(it=>{for(const pn of it)t(21,f=(M==null?void 0:M.scrollHeight)??0)});return Ze.observe(F),()=>{Ze.unobserve(F),Ze.disconnect()}}function ye(){R=window.setTimeout(()=>{t(10,S=_&&(b||J&&!X)||!1),P("hide")},T)}function Oe(){R&&(window.clearTimeout(R),R=0)}function Ke(){_&&(Oe(),ye(),t(10,S=b||J&&!X||!0),t(22,d=(M==null?void 0:M.scrollTop)??0),X=!0,P("show"))}function ce(){Oe()}function Se(){Oe(),ye()}function Ee(F){F.stopPropagation(),F.preventDefault(),ae=M.scrollTop,E=F.changedTouches?F.changedTouches[0].clientY:F.clientY,document.addEventListener("mousemove",Fe),document.addEventListener("touchmove",Fe),document.addEventListener("mouseup",Je),document.addEventListener("touchend",Je)}function Fe(F){F.stopPropagation(),F.preventDefault();const Ze=F.changedTouches?F.changedTouches[0].clientY:F.clientY,it=f/m;t(15,M.scrollTop=ae+it*(Ze-E),M)}function Je(F){F.stopPropagation(),F.preventDefault(),ae=0,E=0,document.removeEventListener("mousemove",Fe),document.removeEventListener("touchmove",Fe),document.removeEventListener("mouseup",Je),document.removeEventListener("touchend",Je)}Tr(()=>{t(15,M=M??document.scrollingElement),t(16,N=N??document.body)}),Ir(()=>{n==null||n(),r==null||r(),l==null||l(),s==null||s()});function nt(F){oe[F?"unshift":"push"](()=>{W=F,t(4,W)})}function Rt(F){oe[F?"unshift":"push"](()=>{G=F,t(5,G)})}return i.$$set=F=>{"viewport"in F&&t(15,M=F.viewport),"contents"in F&&t(16,N=F.contents),"hideAfter"in F&&t(17,T=F.hideAfter),"alwaysVisible"in F&&t(18,b=F.alwaysVisible),"initiallyVisible"in F&&t(19,J=F.initiallyVisible),"margin"in F&&t(20,Y=F.margin),"vTrackIn"in F&&t(0,q=F.vTrackIn),"vTrackOut"in F&&t(1,C=F.vTrackOut),"vThumbIn"in F&&t(2,I=F.vThumbIn),"vThumbOut"in F&&t(3,U=F.vThumbOut)},i.$$.update=()=>{i.$$.dirty[0]&32768&&(n=we(M)),i.$$.dirty[0]&65536&&(r=ue(N)),i.$$.dirty[0]&16&&(l=he(W)),i.$$.dirty[0]&32&&(s=me(G)),i.$$.dirty[0]&1048576&&t(8,o=Y.top??0),i.$$.dirty[0]&1048576&&t(7,a=Y.bottom??0),i.$$.dirty[0]&1048576&&t(14,u=Y.right??0),i.$$.dirty[0]&1048576&&t(13,c=Y.left??0),i.$$.dirty[0]&32768&&t(21,f=(M==null?void 0:M.scrollHeight)??0),i.$$.dirty[0]&32768&&t(22,d=(M==null?void 0:M.scrollTop)??0),i.$$.dirty[0]&33152&&t(6,m=(M==null?void 0:M.clientHeight)??0-(o+a)),i.$$.dirty[0]&2097216&&t(12,p=f>0?m/f*m:0),i.$$.dirty[0]&6291520&&t(11,h=f>0?d/f*m:0),i.$$.dirty[0]&2097216&&t(23,_=f>m),i.$$.dirty[0]&9175040&&t(10,S=_&&(b||J))},[q,C,I,U,W,G,m,a,o,ee,S,h,p,c,u,M,N,T,b,J,Y,f,d,_,nt,Rt]}class Rr extends le{constructor(e){super(),re(this,e,Jr,Fr,ie,{viewport:15,contents:16,hideAfter:17,alwaysVisible:18,initiallyVisible:19,margin:20,vTrackIn:0,vTrackOut:1,vThumbIn:2,vThumbOut:3},null,[-1,-1])}}function Vr(i){let e,t,n,r,l,s;const o=i[13].default,a=Ue(o,i,i[12],null);return l=new Rr({props:{viewport:i[10],contents:i[11],hideAfter:i[2],alwaysVisible:i[3],initiallyVisible:i[4],margin:i[5],vTrackIn:i[6],vTrackOut:i[7],vThumbIn:i[8],vThumbOut:i[9]}}),l.$on("show",i[16]),l.$on("hide",i[17]),{c(){e=O("div"),t=O("div"),n=O("div"),a&&a.c(),r=H(),j(l.$$.fragment),g(n,"class","svlr-contents"),g(t,"class","svlr-viewport svelte-2auii3"),L(t,"width",i[0]),L(t,"height",i[1]),g(e,"class","svlr-wrapper svelte-2auii3"),L(e,"width",i[0]),L(e,"height",i[1])},m(u,c){k(u,e,c),D(e,t),D(t,n),a&&a.m(n,null),i[14](n),i[15](t),D(e,r),V(l,e,null),s=!0},p(u,[c]){a&&a.p&&(!s||c&4096)&&Ye(a,o,u,u[12],s?He(o,u[12],c,null):ze(u[12]),null),(!s||c&1)&&L(t,"width",u[0]),(!s||c&2)&&L(t,"height",u[1]);const f={};c&1024&&(f.viewport=u[10]),c&2048&&(f.contents=u[11]),c&4&&(f.hideAfter=u[2]),c&8&&(f.alwaysVisible=u[3]),c&16&&(f.initiallyVisible=u[4]),c&32&&(f.margin=u[5]),c&64&&(f.vTrackIn=u[6]),c&128&&(f.vTrackOut=u[7]),c&256&&(f.vThumbIn=u[8]),c&512&&(f.vThumbOut=u[9]),l.$set(f),(!s||c&1)&&L(e,"width",u[0]),(!s||c&2)&&L(e,"height",u[1])},i(u){s||(v(a,u),v(l.$$.fragment,u),s=!0)},o(u){y(a,u),y(l.$$.fragment,u),s=!1},d(u){u&&w(e),a&&a.d(u),i[14](null),i[15](null),B(l)}}}function Br(i,e,t){let{$$slots:n={},$$scope:r}=e,{width:l="10rem"}=e,{height:s="10rem"}=e,{hideAfter:o=1e3}=e,{alwaysVisible:a=!1}=e,{initiallyVisible:u=!1}=e,{margin:c={}}=e,{vTrackIn:f=b=>qe(b,{duration:100})}=e,{vTrackOut:d=b=>qe(b,{duration:300})}=e,{vThumbIn:m=b=>qe(b,{duration:100})}=e,{vThumbOut:p=b=>qe(b,{duration:300})}=e,h,_;function S(b){oe[b?"unshift":"push"](()=>{_=b,t(11,_)})}function M(b){oe[b?"unshift":"push"](()=>{h=b,t(10,h)})}function N(b){bn.call(this,i,b)}function T(b){bn.call(this,i,b)}return i.$$set=b=>{"width"in b&&t(0,l=b.width),"height"in b&&t(1,s=b.height),"hideAfter"in b&&t(2,o=b.hideAfter),"alwaysVisible"in b&&t(3,a=b.alwaysVisible),"initiallyVisible"in b&&t(4,u=b.initiallyVisible),"margin"in b&&t(5,c=b.margin),"vTrackIn"in b&&t(6,f=b.vTrackIn),"vTrackOut"in b&&t(7,d=b.vTrackOut),"vThumbIn"in b&&t(8,m=b.vThumbIn),"vThumbOut"in b&&t(9,p=b.vThumbOut),"$$scope"in b&&t(12,r=b.$$scope)},[l,s,o,a,u,c,f,d,m,p,h,_,r,n,S,M,N,T]}class rr extends le{constructor(e){super(),re(this,e,Br,Vr,ie,{width:0,height:1,hideAfter:2,alwaysVisible:3,initiallyVisible:4,margin:5,vTrackIn:6,vTrackOut:7,vThumbIn:8,vThumbOut:9})}}const ot=[];function Wr(i,e){return{subscribe:yt(i,e).subscribe}}function yt(i,e=ne){let t;const n=new Set;function r(o){if(ie(i,o)&&(i=o,t)){const a=!ot.length;for(const u of n)u[1](),ot.push(u,i);if(a){for(let u=0;u<ot.length;u+=2)ot[u][0](ot[u+1]);ot.length=0}}}function l(o){r(o(i))}function s(o,a=ne){const u=[o,a];return n.add(u),n.size===1&&(t=e(r,l)||ne),o(i),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:r,update:l,subscribe:s}}class Ve{constructor(){z(this,"idCounter",0);z(this,"children",new Map)}toJSON(){return this.topologicalSort(),{idCounter:this.idCounter,children:[...this.children.values()]}}static fromJSON(e,t,n,r){for(const l of e.children)n(l,t);return r}add(e){if(this.children.has(e.id))throw new Error(`New child ID (${e.id}) already exists in manager object.`);this.children.set(e.id,e)}generateId(){for(;this.children.has(String(this.idCounter));)this.idCounter++;return String(this.idCounter++)}findChildDependants(){const e=new Map;for(const t of this.children.values()){const n=new Set(t.getChildIds());e.has(t.id)||e.set(t.id,{dependencies:n.size,dependants:new Set}),e.get(t.id).dependencies=n.size;for(const r of n)e.has(r)||e.set(r,{dependencies:-1,dependants:new Set}),e.get(r).dependants.add(t.id)}return e}topologicalSort(){const e=this.findChildDependants(),t=[],n=e.size;for(let r=0;r<n;r++)for(const[l,s]of e)if(s.dependencies===0){t.push(l);for(const o of s.dependants)e.get(o).dependencies--;e.delete(l);break}if(t.length!=n)throw new Error("No topological sort found for Manager children (circular dependency).");this.children=new Map(t.map(r=>[r,this.children.get(r)]))}}class tn{constructor(e,t,n="",r,l=Math.floor(Math.random()*360),s=!0){z(this,"id");z(this,"manager");z(this,"name");z(this,"description");z(this,"hue");this.manager=e,this.name=t,this.description=n,this.hue=l,r===void 0?this.id=this.manager.generateId():this.id=r,s&&this.add()}manageableJSON(){return{id:this.id,manager:null,name:this.name,description:this.description,hue:this.hue}}getDependants(){let e=[...this.manager.findChildDependants().get(this.id).dependants].map(t=>this.manager.children.get(t));for(const t of[...e])e=e.concat(t.getDependants());return e}}class xe extends tn{constructor(t,n,r,l,s,o,a){super(t,n,r,a);z(this,"defaultValue");z(this,"displayAliases");z(this,"renderAliases");this.defaultValue=l,this.displayAliases=s,this.renderAliases=o}toJSON(){return this.parameterJson()}parameterJson(){var t,n;return{...this.manageableJSON(),type:"Parameter",displayAliases:this.displayAliases===void 0?void 0:[...(t=this.displayAliases)==null?void 0:t.entries()],renderAliases:this.renderAliases===void 0?void 0:[...(n=this.renderAliases)==null?void 0:n.entries()],valueType:typeof this.defaultValue,defaultValue:this.defaultValue}}static fromJSON(t,n){const r=[n.parameterManager,t.name,t.description,t.defaultValue],l=[t.displayAliases===void 0?void 0:new Map(t.displayAliases),t.renderAliases===void 0?void 0:new Map(t.renderAliases),t.id];if(t.type==="Parameter"){if(t.valueType==="number")return new xe(...r,...l);if(t.valueType==="string")return new xe(...r,...l);if(t.valueType==="boolean")return new xe(...r,...l);throw Error("Unexpected value for 'valueType' when deserializing Parameter.")}else if(t.type==="NumberParameter"){const s=t;return new Ge(...r,s.min,s.max,s.step,s.unit,...l)}else if(t.type==="StringParameter"){const s=t;return new kt(...r,s.minLength,s.maxLength,...l)}else if(t.type==="NestedParameter"){const s=t,o=Object.entries(s.nested),a=u=>new Map(o.map(([c,f])=>[u(c),f.map(d=>n.parameterManager.children.get(d))]));if(s.valueType==="number")return new Ie(...r,a(Number),...l);if(t.valueType==="string")return new Ie(...r,a(String),...l);if(t.valueType==="boolean")return new Ie(...r,a(u=>u==="true"),...l);throw Error("Unexpected value for 'valueType' when deserializing NestedParameter.")}else throw Error("Unexpected value for 'type' when deserializing Parameter.")}add(){this.manager.add(this)}validate(t){return{error:0}}checkDefault(){if(this.validate(this.defaultValue).error!=0)throw new Error(`Default value of ${this.defaultValue} is not valid for parameter with ID ${this.id}.`)}newState(t){return new zt(this,t)}getChildIds(){return[]}getDisplayValue(t){var n;return((n=this.displayAliases)==null?void 0:n.get(t))??t}getRenderValue(t){var n;return((n=this.renderAliases)==null?void 0:n.get(t))??t}}class zt{constructor(e,t){z(this,"parameter");z(this,"value");this.parameter=e,this.value=t??this.parameter.defaultValue}toJSON(){return{parameter:this.parameter.id,value:this.value}}static fromJSON(e,t){const n=t.parameterManager.children.get(e.parameter);return new zt(n,e.value)}}var lr=(i=>(i[i.None=0]="None",i[i.UnderMin=1]="UnderMin",i[i.OverMax=2]="OverMax",i[i.WrongStep=3]="WrongStep",i[i.UnderMinLength=4]="UnderMinLength",i[i.OverMaxLength=5]="OverMaxLength",i[i.BadEnumOption=6]="BadEnumOption",i[i.BadNestedOption=7]="BadNestedOption",i[i.EmptyValue=8]="EmptyValue",i))(lr||{});class Ge extends xe{constructor(t,n,r,l,s,o,a,u,c,f,d){super(t,n,r,l,c,f,d);z(this,"min");z(this,"max");z(this,"step");z(this,"unit");this.min=s,this.max=o,this.step=a,this.unit=u,this.checkDefault()}toJSON(){return{...this.parameterJson(),type:"NumberParameter",min:this.min,max:this.max,step:this.step,unit:this.unit}}validate(t){if(this.min!==void 0&&t<this.min)return{error:1,fixed:this.min};if(this.max!==void 0&&t>this.max)return{error:2,fixed:this.max};if(this.step!==void 0&&Math.abs(Math.round(t/this.step)-t/this.step)>1e-10){let r=Math.round(t/this.step)*this.step;if(r=this.validate(r).fixed??r,r!==t)return{error:3,fixed:r}}return{error:0}}}class kt extends xe{constructor(t,n,r,l,s,o,a,u,c){super(t,n,r,l,a,u,c);z(this,"minLength");z(this,"maxLength");this.minLength=s,this.maxLength=o,this.checkDefault()}toJSON(){return{...this.parameterJson(),type:"StringParameter",minLength:this.minLength,maxLength:this.maxLength}}validate(t){return this.minLength!==void 0&&t.length<this.minLength?{error:4}:this.maxLength!==void 0&&t.length>this.maxLength?{error:5,fixed:t.slice(0,this.maxLength)}:{error:0}}}class Ie extends xe{constructor(t,n,r,l,s,o,a,u){super(t,n,r,l,o,a,u);z(this,"nested");z(this,"descendants");if(s.size===0)throw new Error(`NestedParameter with ID ${this.id} has empty nested parameter map.`);this.nested=s,this.descendants=this.getDescendants([]),this.checkDefault()}toJSON(){const t=new Map;for(const[n,r]of this.nested.entries())t.set(String(n),r.map(l=>l.id));return{...this.parameterJson(),type:"NestedParameter",nested:t}}getDescendants(t){if(t.includes(this))throw new Error(`NestedParameter with ID ${this.id} contains itself.`);const n=new Set;for(const r of this.nested.values())for(const l of r)if(n.add(l),l instanceof Ie)for(const s of l.getDescendants([...t,this]))n.add(s);return n}validate(t){return this.nested.has(t)?{error:0}:{error:7}}getChildIds(){let t=[];for(const n of this.nested.values())t=[...t,...n.map(r=>r.id)];return t}}class _t extends Ie{constructor(e,t,n,r,l,s,o,a){super(e,t,n,r,new Map(l.map(u=>[u,[]])),s,o,a)}}function sr(i){return JSON.parse(Kt(i))}function Kt(i){return JSON.stringify(i,(e,t)=>t instanceof Map?Object.fromEntries(t):t)}const wn=6;function kn(i){return Math.round((i+Number.EPSILON)*10**wn)/10**wn}class Ft{constructor(){z(this,"baseLayer",0);z(this,"maxLayer",0);z(this,"children",[])}add(e,t=0){for(const n of e.children){const r={start:n.start+Math.round(t*1e3),end:n.end+Math.round(t*1e3),layer:n.layer+this.baseLayer,data:n.data};this.maxLayer=Math.max(this.maxLayer,r.layer),this.children.push(r)}this.children.sort((n,r)=>n.start-r.start)}addChild(e,t,n,r){this.children.push({start:Math.round(e*1e3),end:Math.round(t*1e3),layer:n,data:r})}export(e){return JSON.stringify({numActions:this.children.length,maxLayer:this.maxLayer,isAbsolute:e,actions:this.children})}}class De extends tn{constructor(t,n,r,l,s=[],o,a,u){super(t,n,r,a,u);z(this,"parameters");z(this,"descendants");z(this,"durationProps");z(this,"displayParams");this.parameters=s,this.descendants=this.getDescendants();for(const c of l.durationParams)if(!this.descendants.has(c.param))throw new Error(`Parameter with ID ${c.param.id} cannot be used as durationParam for Action with ID ${this.id} because it is not a descendant parameter.`);this.durationProps=l;for(const[c,f,d]of o)if(!this.descendants.has(c))throw new Error(`Parameter with ID ${c.id} cannot be used as displayParam for Action with ID ${this.id} because it is not a descendant parameter.`);this.displayParams=o}toJSON(){return{...this.manageableJSON(),parameters:this.parameters.map(t=>t.id),durationProps:{defaultDuration:this.durationProps.defaultDuration,durationParams:this.durationProps.durationParams.map(t=>({param:t.param.id,paramOffset:t.paramOffset,paramMultiplier:t.paramMultiplier}))},displayParams:this.displayParams.map(([t,n,r])=>[t.id,n,r])}}static fromJSON(t,n){return new De(n.actionManager,t.name,t.description,{defaultDuration:t.durationProps.defaultDuration,durationParams:t.durationProps.durationParams.map(r=>({param:n.parameterManager.children.get(r.param),paramOffset:r.paramOffset,paramMultiplier:r.paramMultiplier}))},t.parameters.map(r=>n.parameterManager.children.get(r),t.id,t.hue),t.displayParams.map(([r,l,s])=>[n.parameterManager.children.get(r),l,s]),t.id,t.hue)}add(){this.manager.add(this)}getDescendants(){const t=new Set;for(const n of this.parameters)if(t.add(n),n instanceof Ie)for(const r of n.descendants)t.add(r);return t}newState(){const n=Array.from(this.descendants).map(r=>r.newState());return new tt(this,n)}getChildIds(){return[]}}class tt{constructor(e,t){z(this,"action");z(this,"parameterStates");this.action=e,this.parameterStates=new Map;for(const n of t)this.parameterStates.set(n.parameter.id,n);console.log(this.getActiveParameters())}toJSON(){return{action:this.action.id,parameterStates:[...this.parameterStates.values()]}}static fromJSON(e,t){return new tt(t.actionManager.children.get(e.action),e.parameterStates.map(n=>zt.fromJSON(n,t)))}getDuration(){var t;const e=this.action.durationProps;for(const n of this.action.durationProps.durationParams){const r=(t=this.parameterStates.get(n.param.id))==null?void 0:t.value;if(r===void 0)return e.defaultDuration;const l=(n.paramOffset??0)+r*(n.paramMultiplier??1);if(l>0)return l}return e.defaultDuration}getManageableChild(){return this.action}getActiveParameters(){var n;const e=new Set,t=[...this.action.parameters];for(;t.length>0;){const r=t.shift();if(r!==void 0&&(e.add(r),r instanceof Ie))for(const l of r.nested.get((n=this.parameterStates.get(r.id))==null?void 0:n.value)??[])t.push(l)}return e}render(){const e=this.getDuration(),t=new Ft;return t.addChild(0,e,t.baseLayer,{action:this.action.id,states:Object.fromEntries([...this.parameterStates.entries()].map(([n,r])=>[n,r.parameter.getRenderValue(r.value)]))}),t}}class jr{constructor(e,t){z(this,"child");z(this,"props");this.child=e,this.props=t}toJSON(){return this.repeatJSON()}repeatJSON(){let e;if(this.child instanceof tt)e={type:"Action",json:this.child};else if(this.child instanceof Pe)e={type:"Sequence",id:this.child.id};else throw new Error("Cannot serialize unknown Repeatable subclass.");return{child:e,props:this.props}}validate(){const e=this.child.getDuration(this.props.keepLeading);return e===void 0?{error:10}:this.props.validate(e)}getDuration(){const e=this.child.getDuration(this.props.keepLeading);if(e===void 0)return[10];const{error:t,solved:n}=this.props.validate(e);return[t,n==null?void 0:n.duration]}}var We=(i=>(i[i.None=0]="None",i[i.WrongNumConstraints=1]="WrongNumConstraints",i[i.InvalidConstraints=2]="InvalidConstraints",i[i.EmptyConstraints=3]="EmptyConstraints",i[i.EndBeforeStart=4]="EndBeforeStart",i[i.NegativeDuration=5]="NegativeDuration",i[i.TooFewRepetitions=6]="TooFewRepetitions",i[i.FractionalRepetitions=7]="FractionalRepetitions",i[i.IntervalTooShort=8]="IntervalTooShort",i[i.DurationTooShort=9]="DurationTooShort",i[i.ChildDurationInfinite=10]="ChildDurationInfinite",i))(We||{});const ut=[{start:["end","duration","repetitions"]},{end:["repetitions","interval"],duration:["repetitions","interval"],repetitions:["interval"],interval:[]}];class Ot{constructor(e,t,n=!1,r=!1,l=!1,s="seconds",o="seconds"){z(this,"constraints");z(this,"selectedConstraints");z(this,"includeChildDuration");z(this,"trailingInterval");z(this,"keepLeading");z(this,"unit");z(this,"durationUnit");this.constraints=e,this.selectedConstraints=t,this.includeChildDuration=n,this.trailingInterval=r,this.keepLeading=l,this.unit=s,this.durationUnit=o}toJSON(){return{constraints:{start:this.constraints.start,end:this.constraints.end,duration:this.constraints.duration,repetitions:this.constraints.repetitions,interval:this.constraints.interval},selectedConstraints:this.selectedConstraints,includeChildDuration:this.includeChildDuration,trailingInterval:this.trailingInterval,keepLeading:this.keepLeading,unit:this.unit,durationUnit:this.durationUnit}}static fromJSON(e,t){return new Ot({start:e.constraints.start,end:e.constraints.end,duration:e.constraints.duration,repetitions:e.constraints.repetitions,interval:e.constraints.interval},e.selectedConstraints,e.includeChildDuration,e.trailingInterval,e.keepLeading,e.unit,e.durationUnit)}validateConstraints(){if(this.selectedConstraints.length!==ut.length+1)return 1;for(let e=0;e<ut.length;e++){const t=this.selectedConstraints[e];if(t===void 0||!(t in ut[e]))return 2;const n=ut[e][t];if(n===void 0)return 2;const r=this.selectedConstraints[e+1];if(r===void 0){if(n.length===0)break;return 2}if(!n.includes(r))return 2}return 0}isSelected(e){return this.selectedConstraints.includes(e)}validate(e){const t=this.validateConstraints();if(t!==0)return{error:t};for(let a=0;a<this.selectedConstraints.length;a++){const u=this.selectedConstraints[a];if(u!==void 0&&this.constraints[u]===void 0)return{error:3}}if(this.isSelected("start")&&this.isSelected("end")&&this.constraints.end<this.constraints.start)return{error:4};if(this.isSelected("duration")&&this.constraints.duration<0)return{error:5};if(this.isSelected("repetitions")){if(this.constraints.repetitions<1)return{error:6};if(this.constraints.repetitions%1!==0)return{error:7}}let n;if(this.isSelected("duration"))n=this.constraints.duration;else if(this.isSelected("start")&&this.isSelected("end"))n=this.constraints.end-this.constraints.start;else if(this.isSelected("interval")){let a=this.constraints.interval;if(this.includeChildDuration||(a+=e),a<e)return{error:8};this.isSelected("repetitions")?(n=a*this.constraints.repetitions,this.trailingInterval||(n-=a-e)):n=null}else return{error:2};let r;this.isSelected("start")?r=this.constraints.start:n===null?r=null:r=this.constraints.end-n;let l;this.isSelected("end")?l=this.constraints.end:n===null?l=null:l=this.constraints.start+n;let s;if(this.isSelected("interval")){if(s=this.constraints.interval,this.includeChildDuration||(s+=e),s<e)return{error:8}}else if(n!==null){const a=n-e*this.constraints.repetitions;if(a<0)return{error:9};let u=this.constraints.repetitions;this.trailingInterval||(u-=1);const c=a/u;s=e+c}else return{error:2};let o;if(this.isSelected("repetitions"))o=this.constraints.repetitions;else if(n!==null){let a=n;if(this.trailingInterval||(a+=s-e),o=Math.floor(a/s),o<1)return{error:9}}else return{error:2};return this.includeChildDuration||(s-=e),{error:0,solved:{start:r??void 0,end:l??void 0,duration:n??void 0,repetitions:o,interval:s}}}toUnitString(e,t){if(e===void 0)return"";if(t==="repetitions")return e.toString();const n=s=>`${s<10?"0":""}${s}`,r=s=>kn(s).toString(),l=this.constraintUnit(t);if(l==="seconds"||l==="unix time")return r(e);if(l==="minutes")return r(e/60);if(l==="hours")return r(e/3600);if(l==="HH:MM:SS"){const s=n(Math.floor(e/3600)),o=n(Math.floor(e%3600/60)),a=n(kn(e)%60);return`${s}:${o}:${a}`}else if(l==="YYYY-MM-DD HH:MM:SS"){const s=new Date(e*1e3);return[s.getFullYear(),n(s.getMonth()+1),n(s.getDate())].join("-")+" "+[n(s.getHours()),n(s.getMinutes()),n(s.getSeconds())].join(":")}return r(e)}fromUnitString(e,t){if(t==="repetitions")return Number.isNaN(Number(e))?void 0:Number(e);const n=this.constraintUnit(t);let r;if(["seconds","unix time","minutes","hours"].includes(n)){const l=Number(e);n==="seconds"||n==="unix time"?r=l:n==="minutes"?r=l*60:n==="hours"&&(r=l*3600)}else if(n==="HH:MM:SS"){let l=e.split(":"),s=0,o=1;for(;l.length>0;){let a=Number(l.pop());s+=a*o,o*=60}r=s}else n==="YYYY-MM-DD HH:MM:SS"&&(r=Date.parse(e)/1e3);return r===void 0||Number.isNaN(r)?void 0:r}constraintUnit(e){return e==="start"||e==="end"?this.unit:this.durationUnit}isUnitNumeric(e){if(e==="repetitions")return!0;const t=this.constraintUnit(e);return["seconds","minutes","hours","unix time"].includes(t)}}class Pe extends tn{constructor(t,n,r,l=[],s=!1,o=0,a=10,u=75,c=150,f,d){super(t,n,r,f,d);z(this,"layers");z(this,"isAbsolute");z(this,"offset");z(this,"scale");z(this,"scroll");z(this,"layerHeight");this.layers=l,this.isAbsolute=s,this.offset=o,this.scale=a,this.scroll=u,this.layerHeight=c}toJSON(){return{...this.manageableJSON(),layers:this.layers,isAbsolute:this.isAbsolute,offset:this.offset,scale:this.scale,scroll:this.scroll,layerHeight:this.layerHeight}}static fromJSON(t,n){return new Pe(n.sequenceManager,t.name,t.description,t.layers.map(r=>Jt.fromJSON(r,n)),t.isAbsolute,t.offset,t.scale,t.scroll,t.layerHeight,t.id,t.hue)}add(){this.manager.add(this)}validate(){let t,n;for(const r of this.layers){const{error:l,childError:s,start:o,end:a}=r.validate();if(l!=0)return{error:1,childError:l};(t===void 0||o!==void 0&&t!==void 0&&o<t)&&(t=o),(n===void 0||a!==void 0&&n!==void 0&&a>n)&&(n=a)}return{error:0,start:t,end:n}}getDuration(t){const n=this.validate();let r;return n.start===void 0||n.end===void 0?r=void 0:r=t?n.end:n.end-n.start,r}getChildIds(){let t=[];for(const n of this.layers)for(const r of n.children)r.child instanceof Pe&&t.push(r.child.id);return t}getManageableChild(){return this}render(){const t=new Ft;for(const n of this.layers)t.add(n.render()),t.baseLayer=t.maxLayer+1;return t}}var Ce=(i=>(i.Coincide="Coincide",i.Override="Override",i))(Ce||{}),or=(i=>(i[i.None=0]="None",i[i.Empty=1]="Empty",i[i.ChildError=2]="ChildError",i[i.ChildOverlap=3]="ChildOverlap",i))(or||{});class ht extends jr{constructor(t,n,r,l){super(t,n);z(this,"layerMode");z(this,"customName");this.layerMode=r,this.customName=l}toJSON(){return{...this.repeatJSON(),layerMode:Ce[this.layerMode],customName:this.customName}}static fromJSON(t,n){let r;if(t.child.type==="Action")r=tt.fromJSON(t.child.json,n);else if(t.child.type==="Sequence")r=n.sequenceManager.children.get(t.child.id);else throw new Error("Unexpected value for 'child.type' when deserializing Component.");return new ht(r,Ot.fromJSON(t.props,n),Ce[t.layerMode],t.customName)}render(){const t=new Ft,n=this.validate(),r=this.child.getDuration(this.props.keepLeading);if(n.error!==We.None||n.solved===void 0||r===void 0)return t;this.layerMode==="Override"&&(t.addChild(n.solved.start,n.solved.end,t.baseLayer,null),t.baseLayer++);let l=n.solved.interval;this.props.includeChildDuration||(l+=r);const s=this.child.render();let o=0;this.child instanceof Pe&&!this.props.keepLeading&&(o=this.child.validate().start??0);for(let a=n.solved.start;a<n.solved.end;a+=l)t.add(s,a-o);return t}}class Jt{constructor(e=[]){z(this,"children");this.children=new Set(e)}toJSON(){return{children:[...this.children]}}static fromJSON(e,t){return new Jt(e.children.map(n=>ht.fromJSON(n,t)))}validate(e){if(this.children.size===0||this.children.size===1&&this.children.values().next().value===e)return{error:1};const t=[];for(const r of this.children){if(r===e)continue;const{error:l,solved:s}=r.validate();if(l!==We.None||s===void 0)return{error:2,childError:l};t.push([s.start,s.end])}t.sort((r,l)=>r[0]===void 0?-1:l[0]===void 0?1:r[0]-l[0]);let n;for(const[r,[l,s]]of t.entries()){if(r!=0&&(l===void 0||n===void 0||l<n))return{error:3};n=s}return{error:0,start:t[0][0],end:n,childBounds:t}}getDuration(){const e=this.validate();let t;return e.start===void 0||e.end===void 0?t=void 0:t=e.end,[e.error,t]}render(){const e=new Ft;for(const t of this.children)e.add(t.render());return e}}class nn{constructor(e,t="",n=new Ve,r=new Ve){z(this,"name");z(this,"description");z(this,"parameterManager");z(this,"actionManager");this.name=e,this.description=t,this.parameterManager=n,this.actionManager=r}toJSON(){return{name:this.name,description:this.description,parameterManager:this.parameterManager,actionManager:this.actionManager,schemaVersion:0}}static fromJSON(e,t){return new nn(e.name,e.description,Ve.fromJSON(e.parameterManager,t,xe.fromJSON,t.parameterManager),Ve.fromJSON(e.actionManager,t,De.fromJSON,t.actionManager))}}function ar(i=new Ve,e=new Ve){const t=new nn("ESP32","",i,e),n=new kt(t.parameterManager,"IP address","Camera IP address","192.168.4.7",7,15,void 0,void 0,"ip"),r=new _t(t.parameterManager,"Protocol","Method used to connect to camera","CCAPI",["CCAPI","PTP/IP"],void 0,void 0,"method");new De(t.actionManager,"Connect camera","Connect to a Canon camera over WiFi",{defaultDuration:5,durationParams:[]},[n,r],[[n,""],[r,""]],"connect",130);const l=new Ge(t.parameterManager,"Bulb exposure","",30,1,void 0,void 0,"seconds",void 0,void 0,"bulb"),s=["1/4000","1/3200","1/2500","1/2000","1/1600","1/1250","1/1000","1/800","1/640","1/500","1/400","1/320","1/250","1/200","1/160","1/125","1/100","1/80","1/60","1/50","1/40","1/30","1/25","1/20","1/15","1/13","1/10","1/8","1/6","1/5","1/4",'0"3','0"4','0"5','0"6','0"8','1"','1"3','1"6','2"','2"5','3"2','4"','5"','6"','8"','10"','13"','15"','20"','25"','30"',"bulb"];function o(q){if(q==="bulb")return-1;let C=parseInt(q),I=q.indexOf('"');return I===-1?(I=q.indexOf("/"),I!==-1&&(C/=parseInt(q.slice(I+1)))):I<q.length-1&&(C+=parseInt(q.slice(I+1))/10),C}const a=new Map(s.map(q=>[o(q),[]]));a.set(-1,[l]);const u=new Ie(t.parameterManager,"Shutter speed","",.008,a,new Map(s.map(q=>[o(q),q])),new Map(s.map(q=>[o(q),q])),"tv"),c=new _t(t.parameterManager,"ISO","","400",["auto","100","125","160","200","250","320","400","500","640","800","1000","1250","1600","2000","2500","3200","4000","5000","6400","8000","10000","12800","16000","20000","25600"],void 0,void 0,"iso"),f=new _t(t.parameterManager,"Aperture","","f8.0",["f3.5","f4.0","f4.5","f5.0","f5.6","f6.3","f7.1","f8.0","f9.0","f10","f11","f13","f14","f16","f18","f20","f22"],void 0,void 0,"av"),d=["-3.0","-2_2/3","-2_1/3","-2.0","-1_2/3","-1_1/3","-1.0","-0_2/3","-0_1/3","+0.0","+0_1/3","+0_2/3","+1.0","+1_1/3","+1_2/3","+2.0","+2_1/3","+2_2/3","+3.0"],m=new _t(t.parameterManager,"Exposure compensation","","+0.0",d,new Map(d.map(q=>[q,q.replace("_"," ").replace(".0","").replace("0 ","")])),void 0,"ev"),p=new Ie(t.parameterManager,"Shooting mode","","Aperture priority (Av)",new Map(Object.entries({"Manual (M)":[c,f,u],"Aperture priority (Av)":[c,f,m],"Shutter priority (Tv)":[c,u,m],"Program (P)":[c,m],Auto:[]})),void 0,new Map([["Manual (M)","m"],["Aperture priority (Av)","av"],["Shutter priority (Tv)","tv"],["Program (P)","p"],["Auto","auto"]]),"mode");new De(t.actionManager,"Photo","Trigger shutter with given settings",{defaultDuration:1,durationParams:[{param:u,paramOffset:1.5},{param:l,paramOffset:3}]},[n,p],[[n,""],[c],[f,"Av"],[u,"Tv"],[m,"EV"]],"photo",220),new De(t.actionManager,"Exposure settings","Change exposure settings without taking a photo.",{defaultDuration:.5,durationParams:[]},[n,p],[[n,""],[c],[f,"Av"],[u,"Tv"],[m,"EV"]],"exposure",220);const h=new Ge(t.parameterManager,"Duration","",10,0,void 0,void 0,"seconds",void 0,void 0,"duration");new De(t.actionManager,"Video","Record video for the given duration.",{defaultDuration:0,durationParams:[{param:h}]},[n,h],[[n,""],[h,""]],"video",263);const _=new _t(t.parameterManager,"Action","","on",["on","off"],void 0,void 0,"action");new De(t.actionManager,"Display On/Off","",{defaultDuration:.5,durationParams:[]},[n,_],[[n,""],[_]],"displayOnOff",80);const S=new Ge(t.parameterManager,"GPIO pin","",13,1,40,1,void 0,void 0,void 0,"servoPin"),M=new Ge(t.parameterManager,"Angle","",0,0,180,1,"degrees",void 0,void 0,"servoAngle"),N=new Ge(t.parameterManager,"Speed","",60,5,450,1,"deg/sec",void 0,void 0,"servoSpeed");new De(t.actionManager,"Attach Servo","",{defaultDuration:3,durationParams:[]},[S,M],[[S,"Pin"],[M,"Angle","%d°"]],"servoAttach",15),new De(t.actionManager,"Move Servo","",{defaultDuration:3,durationParams:[]},[S,M,N],[[S,"Pin"],[M,void 0,"%d°"],[N,void 0,"%d°/s"]],"servoMove",30);const T=new kt(t.parameterManager,"CSV data file","","/bme280.csv",5,void 0,void 0,void 0,"bmeFile");new De(t.actionManager,"Record BME280 Data","",{defaultDuration:.5,durationParams:[]},[T],[[T,""]],"bmeRecord",300);const b=new kt(t.parameterManager,"CSV data file","","/gps.csv",5,void 0,void 0,void 0,"gpsFile");new De(t.actionManager,"Record GPS Data","",{defaultDuration:.5,durationParams:[]},[b],[[b,""]],"gpsRecord",190);const J=new Ge(t.parameterManager,"GPIO pin","",4,1,40,1,void 0,void 0,void 0,"shutterPin"),Y=new Ie(t.parameterManager,"Method","","cable",new Map([["cable",[J]],["WiFi",[n]]]),void 0,void 0,"shutterMethod");return new De(t.actionManager,"Shutter release","",{defaultDuration:1,durationParams:[{param:h}]},[Y,h],[[J,"Pin"],[n,""],[h,""]],"shutterRelease",160),t}const bt="persistence";class Xr{constructor(e){z(this,"dbName");z(this,"db");this.dbName=e;const t=indexedDB.open(this.dbName);this.db=new Promise((n,r)=>{t.onupgradeneeded=()=>{const l=t.result;l.createObjectStore(bt),n(l)},t.onsuccess=()=>{n(t.result)}})}async initAutosave(e,t,n=l=>l,r=l=>l){const l=await this.get(t);l!==void 0&&e.set(r(l));let s=0;e.subscribe(o=>{s++;const a=s;setTimeout(()=>{s===a&&this.set(t,n(o))},1e3)})}async set(e,t){(await this.db).transaction(bt,"readwrite").objectStore(bt).put(t,e)}async get(e){const n=(await this.db).transaction(bt,"readonly").objectStore(bt).get(e);return new Promise((r,l)=>{n.onsuccess=()=>{r(n.result)}})}}class mt{constructor(e,t="",n,r=new Ve,l){z(this,"name");z(this,"description");z(this,"actionSet");z(this,"sequenceManager");z(this,"openedSequence");this.name=e,this.description=t,this.actionSet=n,this.sequenceManager=r,this.openedSequence=l}toJSON(){var e;return{name:this.name,description:this.description,actionSet:this.actionSet,sequenceManager:this.sequenceManager,openedSequence:(e=this.openedSequence)==null?void 0:e.id,schemaVersion:0}}static fromJSON(e){const t={actionManager:new Ve,parameterManager:new Ve,sequenceManager:new Ve};return new mt(e.name,e.description,ar(t.parameterManager,t.actionManager),Ve.fromJSON(e.sequenceManager,t,Pe.fromJSON,t.sequenceManager),t.sequenceManager.children.get(e.openedSequence))}}const fe=yt(new mt("New project","",ar())),vt=yt(),rn=new Xr("sequent");rn.initAutosave(fe,"project",i=>sr(i),i=>mt.fromJSON(i));rn.initAutosave(vt,"fileHandle");Wr(rn);const Le=yt(0),pt=yt(new Map);function Kr(i,e={enabled:!0}){let{enabled:t,eventType:n,nodeForEvent:r,options:l,capture:s}=Sn(e);function o(a){a.target&&i&&!i.contains(a.target)&&!a.defaultPrevented&&i.dispatchEvent(new CustomEvent("clickoutside",{detail:a}))}return e.enabled!==!1&&r.addEventListener(n,o,l),{update(a){r.removeEventListener(n,o,s),{enabled:t,eventType:n,nodeForEvent:r,options:l,capture:s}=Sn(a),t&&r.addEventListener(n,o,l)},destroy(){r.removeEventListener(n,o,s)}}}function Sn(i={}){var e,t;return{enabled:i.enabled??!0,nodeForEvent:((e=i.limit)==null?void 0:e.parent)??document,eventType:i.event??"click",options:i.options,capture:typeof i.options=="object"?(t=i.options)==null?void 0:t.capture:i.options}}const Gr=i=>({}),Mn=i=>({toggleDropdown:i[4]}),Qr=i=>({}),yn=i=>({toggleDropdown:i[4]});function On(i){let e,t,n,r;const l=i[7].buttons,s=Ue(l,i,i[6],Mn);return{c(){e=O("div"),t=O("div"),s&&s.c(),g(t,"class","options-menu svelte-azbhie"),L(t,"width",i[2]?"100%":void 0),L(t,"background-color",i[3]?"var(--gray-85)":"var(--gray-90)"),g(e,"class","menu-container svelte-azbhie"),L(e,"top",i[1]==="top"?"0.5rem":"100%"),L(e,"width",i[2]?"100%":void 0)},m(o,a){k(o,e,a),D(e,t),s&&s.m(t,null),r=!0},p(o,a){s&&s.p&&(!r||a&64)&&Ye(s,l,o,o[6],r?He(l,o[6],a,Gr):ze(o[6]),Mn),a&4&&L(t,"width",o[2]?"100%":void 0),a&8&&L(t,"background-color",o[3]?"var(--gray-85)":"var(--gray-90)"),a&2&&L(e,"top",o[1]==="top"?"0.5rem":"100%"),a&4&&L(e,"width",o[2]?"100%":void 0)},i(o){r||(v(s,o),o&&be(()=>{r&&(n||(n=et(e,qe,{duration:100},!0)),n.run(1))}),r=!0)},o(o){y(s,o),o&&(n||(n=et(e,qe,{duration:100},!1)),n.run(0)),r=!1},d(o){o&&w(e),s&&s.d(o),o&&n&&n.end()}}}function Zr(i){let e,t,n,r,l,s;const o=i[7].button,a=Ue(o,i,i[6],yn);let u=i[0]&&On(i);const c=i[7].default,f=Ue(c,i,i[6],null);return{c(){e=O("div"),a&&a.c(),t=H(),u&&u.c(),n=H(),f&&f.c(),g(e,"class","options-container svelte-azbhie"),L(e,"flex",i[2]?"1":void 0)},m(d,m){k(d,e,m),a&&a.m(e,null),D(e,t),u&&u.m(e,null),D(e,n),f&&f.m(e,null),r=!0,l||(s=[Qi(Kr.call(null,e)),K(e,"clickoutside",i[8])],l=!0)},p(d,[m]){a&&a.p&&(!r||m&64)&&Ye(a,o,d,d[6],r?He(o,d[6],m,Qr):ze(d[6]),yn),d[0]?u?(u.p(d,m),m&1&&v(u,1)):(u=On(d),u.c(),v(u,1),u.m(e,n)):u&&($(),y(u,1,1,()=>{u=null}),x()),f&&f.p&&(!r||m&64)&&Ye(f,c,d,d[6],r?He(c,d[6],m,null):ze(d[6]),null),m&4&&L(e,"flex",d[2]?"1":void 0)},i(d){r||(v(a,d),v(u),v(f,d),r=!0)},o(d){y(a,d),y(u),y(f,d),r=!1},d(d){d&&w(e),a&&a.d(d),u&&u.d(),f&&f.d(d),l=!1,ve(s)}}}function $r(i,e,t){let{$$slots:n={},$$scope:r}=e,{closeCondition:l=!1}=e,{align:s="bottom"}=e,{showOptions:o=!1}=e,{fullWidth:a=!1}=e,{lighter:u=!1}=e;const c=()=>t(0,o=!o),f=()=>t(0,o=!1);return i.$$set=d=>{"closeCondition"in d&&t(5,l=d.closeCondition),"align"in d&&t(1,s=d.align),"showOptions"in d&&t(0,o=d.showOptions),"fullWidth"in d&&t(2,a=d.fullWidth),"lighter"in d&&t(3,u=d.lighter),"$$scope"in d&&t(6,r=d.$$scope)},i.$$.update=()=>{i.$$.dirty&33&&t(0,o=!l&&o)},[o,s,a,u,c,l,r,n,f]}class ln extends le{constructor(e){super(),re(this,e,$r,Zr,ie,{closeCondition:5,align:1,showOptions:0,fullWidth:2,lighter:3})}}function xr(i){let e,t,n,r,l;const s=i[2].default,o=Ue(s,i,i[1],null);return{c(){e=O("div"),o&&o.c(),e.hidden=!0},m(a,u){k(a,e,u),o&&o.m(e,null),n=!0,r||(l=Qi(t=el.call(null,e,i[0])),r=!0)},p(a,[u]){o&&o.p&&(!n||u&2)&&Ye(o,s,a,a[1],n?He(s,a[1],u,null):ze(a[1]),null),t&&Xe(t.update)&&u&1&&t.update.call(null,a[0])},i(a){n||(v(o,a),n=!0)},o(a){y(o,a),n=!1},d(a){a&&w(e),o&&o.d(a),r=!1,l()}}}function el(i,e="body"){let t;async function n(l){if(e=l,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await Ar(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);t.appendChild(i),i.hidden=!1}function r(){i.parentNode&&i.parentNode.removeChild(i)}return n(e),{update:n,destroy:r}}function tl(i,e,t){let{$$slots:n={},$$scope:r}=e,{target:l="body"}=e;return i.$$set=s=>{"target"in s&&t(0,l=s.target),"$$scope"in s&&t(1,r=s.$$scope)},[l,r,n]}class sn extends le{constructor(e){super(),re(this,e,tl,xr,ie,{target:0})}}const nl=i=>({}),Dn=i=>({close:i[4],submit:i[5]});function Nn(i){let e,t;return e=new sn({props:{target:"body",$$slots:{default:[rl]},$$scope:{ctx:i}}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},p(n,r){const l={};r&526&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function qn(i){let e,t;const n=i[8].actions,r=Ue(n,i,i[9],Dn),l=r||il(i);return{c(){e=O("div"),l&&l.c(),g(e,"class","actions svelte-13dsmma")},m(s,o){k(s,e,o),l&&l.m(e,null),t=!0},p(s,o){r?r.p&&(!t||o&512)&&Ye(r,n,s,s[9],t?He(n,s[9],o,nl):ze(s[9]),Dn):l&&l.p&&(!t||o&4)&&l.p(s,t?o:-1)},i(s){t||(v(l,s),t=!0)},o(s){y(l,s),t=!1},d(s){s&&w(e),l&&l.d(s)}}}function il(i){let e,t,n,r,l,s,o;return{c(){e=O("button"),e.textContent="Cancel",t=H(),n=O("button"),r=te("OK"),g(e,"class","inverse"),n.disabled=l=!i[2],g(n,"class","inverse")},m(a,u){k(a,e,u),k(a,t,u),k(a,n,u),D(n,r),s||(o=[K(e,"click",i[4]),K(n,"click",i[5])],s=!0)},p(a,u){u&4&&l!==(l=!a[2])&&(n.disabled=l)},d(a){a&&(w(e),w(t),w(n)),s=!1,ve(o)}}}function rl(i){let e,t,n,r,l,s,o,a,u,c,f,d,m,p,h,_;const S=i[8].default,M=Ue(S,i,i[9],null);let N=i[3]&&qn(i);return{c(){e=O("div"),r=H(),l=O("div"),s=O("div"),o=O("h2"),a=te(i[1]),u=H(),c=O("div"),M&&M.c(),f=H(),N&&N.c(),g(e,"class","backdrop svelte-13dsmma"),g(o,"class","svelte-13dsmma"),g(c,"class","contents svelte-13dsmma"),g(s,"class","modal svelte-13dsmma"),g(l,"role","dialog"),g(l,"class","container svelte-13dsmma")},m(T,b){k(T,e,b),k(T,r,b),k(T,l,b),D(l,s),D(s,o),D(o,a),D(s,u),D(s,c),M&&M.m(c,null),D(s,f),N&&N.m(s,null),p=!0,h||(_=K(e,"click",i[4]),h=!0)},p(T,b){(!p||b&2)&&Ae(a,T[1]),M&&M.p&&(!p||b&512)&&Ye(M,S,T,T[9],p?He(S,T[9],b,null):ze(T[9]),null),T[3]?N?(N.p(T,b),b&8&&v(N,1)):(N=qn(T),N.c(),v(N,1),N.m(s,null)):N&&($(),y(N,1,1,()=>{N=null}),x())},i(T){p||(T&&be(()=>{p&&(n&&n.end(1),t=Pt(e,qe,{duration:200}),t.start())}),v(M,T),v(N),T&&be(()=>{p&&(m&&m.end(1),d=Pt(l,qe,{duration:200}),d.start())}),p=!0)},o(T){t&&t.invalidate(),T&&(n=Lt(e,qe,{duration:100})),y(M,T),y(N),d&&d.invalidate(),T&&(m=Lt(l,qe,{duration:100})),p=!1},d(T){T&&(w(e),w(r),w(l)),T&&n&&n.end(),M&&M.d(T),N&&N.d(),T&&m&&m.end(),h=!1,_()}}}function ll(i){let e,t,n=i[0]&&Nn(i);return{c(){n&&n.c(),e=Z()},m(r,l){n&&n.m(r,l),k(r,e,l),t=!0},p(r,[l]){r[0]?n?(n.p(r,l),l&1&&v(n,1)):(n=Nn(r),n.c(),v(n,1),n.m(e.parentNode,e)):n&&($(),y(n,1,1,()=>{n=null}),x())},i(r){t||(v(n),t=!0)},o(r){y(n),t=!1},d(r){r&&w(e),n&&n.d(r)}}}function sl(i,e,t){let{$$slots:n={},$$scope:r}=e,{isOpen:l}=e,{title:s}=e,{onClose:o=()=>{}}=e,{onSubmit:a=()=>{}}=e,{canSubmit:u=!0}=e,{showActions:c=!0}=e;function f(){t(0,l=!1),o()}function d(){t(0,l=!1),a()}return i.$$set=m=>{"isOpen"in m&&t(0,l=m.isOpen),"title"in m&&t(1,s=m.title),"onClose"in m&&t(6,o=m.onClose),"onSubmit"in m&&t(7,a=m.onSubmit),"canSubmit"in m&&t(2,u=m.canSubmit),"showActions"in m&&t(3,c=m.showActions),"$$scope"in m&&t(9,r=m.$$scope)},[l,s,u,c,f,d,o,a,n,r]}class on extends le{constructor(e){super(),re(this,e,sl,ll,ie,{isOpen:0,title:1,onClose:6,onSubmit:7,canSubmit:2,showActions:3})}}function Cn(i){let e,t;return e=new sn({props:{target:"body",$$slots:{default:[ol]},$$scope:{ctx:i}}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},p(n,r){const l={};r&2056&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function ol(i){let e,t,n;return{c(){e=O("div"),g(e,"class","dragArea svelte-1ydirag")},m(r,l){k(r,e,l),t||(n=[K(e,"mousemove",i[6]),K(e,"mouseup",i[10])],t=!0)},p:ne,d(r){r&&w(e),t=!1,ve(n)}}}function al(i){let e,t,n,r,l,s,o,a,u,c,f=i[3]&&Cn(i);return{c(){e=O("div"),t=O("button"),n=O("div"),s=H(),f&&f.c(),o=Z(),g(n,"class","thumb svelte-1ydirag"),be(()=>i[7].call(n)),L(n,"background-color",`hsl(${i[0]}deg var(--component-saturation) var(--component-lightness))`),L(n,"transform",`translateX(calc((${i[1]}px - 100%) * (${i[0]} / 360)))`),g(t,"class","track svelte-1ydirag"),be(()=>i[9].call(t)),g(e,"class","container svelte-1ydirag")},m(d,m){k(d,e,m),D(e,t),D(t,n),r=Ct(n,i[7].bind(n)),i[8](t),l=Ct(t,i[9].bind(t)),k(d,s,m),f&&f.m(d,m),k(d,o,m),a=!0,u||(c=K(t,"mousedown",i[5]),u=!0)},p(d,[m]){m&1&&L(n,"background-color",`hsl(${d[0]}deg var(--component-saturation) var(--component-lightness))`),m&3&&L(n,"transform",`translateX(calc((${d[1]}px - 100%) * (${d[0]} / 360)))`),d[3]?f?(f.p(d,m),m&8&&v(f,1)):(f=Cn(d),f.c(),v(f,1),f.m(o.parentNode,o)):f&&($(),y(f,1,1,()=>{f=null}),x())},i(d){a||(v(f),a=!0)},o(d){y(f),a=!1},d(d){d&&(w(e),w(s),w(o)),r(),i[8](null),l(),f&&f.d(d),u=!1,c()}}}function ul(i,e,t){let{hue:n}=e,r=0,l=0,s=!1,o;function a(p){t(3,s=!0),u(p)}function u(p){if(!s)return;const h=o.getBoundingClientRect().left;t(0,n=Math.floor(Math.max(0,Math.min(360,(p.clientX-h-l/2)/(r-l)*360))))}function c(){l=this.clientWidth,t(2,l)}function f(p){oe[p?"unshift":"push"](()=>{o=p,t(4,o)})}function d(){r=this.clientWidth,t(1,r)}const m=()=>t(3,s=!1);return i.$$set=p=>{"hue"in p&&t(0,n=p.hue)},[n,r,l,s,o,a,u,c,f,d,m]}class fl extends le{constructor(e){super(),re(this,e,ul,al,ie,{hue:0})}}function Tn(i){let e,t,n;return{c(){e=O("p"),e.textContent="Sequence name is required.",g(e,"class","error svelte-132hhpd")},m(r,l){k(r,e,l),n=!0},i(r){n||(r&&be(()=>{n&&(t||(t=et(e,dt,{duration:200},!0)),t.run(1))}),n=!0)},o(r){r&&(t||(t=et(e,dt,{duration:200},!1)),t.run(0)),n=!1},d(r){r&&w(e),r&&t&&t.end()}}}function In(i){let e,t,n,r,l;return{c(){e=O("label"),t=O("input"),n=te(`\r
      Use absolute time?`),g(t,"type","checkbox"),g(e,"class","horizontal")},m(s,o){k(s,e,o),D(e,t),t.checked=i[1].isAbsolute,D(e,n),r||(l=K(t,"change",i[13]),r=!0)},p(s,o){o&2&&(t.checked=s[1].isAbsolute)},d(s){s&&w(e),r=!1,l()}}}function cl(i){let e,t,n,r,l,s,o,a,u,c,f,d,m,p,h,_,S,M,N,T=i[7]&&Tn(),b=i[5]&&In(i);function J(q){i[14](q)}let Y={};return i[1].hue!==void 0&&(Y.hue=i[1].hue),h=new fl({props:Y}),oe.push(()=>_e(h,"hue",J)),{c(){e=O("div"),t=O("label"),n=te(`Name:\r
      `),r=O("input"),l=H(),T&&T.c(),s=H(),o=O("label"),a=te(`Description:\r
    `),u=O("textarea"),c=H(),b&&b.c(),f=H(),d=O("div"),m=O("div"),m.textContent="Color:",p=H(),j(h.$$.fragment),g(r,"type","text"),g(r,"placeholder","Sequence name"),r.required=!0,g(r,"class","svelte-132hhpd"),Ne(r,"error",i[7]),g(u,"rows","6"),g(u,"placeholder","Sequence description"),g(d,"class","color-input svelte-132hhpd")},m(q,C){k(q,e,C),D(e,t),D(t,n),D(t,r),i[8](r),Dt(r,i[1].name),D(e,l),T&&T.m(e,null),k(q,s,C),k(q,o,C),D(o,a),D(o,u),Dt(u,i[1].description),k(q,c,C),b&&b.m(q,C),k(q,f,C),k(q,d,C),D(d,m),D(d,p),V(h,d,null),S=!0,M||(N=[K(r,"input",i[9]),K(r,"blur",i[10]),K(r,"input",i[11]),K(u,"input",i[12])],M=!0)},p(q,C){C&2&&r.value!==q[1].name&&Dt(r,q[1].name),(!S||C&128)&&Ne(r,"error",q[7]),q[7]?T?C&128&&v(T,1):(T=Tn(),T.c(),v(T,1),T.m(e,null)):T&&($(),y(T,1,1,()=>{T=null}),x()),C&2&&Dt(u,q[1].description),q[5]?b?b.p(q,C):(b=In(q),b.c(),b.m(f.parentNode,f)):b&&(b.d(1),b=null);const I={};!_&&C&2&&(_=!0,I.hue=q[1].hue,ge(()=>_=!1)),h.$set(I)},i(q){S||(v(T),v(h.$$.fragment,q),S=!0)},o(q){y(T),y(h.$$.fragment,q),S=!1},d(q){q&&(w(e),w(s),w(o),w(c),w(f),w(d)),i[8](null),T&&T.d(),b&&b.d(q),B(h),M=!1,ve(N)}}}function dl(i){let e,t,n;function r(s){i[15](s)}let l={title:i[2],onSubmit:i[3],onClose:i[4],canSubmit:i[1].name!=="",$$slots:{default:[cl]},$$scope:{ctx:i}};return i[0]!==void 0&&(l.isOpen=i[0]),e=new on({props:l}),oe.push(()=>_e(e,"isOpen",r)),{c(){j(e.$$.fragment)},m(s,o){V(e,s,o),n=!0},p(s,[o]){const a={};o&4&&(a.title=s[2]),o&8&&(a.onSubmit=s[3]),o&16&&(a.onClose=s[4]),o&2&&(a.canSubmit=s[1].name!==""),o&65762&&(a.$$scope={dirty:o,ctx:s}),!t&&o&1&&(t=!0,a.isOpen=s[0],ge(()=>t=!1)),e.$set(a)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){B(e,s)}}}function hl(i,e,t){let{isOpen:n}=e,{title:r}=e,{data:l}=e,{onSubmit:s=()=>{}}=e,{onClose:o=()=>{}}=e,{isNew:a=!1}=e,u=!1,c;function f(N){oe[N?"unshift":"push"](()=>{c=N,t(6,c)})}function d(){l.name=this.value,t(1,l)}const m=()=>{t(1,l.name=l.name.trim(),l),t(7,u=l.name==="")},p=()=>t(7,u=l.name===""&&u);function h(){l.description=this.value,t(1,l)}function _(){l.isAbsolute=this.checked,t(1,l)}function S(N){i.$$.not_equal(l.hue,N)&&(l.hue=N,t(1,l))}function M(N){n=N,t(0,n)}return i.$$set=N=>{"isOpen"in N&&t(0,n=N.isOpen),"title"in N&&t(2,r=N.title),"data"in N&&t(1,l=N.data),"onSubmit"in N&&t(3,s=N.onSubmit),"onClose"in N&&t(4,o=N.onClose),"isNew"in N&&t(5,a=N.isNew)},i.$$.update=()=>{i.$$.dirty&1&&t(7,u=!n),i.$$.dirty&65&&c&&n&&c.focus()},[n,l,r,s,o,a,c,u,f,d,m,p,h,_,S,M]}class ur extends le{constructor(e){super(),re(this,e,hl,dl,ie,{isOpen:0,title:2,data:1,onSubmit:3,onClose:4,isNew:5})}}function En(i){let e;return{c(){e=O("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>',g(e,"class","clock-icon-container svelte-177igwe")},m(t,n){k(t,e,n)},d(t){t&&w(e)}}}function ml(i){let e,t,n;return{c(){e=O("button"),e.innerHTML='<div class="options-icon-container svelte-177igwe"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg></div>',g(e,"slot","button"),g(e,"title","Sequence options"),g(e,"class","chip-button options svelte-177igwe")},m(r,l){k(r,e,l),t||(n=K(e,"click",function(){Xe(i[15])&&i[15].apply(this,arguments)}),t=!0)},p(r,l){i=r},d(r){r&&w(e),t=!1,n()}}}function pl(i){let e,t,n,r,l;return{c(){e=O("button"),e.textContent="Edit",t=H(),n=O("button"),n.textContent="Delete"},m(s,o){k(s,e,o),k(s,t,o),k(s,n,o),r||(l=[K(e,"click",i[7]),K(n,"click",i[9])],r=!0)},p:ne,d(s){s&&(w(e),w(t),w(n)),r=!1,ve(l)}}}function gl(i){let e,t,n=i[0].name+"",r,l;return{c(){e=O("p"),t=te('Delete the sequence named "'),r=te(n),l=te('"?')},m(s,o){k(s,e,o),D(e,t),D(e,r),D(e,l)},p(s,o){o&1&&n!==(n=s[0].name+"")&&Ae(r,n)},d(s){s&&w(e)}}}function _l(i){let e,t,n,r,l=i[0].name+"",s,o,a,u,c,f,d,m,p,h,_,S,M,N,T,b=i[0].isAbsolute&&En();u=new ln({props:{closeCondition:i[1]||i[2],align:"top",$$slots:{buttons:[pl],button:[ml,({toggleDropdown:U})=>({15:U}),({toggleDropdown:U})=>U?32768:0]},$$scope:{ctx:i}}});function J(U){i[10](U)}let Y={title:"Delete sequence",onSubmit:i[6],$$slots:{default:[gl]},$$scope:{ctx:i}};i[1]!==void 0&&(Y.isOpen=i[1]),f=new on({props:Y}),oe.push(()=>_e(f,"isOpen",J));function q(U){i[11](U)}function C(U){i[12](U)}let I={title:"Edit sequence",onSubmit:i[8]};return i[2]!==void 0&&(I.isOpen=i[2]),i[3]!==void 0&&(I.data=i[3]),p=new ur({props:I}),oe.push(()=>_e(p,"isOpen",q)),oe.push(()=>_e(p,"data",C)),{c(){e=O("div"),t=O("button"),b&&b.c(),n=H(),r=O("div"),s=te(l),a=H(),j(u.$$.fragment),c=H(),j(f.$$.fragment),m=H(),j(p.$$.fragment),g(t,"title",o="Open "+i[0].name+" sequence"),g(t,"class","chip-button open svelte-177igwe"),g(e,"class","outer svelte-177igwe"),Ne(e,"opened",i[4].openedSequence===i[0])},m(U,P){k(U,e,P),D(e,t),b&&b.m(t,null),D(t,n),D(t,r),D(r,s),D(e,a),V(u,e,null),D(e,c),V(f,e,null),D(e,m),V(p,e,null),M=!0,N||(T=K(t,"click",i[5]),N=!0)},p(U,[P]){U[0].isAbsolute?b||(b=En(),b.c(),b.m(t,n)):b&&(b.d(1),b=null),(!M||P&1)&&l!==(l=U[0].name+"")&&Ae(s,l),(!M||P&1&&o!==(o="Open "+U[0].name+" sequence"))&&g(t,"title",o);const W={};P&6&&(W.closeCondition=U[1]||U[2]),P&98306&&(W.$$scope={dirty:P,ctx:U}),u.$set(W);const G={};P&65537&&(G.$$scope={dirty:P,ctx:U}),!d&&P&2&&(d=!0,G.isOpen=U[1],ge(()=>d=!1)),f.$set(G);const ae={};!h&&P&4&&(h=!0,ae.isOpen=U[2],ge(()=>h=!1)),!_&&P&8&&(_=!0,ae.data=U[3],ge(()=>_=!1)),p.$set(ae),(!M||P&17)&&Ne(e,"opened",U[4].openedSequence===U[0])},i(U){M||(v(u.$$.fragment,U),v(f.$$.fragment,U),v(p.$$.fragment,U),U&&be(()=>{M&&(S||(S=et(e,dt,{duration:200,axis:"x"},!0)),S.run(1))}),M=!0)},o(U){y(u.$$.fragment,U),y(f.$$.fragment,U),y(p.$$.fragment,U),U&&(S||(S=et(e,dt,{duration:200,axis:"x"},!1)),S.run(0)),M=!1},d(U){U&&w(e),b&&b.d(),B(u),B(f),B(p),U&&S&&S.end(),N=!1,T()}}}function bl(i,e,t){let n,r;de(i,Le,M=>t(13,n=M)),de(i,fe,M=>t(4,r=M));let{sequence:l}=e,s=!1,o=!1,a=f();function u(){ke(fe,r.openedSequence=l,r)}function c(){l.manager.children.delete(l.id),fe.set(r),r.openedSequence===l&&(r.sequenceManager.children.size>0?ke(fe,r.openedSequence=r.sequenceManager.children.values().next().value,r):ke(fe,r.openedSequence=void 0,r))}function f(){return{name:l.name??"",description:l.description??"",hue:l.hue}}function d(){t(3,a=f()),t(2,o=!0)}function m(){t(0,l.name=a.name,l),t(0,l.description=a.description,l),t(0,l.hue=a.hue,l),fe.set(r),ke(Le,n++,n)}const p=()=>t(1,s=!0);function h(M){s=M,t(1,s)}function _(M){o=M,t(2,o)}function S(M){a=M,t(3,a)}return i.$$set=M=>{"sequence"in M&&t(0,l=M.sequence)},[l,s,o,a,r,u,c,d,m,p,h,_,S]}class vl extends le{constructor(e){super(),re(this,e,bl,_l,ie,{sequence:0})}}function An(i,e,t){const n=i.slice();return n[8]=e[t],n}function Pn(i,e){let t,n,r;return n=new vl({props:{sequence:e[8]}}),{key:i,first:null,c(){t=Z(),j(n.$$.fragment),this.first=t},m(l,s){k(l,t,s),V(n,l,s),r=!0},p(l,s){e=l;const o={};s&4&&(o.sequence=e[8]),n.$set(o)},i(l){r||(v(n.$$.fragment,l),r=!0)},o(l){y(n.$$.fragment,l),r=!1},d(l){l&&w(t),B(n,l)}}}function wl(i){let e,t,n;return{c(){e=Te("svg"),t=Te("line"),n=Te("line"),g(t,"x1","12"),g(t,"y1","5"),g(t,"x2","12"),g(t,"y2","19"),g(n,"x1","5"),g(n,"y1","12"),g(n,"x2","19"),g(n,"y2","12"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","24"),g(e,"height","24"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"stroke","currentColor"),g(e,"stroke-width","2"),g(e,"stroke-linecap","round"),g(e,"stroke-linejoin","round")},m(r,l){k(r,e,l),D(e,t),D(e,n)},d(r){r&&w(e)}}}function kl(i){let e;return{c(){e=te("+ New sequence")},m(t,n){k(t,e,n)},d(t){t&&w(e)}}}function Sl(i){let e,t=[],n=new Map,r,l,s,o,a,u,c,f,d,m=Q(i[2].sequenceManager.children.values());const p=b=>b[8].id;for(let b=0;b<m.length;b+=1){let J=An(i,m,b),Y=p(J);n.set(Y,t[b]=Pn(Y,J))}function h(b,J){return b[2].sequenceManager.children.size===0?kl:wl}let _=h(i),S=_(i);function M(b){i[6](b)}function N(b){i[7](b)}let T={title:"New sequence",onSubmit:i[3],isNew:!0};return i[0]!==void 0&&(T.isOpen=i[0]),i[1]!==void 0&&(T.data=i[1]),o=new ur({props:T}),oe.push(()=>_e(o,"isOpen",M)),oe.push(()=>_e(o,"data",N)),{c(){e=O("div");for(let b=0;b<t.length;b+=1)t[b].c();r=H(),l=O("button"),S.c(),s=H(),j(o.$$.fragment),g(l,"title","Add new sequence"),g(l,"class","svelte-9nldt2"),L(l,"font-size",i[2].sequenceManager.children.size>0?"1.6rem":"1.3rem"),g(e,"class","container svelte-9nldt2")},m(b,J){k(b,e,J);for(let Y=0;Y<t.length;Y+=1)t[Y]&&t[Y].m(e,null);D(e,r),D(e,l),S.m(l,null),D(e,s),V(o,e,null),c=!0,f||(d=K(l,"click",i[4]),f=!0)},p(b,[J]){J&4&&(m=Q(b[2].sequenceManager.children.values()),$(),t=Qe(t,J,p,1,b,m,n,e,$e,Pn,r,An),x()),_!==(_=h(b))&&(S.d(1),S=_(b),S&&(S.c(),S.m(l,null))),J&4&&L(l,"font-size",b[2].sequenceManager.children.size>0?"1.6rem":"1.3rem");const Y={};!a&&J&1&&(a=!0,Y.isOpen=b[0],ge(()=>a=!1)),!u&&J&2&&(u=!0,Y.data=b[1],ge(()=>u=!1)),o.$set(Y)},i(b){if(!c){for(let J=0;J<m.length;J+=1)v(t[J]);v(o.$$.fragment,b),c=!0}},o(b){for(let J=0;J<t.length;J+=1)y(t[J]);y(o.$$.fragment,b),c=!1},d(b){b&&w(e);for(let J=0;J<t.length;J+=1)t[J].d();S.d(),B(o),f=!1,d()}}}function Ln(){return{name:"",description:"",isAbsolute:!1,hue:Math.floor(Math.random()*360)}}function Ml(i,e,t){let n;de(i,fe,f=>t(2,n=f));let{timelineWidth:r=0}=e,l=!1,s=Ln();function o(){const d=new Pe(n.sequenceManager,s.name,s.description,[],s.isAbsolute,(s.isAbsolute?new Date().getTime()/1e3:0)-.5*r/10,10,void 0,void 0,void 0,s.hue);fe.set(n),ke(fe,n.openedSequence=d,n)}function a(){t(1,s=Ln()),t(0,l=!0)}function u(f){l=f,t(0,l)}function c(f){s=f,t(1,s)}return i.$$set=f=>{"timelineWidth"in f&&t(5,r=f.timelineWidth)},[l,s,n,o,a,r,u,c]}class yl extends le{constructor(e){super(),re(this,e,Ml,Sl,ie,{timelineWidth:5})}}function Ol(i){let e,t;const n=i[6].default,r=Ue(n,i,i[5],null);return{c(){e=O("div"),r&&r.c(),g(e,"class","container svelte-nk9gmi"),L(e,"transform",`translateX(${i[1]}px)`),L(e,"width",`${i[0]}px`)},m(l,s){k(l,e,s),r&&r.m(e,null),t=!0},p(l,[s]){r&&r.p&&(!t||s&32)&&Ye(r,n,l,l[5],t?He(n,l[5],s,null):ze(l[5]),null),s&2&&L(e,"transform",`translateX(${l[1]}px)`),s&1&&L(e,"width",`${l[0]}px`)},i(l){t||(v(r,l),t=!0)},o(l){y(r,l),t=!1},d(l){l&&w(e),r&&r.d(l)}}}function Dl(i,e,t){let n,r,{$$slots:l={},$$scope:s}=e,{offset:o}=e,{duration:a}=e,{sequence:u}=e;return i.$$set=c=>{"offset"in c&&t(2,o=c.offset),"duration"in c&&t(3,a=c.duration),"sequence"in c&&t(4,u=c.sequence),"$$scope"in c&&t(5,s=c.$$scope)},i.$$.update=()=>{i.$$.dirty&20&&t(1,n=(o-u.offset)*u.scale),i.$$.dirty&24&&t(0,r=a*u.scale)},[r,n,o,a,u,s,l]}class an extends le{constructor(e){super(),re(this,e,Dl,Ol,ie,{offset:2,duration:3,sequence:4})}}var fr={};(function(i){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(o){return r(s(o),arguments)}function n(o,a){return t.apply(null,[o].concat(a||[]))}function r(o,a){var u=1,c=o.length,f,d="",m,p,h,_,S,M,N,T;for(m=0;m<c;m++)if(typeof o[m]=="string")d+=o[m];else if(typeof o[m]=="object"){if(h=o[m],h.keys)for(f=a[u],p=0;p<h.keys.length;p++){if(f==null)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',h.keys[p],h.keys[p-1]));f=f[h.keys[p]]}else h.param_no?f=a[h.param_no]:f=a[u++];if(e.not_type.test(h.type)&&e.not_primitive.test(h.type)&&f instanceof Function&&(f=f()),e.numeric_arg.test(h.type)&&typeof f!="number"&&isNaN(f))throw new TypeError(t("[sprintf] expecting number but found %T",f));switch(e.number.test(h.type)&&(N=f>=0),h.type){case"b":f=parseInt(f,10).toString(2);break;case"c":f=String.fromCharCode(parseInt(f,10));break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,h.width?parseInt(h.width):0);break;case"e":f=h.precision?parseFloat(f).toExponential(h.precision):parseFloat(f).toExponential();break;case"f":f=h.precision?parseFloat(f).toFixed(h.precision):parseFloat(f);break;case"g":f=h.precision?String(Number(f.toPrecision(h.precision))):parseFloat(f);break;case"o":f=(parseInt(f,10)>>>0).toString(8);break;case"s":f=String(f),f=h.precision?f.substring(0,h.precision):f;break;case"t":f=String(!!f),f=h.precision?f.substring(0,h.precision):f;break;case"T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=h.precision?f.substring(0,h.precision):f;break;case"u":f=parseInt(f,10)>>>0;break;case"v":f=f.valueOf(),f=h.precision?f.substring(0,h.precision):f;break;case"x":f=(parseInt(f,10)>>>0).toString(16);break;case"X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase();break}e.json.test(h.type)?d+=f:(e.number.test(h.type)&&(!N||h.sign)?(T=N?"+":"-",f=f.toString().replace(e.sign,"")):T="",S=h.pad_char?h.pad_char==="0"?"0":h.pad_char.charAt(1):" ",M=h.width-(T+f).length,_=h.width&&M>0?S.repeat(M):"",d+=h.align?T+f+_:S==="0"?T+_+f:_+T+f)}return d}var l=Object.create(null);function s(o){if(l[o])return l[o];for(var a=o,u,c=[],f=0;a;){if((u=e.text.exec(a))!==null)c.push(u[0]);else if((u=e.modulo.exec(a))!==null)c.push("%");else if((u=e.placeholder.exec(a))!==null){if(u[2]){f|=1;var d=[],m=u[2],p=[];if((p=e.key.exec(m))!==null)for(d.push(p[1]);(m=m.substring(p[0].length))!=="";)if((p=e.key_access.exec(m))!==null)d.push(p[1]);else if((p=e.index_access.exec(m))!==null)d.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");u[2]=d}else f|=2;if(f===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:u[0],param_no:u[1],keys:u[2],sign:u[3],pad_char:u[4],align:u[5],width:u[6],precision:u[7],type:u[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");a=a.substring(u[0].length)}return l[o]=c}i.sprintf=t,i.vsprintf=n,typeof window<"u"&&(window.sprintf=t,window.vsprintf=n)})()})(fr);function Un(i,e,t){const n=i.slice();return n[7]=e[t][0],n[8]=e[t][1],n[9]=e[t][2],n}function Hn(i){let e;return{c(){e=O("div"),g(e,"class","override-shadow svelte-jxap3j")},m(t,n){k(t,e,n)},d(t){t&&w(e)}}}function Nl(i){let e,t;return{c(){e=Te("svg"),t=Te("path"),g(t,"d","M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","1em"),g(e,"height","1em"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"stroke","currentColor"),g(e,"stroke-width","2"),g(e,"stroke-linecap","round"),g(e,"stroke-linejoin","round")},m(n,r){k(n,e,r),D(e,t)},d(n){n&&w(e)}}}function Yn(i){let e,t=Q(i[0].child.action.displayParams),n=[];for(let r=0;r<t.length;r+=1)n[r]=Jn(Un(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Z()},m(r,l){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(r,l);k(r,e,l)},p(r,l){if(l&65){t=Q(r[0].child.action.displayParams);let s;for(s=0;s<t.length;s+=1){const o=Un(r,t,s);n[s]?n[s].p(o,l):(n[s]=Jn(o),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(r){r&&w(e),je(n,r)}}}function zn(i){var a;let e,t,n,r=i[6](i[7],(a=i[0].child.parameterStates.get(i[7].id))==null?void 0:a.value,i[8],i[9])+"",l,s,o=i[8]!==""&&Fn(i);return{c(){e=O("p"),o&&o.c(),t=H(),n=O("span"),l=te(r),s=H(),g(n,"class","parameter-value svelte-jxap3j"),g(e,"class","parameter svelte-jxap3j")},m(u,c){k(u,e,c),o&&o.m(e,null),D(e,t),D(e,n),D(n,l),D(e,s)},p(u,c){var f;u[8]!==""?o?o.p(u,c):(o=Fn(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),c&1&&r!==(r=u[6](u[7],(f=u[0].child.parameterStates.get(u[7].id))==null?void 0:f.value,u[8],u[9])+"")&&Ae(l,r)},d(u){u&&w(e),o&&o.d()}}}function Fn(i){let e=(i[8]??i[7].name)+"",t,n;return{c(){t=te(e),n=te(":")},m(r,l){k(r,t,l),k(r,n,l)},p(r,l){l&1&&e!==(e=(r[8]??r[7].name)+"")&&Ae(t,e)},d(r){r&&(w(t),w(n))}}}function Jn(i){let e=i[0].child.getActiveParameters().has(i[7]),t,n=e&&zn(i);return{c(){n&&n.c(),t=Z()},m(r,l){n&&n.m(r,l),k(r,t,l)},p(r,l){l&1&&(e=r[0].child.getActiveParameters().has(r[7])),e?n?n.p(r,l):(n=zn(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&w(t),n&&n.d(r)}}}function ql(i){let e,t,n,r,l,s,o=i[4].name+"",a,u,c,f,d,m=i[0].layerMode===Ce.Override&&!i[2]&&Hn(),p=i[5]&&Nl(),h=i[0].child instanceof tt&&Yn(i);return{c(){m&&m.c(),e=H(),t=O("div"),n=O("div"),r=H(),l=O("div"),s=O("div"),a=te(o),u=H(),p&&p.c(),c=H(),h&&h.c(),f=H(),d=O("div"),g(n,"class","spacer svelte-jxap3j"),g(s,"class","label svelte-jxap3j"),g(l,"class","column svelte-jxap3j"),g(d,"class","spacer svelte-jxap3j"),g(t,"class","container svelte-jxap3j"),Ne(t,"disabled",i[1]),Ne(t,"shadow",i[2]),Ne(t,"highlight",i[3]),L(t,"background-color",`hsl(${i[4].hue}deg var(--component-saturation) var(--component-lightness))`)},m(_,S){m&&m.m(_,S),k(_,e,S),k(_,t,S),D(t,n),D(t,r),D(t,l),D(l,s),D(s,a),D(s,u),p&&p.m(s,null),D(l,c),h&&h.m(l,null),D(t,f),D(t,d)},p(_,[S]){_[0].layerMode===Ce.Override&&!_[2]?m||(m=Hn(),m.c(),m.m(e.parentNode,e)):m&&(m.d(1),m=null),_[0].child instanceof tt?h?h.p(_,S):(h=Yn(_),h.c(),h.m(l,null)):h&&(h.d(1),h=null),S&2&&Ne(t,"disabled",_[1]),S&4&&Ne(t,"shadow",_[2]),S&8&&Ne(t,"highlight",_[3])},i:ne,o:ne,d(_){_&&(w(e),w(t)),m&&m.d(_),p&&p.d(),h&&h.d()}}}function Cl(i,e,t){var c;let{component:n}=e,{disabled:r=!1}=e,{shadow:l=!1}=e,{highlight:s=!1}=e,o=n.child.getManageableChild(),a=(((c=n.validate().solved)==null?void 0:c.repetitions)??0)>1;function u(f,d,m,p){const h=f.getDisplayValue(d);if(p===void 0){let _=String(h);return f instanceof Ge&&f.unit!==void 0&&(_+=" "+f.unit),_}else return fr.sprintf(p,h)}return i.$$set=f=>{"component"in f&&t(0,n=f.component),"disabled"in f&&t(1,r=f.disabled),"shadow"in f&&t(2,l=f.shadow),"highlight"in f&&t(3,s=f.highlight)},[n,r,l,s,o,a,u]}class un extends le{constructor(e){super(),re(this,e,Cl,ql,ie,{component:0,disabled:1,shadow:2,highlight:3})}}const cr=360,A={DAY:86400,HOUR:3600,MINUTE:60,SECOND:1,YEAR:365*86400,MONTH:30*86400,WEEK:7*86400,DAY_MWF:7/3*86400};class Re{constructor(e,t,n,r,l){z(this,"titleInterval");z(this,"labelInterval");z(this,"tileInterval");z(this,"getTitle");z(this,"getLabel");this.titleInterval=e,this.labelInterval=t,this.tileInterval=n,this.getTitle=r,this.getLabel=l}intervalDuration(e){return e[0]*e[1]}getIntervals(e,t,n,r,l=!1){if(n===void 0)return[];const s=this.intervalDuration(n),o=[],a=Math.floor(e/s),u=Math.ceil(t/s);for(let c=a;c<u;c++){const f=c*s;(f>=e&&f<t||l&&c==a)&&o.push([f,r(f),s])}return o}getTitleIntervals(e,t){return this.getIntervals(e,t,this.titleInterval,this.getTitle,!0)}getLabelIntervals(e,t){return this.getIntervals(e,t,this.labelInterval,this.getLabel,!1)}getTileIntervals(e,t){return this.getIntervals(e,t,this.tileInterval,n=>n/this.intervalDuration(this.tileInterval),!0)}}class dr{constructor(e){z(this,"timescales");this.timescales=e}bestTimescale(e,t){let n,r;for(const l of this.timescales){const s=Math.abs(l.intervalDuration(l.labelInterval)*t-e);(n===void 0||s<n)&&(n=s,r=l)}if(r===void 0)throw new Error("No best timescale found. Make sure timescales array is not empty.");return r}shiftIndex(e,t){const n=this.timescales.indexOf(e)+t;return n<=0?this.timescales[0]:n>=this.timescales.length-1?this.timescales[this.timescales.length-1]:this.timescales[n]}}const pe=(i,e=!1)=>t=>{const n=[[86400,"d"],[3600,"h"],[60,"m"],[1,"s"]],r=[];let l=!1;for(let s=0;s<i;s++){const[o,a]=n[s],u=Math.floor(t/o);l=l||u>0,r.push(l||s==i-1?`${u}${a}`:""),t%=o}return e?r[i-1]:r.join("")},hr=new dr([new Re(void 0,[A.DAY,1],[A.DAY,2],i=>"",pe(1,!0)),new Re([A.DAY,1],[A.HOUR,6],[A.DAY,1],pe(1),pe(2,!0)),new Re([A.DAY,1],[A.HOUR,2],[A.HOUR,6],pe(1),pe(2,!0)),new Re([A.DAY,1],[A.HOUR,1],[A.HOUR,2],pe(1),pe(2,!0)),new Re([A.HOUR,1],[A.MINUTE,15],[A.HOUR,1],pe(2),pe(3,!0)),new Re([A.HOUR,1],[A.MINUTE,5],[A.MINUTE,15],pe(2),pe(3,!0)),new Re([A.HOUR,1],[A.MINUTE,1],[A.MINUTE,5],pe(2),pe(3,!0)),new Re([A.MINUTE,1],[A.SECOND,15],[A.MINUTE,1],pe(3),pe(4,!0)),new Re([A.MINUTE,1],[A.SECOND,5],[A.SECOND,15],pe(3),pe(4,!0)),new Re([A.MINUTE,1],[A.SECOND,1],[A.SECOND,5],pe(3),pe(4,!0))]);class Me extends Re{constructor(){super(...arguments);z(this,"dateIntervalStartFunctions",new Map([[A.YEAR,(t,n)=>new Date(t.getFullYear()-t.getFullYear()%n,0)],[A.MONTH,(t,n)=>new Date(t.getFullYear(),t.getMonth()-t.getMonth()%n)],[A.WEEK,(t,n)=>new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay()+(t.getDay()===0?-6:1))],[A.DAY_MWF,(t,n)=>{for(t.setHours(0,0,0,0);![1,3,5].includes(t.getDay());)t.setDate(t.getDate()-1);return t}],[A.DAY,(t,n)=>(t.setHours(0,0,0,0),t)],[A.HOUR,(t,n)=>(t.setHours(t.getHours()-t.getHours()%n,0,0,0),t)],[A.MINUTE,(t,n)=>(t.setMinutes(t.getMinutes()-t.getMinutes()%n,0,0),t)],[A.SECOND,(t,n)=>(t.setSeconds(t.getSeconds()-t.getSeconds()%n,0),t)]]));z(this,"dateIncrementFunctions",new Map([[A.YEAR,(t,n)=>(t.setFullYear(t.getFullYear()+n),t)],[A.MONTH,(t,n)=>(t.setMonth(t.getMonth()+n),t)],[A.WEEK,(t,n)=>(t.setDate(t.getDate()+7*n),t)],[A.DAY_MWF,(t,n)=>{for(t.setDate(t.getDate()+1);![1,3,5].includes(t.getDay());)t.setDate(t.getDate()+1);return t}],[A.DAY,(t,n)=>(t.setDate(t.getDate()+n),t)],[A.HOUR,(t,n)=>(t.setHours(t.getHours()+n),t)],[A.MINUTE,(t,n)=>(t.setMinutes(t.getMinutes()+n),t)],[A.SECOND,(t,n)=>(t.setSeconds(t.getSeconds()+n),t)]]))}getIntervals(t,n,r,l,s=!1){if(r===void 0)return[];const o=[],a=this.dateIntervalStartFunctions.get(r[0]),u=this.dateIncrementFunctions.get(r[0]);if(a===void 0||u===void 0)throw new Error(`Unknown absolute timestamp interval: ${r[0]} seconds`);const c=a(new Date(t*1e3),r[1]),f=c.getTime()/1e3;let d=new Date(c.getTime()),m=d.getTime()/1e3;for(;m<n;)(m>=t&&m<n||s&&m==f)&&o.push([m,l(m),0]),d=u(d,r[1]),m=d.getTime()/1e3;o.push([m,l(m),0]);for(let p=0;p<o.length-1;p++)o[p][2]=o[p+1][0]-o[p][0];return o.pop(),o}}function se(i){return e=>i(new Date(e*1e3)).toString()}const mr=new dr([new Me(void 0,[A.YEAR,1],[A.YEAR,2],i=>"",se(i=>i.getFullYear())),new Me([A.YEAR,1],[A.MONTH,3],[A.YEAR,1],se(i=>i.getFullYear()),se(i=>i.toLocaleDateString("default",{month:"short"}))),new Me([A.YEAR,1],[A.MONTH,1],[A.MONTH,3],se(i=>i.getFullYear()),se(i=>i.toLocaleDateString("default",{month:"short"}))),new Me([A.MONTH,1],[A.WEEK,1],[A.MONTH,1],se(i=>i.toLocaleDateString("default",{year:"numeric",month:"long"})),se(i=>`${i.getMonth()+1}/${i.getDate()}`)),new Me([A.MONTH,1],[A.DAY_MWF,1],[A.WEEK,1],se(i=>i.toLocaleDateString("default",{year:"numeric",month:"long"})),se(i=>`${i.getMonth()+1}/${i.getDate()}`)),new Me([A.MONTH,1],[A.DAY,1],[A.DAY_MWF,1],se(i=>i.toLocaleDateString("default",{year:"numeric",month:"long"})),se(i=>`${i.getMonth()+1}/${i.getDate()}`)),new Me([A.DAY,1],[A.HOUR,6],[A.DAY,1],se(i=>i.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric"})),se(i=>i.toLocaleTimeString("default",{hour:"numeric"}))),new Me([A.DAY,1],[A.HOUR,2],[A.HOUR,6],se(i=>i.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric"})),se(i=>i.toLocaleTimeString("default",{hour:"numeric"}))),new Me([A.DAY,1],[A.HOUR,1],[A.HOUR,2],se(i=>i.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric"})),se(i=>i.toLocaleTimeString("default",{hour:"numeric"}))),new Me([A.DAY,1],[A.MINUTE,15],[A.HOUR,1],se(i=>i.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric"})),se(i=>i.toLocaleTimeString("default",{hour:"numeric",minute:"2-digit"}))),new Me([A.DAY,1],[A.MINUTE,5],[A.MINUTE,15],se(i=>i.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric"})),se(i=>i.toLocaleTimeString("default",{hour:"numeric",minute:"2-digit"}))),new Me([A.DAY,1],[A.MINUTE,1],[A.MINUTE,5],se(i=>i.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric"})),se(i=>i.toLocaleTimeString("default",{hour:"numeric",minute:"2-digit"}))),new Me([A.MINUTE,1],[A.SECOND,15],[A.MINUTE,1],se(i=>i.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})),se(i=>i.toLocaleTimeString("default",{second:"numeric"}))),new Me([A.MINUTE,1],[A.SECOND,5],[A.SECOND,15],se(i=>i.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})),se(i=>i.toLocaleTimeString("default",{second:"numeric"}))),new Me([A.MINUTE,1],[A.SECOND,1],[A.SECOND,5],se(i=>i.toLocaleDateString("default",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})),se(i=>i.toLocaleTimeString("default",{second:"numeric"})))]);function Rn(i){let e;const t=i[14].default,n=Ue(t,i,i[16],null);return{c(){n&&n.c()},m(r,l){n&&n.m(r,l),e=!0},p(r,l){n&&n.p&&(!e||l[0]&65536)&&Ye(n,t,r,r[16],e?He(t,r[16],l,null):ze(r[16]),null)},i(r){e||(v(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function Vn(i){let e,t;return e=new sn({props:{target:"body",$$slots:{default:[Tl]},$$scope:{ctx:i}}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},p(n,r){const l={};r[0]&65726&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Bn(i){let e,t,n,r,l=!i[7]&&!i[5]&&Wn(i);return n=new un({props:{component:i[2],disabled:i[7]||i[5],shadow:i[1],highlight:!0}}),{c(){l&&l.c(),e=H(),t=O("div"),j(n.$$.fragment),g(t,"class","dragContainer svelte-vuxm4g"),L(t,"left",`${i[3].left}px`),L(t,"top",`${i[3].top}px`),L(t,"width",`${i[3].width}px`),L(t,"height",`${i[3].height}px`)},m(s,o){l&&l.m(s,o),k(s,e,o),k(s,t,o),V(n,t,null),r=!0},p(s,o){!s[7]&&!s[5]?l?(l.p(s,o),o[0]&160&&v(l,1)):(l=Wn(s),l.c(),v(l,1),l.m(e.parentNode,e)):l&&($(),y(l,1,1,()=>{l=null}),x());const a={};o[0]&4&&(a.component=s[2]),o[0]&160&&(a.disabled=s[7]||s[5]),o[0]&2&&(a.shadow=s[1]),n.$set(a),o[0]&8&&L(t,"left",`${s[3].left}px`),o[0]&8&&L(t,"top",`${s[3].top}px`),o[0]&8&&L(t,"width",`${s[3].width}px`),o[0]&8&&L(t,"height",`${s[3].height}px`)},i(s){r||(v(l),v(n.$$.fragment,s),r=!0)},o(s){y(l),y(n.$$.fragment,s),r=!1},d(s){s&&(w(e),w(t)),l&&l.d(s),B(n)}}}function Wn(i){let e,t,n;return t=new un({props:{component:i[2]}}),{c(){e=O("div"),j(t.$$.fragment),g(e,"class","previewContainer svelte-vuxm4g"),L(e,"left",`${i[4].left}px`),L(e,"top",`${i[4].top}px`),L(e,"width",`${i[4].width}px`),L(e,"height",`${i[4].height}px`)},m(r,l){k(r,e,l),V(t,e,null),n=!0},p(r,l){const s={};l[0]&4&&(s.component=r[2]),t.$set(s),l[0]&16&&L(e,"left",`${r[4].left}px`),l[0]&16&&L(e,"top",`${r[4].top}px`),l[0]&16&&L(e,"width",`${r[4].width}px`),l[0]&16&&L(e,"height",`${r[4].height}px`)},i(r){n||(v(t.$$.fragment,r),n=!0)},o(r){y(t.$$.fragment,r),n=!1},d(r){r&&w(e),B(t)}}}function Tl(i){let e,t,n,r,l=i[1]&&Bn(i);return{c(){e=O("div"),l&&l.c(),g(e,"class","dragArea svelte-vuxm4g")},m(s,o){k(s,e,o),l&&l.m(e,null),t=!0,n||(r=[K(e,"mousemove",i[9]),K(e,"mouseup",i[10])],n=!0)},p(s,o){s[1]?l?(l.p(s,o),o[0]&2&&v(l,1)):(l=Bn(s),l.c(),v(l,1),l.m(e,null)):l&&($(),y(l,1,1,()=>{l=null}),x())},i(s){t||(v(l),t=!0)},o(s){y(l),t=!1},d(s){s&&w(e),l&&l.d(),n=!1,ve(r)}}}function Il(i){let e,t,n,r,l,s,o=(!(i[0]&&i[1])||i[6])&&Rn(i),a=i[2]!==void 0&&Vn(i);return{c(){e=O("div"),o&&o.c(),t=H(),a&&a.c(),n=Z(),g(e,"class","dragParent")},m(u,c){k(u,e,c),o&&o.m(e,null),k(u,t,c),a&&a.m(u,c),k(u,n,c),r=!0,l||(s=K(e,"mousedown",i[15]),l=!0)},p(u,c){!(u[0]&&u[1])||u[6]?o?(o.p(u,c),c[0]&67&&v(o,1)):(o=Rn(u),o.c(),v(o,1),o.m(e,null)):o&&($(),y(o,1,1,()=>{o=null}),x()),u[2]!==void 0?a?(a.p(u,c),c[0]&4&&v(a,1)):(a=Vn(u),a.c(),v(a,1),a.m(n.parentNode,n)):a&&($(),y(a,1,1,()=>{a=null}),x())},i(u){r||(v(o),v(a),r=!0)},o(u){y(o),y(a),r=!1},d(u){u&&(w(e),w(t),w(n)),o&&o.d(),a&&a.d(u),l=!1,s()}}}const Bt=25,El=0,jn=10;function Al(i,e,t){let n,r,l;de(i,Le,X=>t(24,n=X)),de(i,pt,X=>t(25,r=X)),de(i,fe,X=>t(26,l=X));let{$$slots:s={},$$scope:o}=e,{getComponent:a}=e,{hideChildOnDrag:u=!1}=e,{sequence:c}=e,{removeComponent:f}=e,d,m,p,h,_,S,M,N,T,b,J,Y=!0,q,C;const I=c!=null&&c.isAbsolute?mr:hr;function U(X,we){if(c===void 0||h===void 0)return[];const he=Math.max(0,c.offset),me=c.offset+we.width/c.scale,ue=Ee=>Ee+h>he&&Ee<me,ye=I.shiftIndex(I.bestTimescale(cr,c.scale),2),Oe=(Ee,Fe)=>ye.getLabelIntervals(Ee,Fe).map(([nt,Rt])=>[nt,El]).filter(([nt,Rt])=>ue(nt)),Ke=c.layers[X].validate(T?void 0:d);if(Ke.error===or.Empty)return Oe(Math.max(0,he-h),me);if(Ke.childBounds===void 0)return[];let ce=[],Se=0;for(const[Ee,Fe]of Ke.childBounds){if(Se===void 0)break;const Je=Ee,nt=Fe;Je!==void 0&&Je-Se>=h&&(ue(Se)&&ce.push([Se,Bt]),ue(Je-h)&&ce.push([Je-h,Bt]),ce=[...ce,...Oe(Math.max(he,Se),Math.min(me,Je-h))]),Se=nt}return Se!==void 0&&ue(Se)&&(ce=[...ce,[Se,Bt],...Oe(Math.max(he,Se),me)]),ce}function P(X,we){if(c===void 0)return;let he,me=0;for(const[ue,ye]of we){const Oe=Math.abs(X-ue);Oe<=ye/c.scale&&ye>me?(he=ue,me=ye):(he===void 0||Oe<Math.abs(X-he))&&me===0&&(he=ue)}return he}function W(X){return Math.abs(X.clientX-(q.x+p[0]))>=jn||Math.abs(X.clientY-(q.y+p[1]))>=jn}function G(X){c!==void 0&&(X?(c.layers.push(new Jt([])),t(11,c)):t(11,c.layers=c.layers.filter(we=>we.children.size>0),c))}function ae(X){X.preventDefault(),t(2,d=a()),!(c===void 0||d===void 0)&&(r.set(c,d),h=(d==null?void 0:d.getDuration()[1])??5,q=X.target.closest(".dragParent > *").getBoundingClientRect(),p=[X.clientX-q.x,X.clientY-q.y],J=void 0,t(1,C=!1),t(6,T=X.altKey),E(X))}function E(X){if(c===void 0)return;let we=h*c.scale,he=c.layerHeight;t(1,C=W(X));const me=20;let ue=p[0];we<me*2?ue=we/2:ue=Math.min(we-me,Math.max(me,ue));let ye=C?X.clientX-ue:q.x,Oe=p[1];Oe=Math.min(he-me,Math.max(me,Oe));let Ke=C?X.clientY-Oe:q.y;t(3,m=new DOMRect(ye,Ke,we,he));const ce=document.getElementById("timeline").getBoundingClientRect();if(X.clientX<ce.left||X.clientX>ce.right||X.clientY<ce.top||X.clientY>ce.bottom){t(7,Y=!0);return}t(7,Y=!1);const Se=ye-ce.left,Ee=Ke-ce.top;S=Math.round((ce.height/2+c.scroll-Ee)/c.layerHeight-1),S=Math.max(0,Math.min(c.layers.length-1,S)),J!==S&&(J=S,b=U(J,ce));const Fe=P(Se/c.scale+c.offset,b);if(Fe===void 0){t(5,N=!0);return}else t(5,N=!1);M=Fe,t(4,_=new DOMRect(ce.left+(M-c.offset)*c.scale,ce.height/2+ce.top-(S+1)*c.layerHeight+c.scroll,we,he))}function R(X){c===void 0||d===void 0||(Y&&r.set(c,void 0),!N&&!T&&f(),!Y&&!N&&(T&&(t(2,d=ht.fromJSON(sr(d.toJSON()),{actionManager:l.actionSet.actionManager,parameterManager:l.actionSet.parameterManager,sequenceManager:l.sequenceManager})),r.set(c,d)),d.props.selectedConstraints.includes("end")&&t(2,d.props.constraints.end+=M-d.props.constraints.start,d),t(2,d.props.constraints.start=M,d),c.layers[S].children.add(d)),ke(Le,n++,n),t(2,d=void 0),t(1,C=!1),t(6,T=!1),G(C))}const ee=X=>ae(X);return i.$$set=X=>{"getComponent"in X&&t(12,a=X.getComponent),"hideChildOnDrag"in X&&t(0,u=X.hideChildOnDrag),"sequence"in X&&t(11,c=X.sequence),"removeComponent"in X&&t(13,f=X.removeComponent),"$$scope"in X&&t(16,o=X.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&2&&G(C)},[u,C,d,m,_,N,T,Y,ae,E,R,c,a,f,s,ee,o]}class pr extends le{constructor(e){super(),re(this,e,Al,Il,ie,{getComponent:12,hideChildOnDrag:0,sequence:11,removeComponent:13},null,[-1,-1])}}function Pl(i){let e,t,n;return t=new un({props:{component:i[2],highlight:i[5]}}),{c(){e=O("div"),j(t.$$.fragment),g(e,"class","container svelte-ul6d45"),L(e,"left",`${(i[3]-i[0])/i[1]*100}%`),L(e,"width",`${(i[4]-i[3])/i[1]*100}%`)},m(r,l){k(r,e,l),V(t,e,null),n=!0},p(r,[l]){const s={};l&4&&(s.component=r[2]),l&32&&(s.highlight=r[5]),t.$set(s),l&11&&L(e,"left",`${(r[3]-r[0])/r[1]*100}%`),l&26&&L(e,"width",`${(r[4]-r[3])/r[1]*100}%`)},i(r){n||(v(t.$$.fragment,r),n=!0)},o(r){y(t.$$.fragment,r),n=!1},d(r){r&&w(e),B(t)}}}function Ll(i,e,t){let n,r,l;de(i,fe,f=>t(6,r=f)),de(i,pt,f=>t(7,l=f));let{offset:s}=e,{tileDuration:o}=e,{component:a}=e,{start:u}=e,{end:c}=e;return i.$$set=f=>{"offset"in f&&t(0,s=f.offset),"tileDuration"in f&&t(1,o=f.tileDuration),"component"in f&&t(2,a=f.component),"start"in f&&t(3,u=f.start),"end"in f&&t(4,c=f.end)},i.$$.update=()=>{i.$$.dirty&196&&t(5,n=l.get(r.openedSequence)===a)},[s,o,a,u,c,n,r,l]}class Ul extends le{constructor(e){super(),re(this,e,Ll,Pl,ie,{offset:0,tileDuration:1,component:2,start:3,end:4})}}function Xn(i,e,t){const n=i.slice();return n[13]=e[t][0],n[14]=e[t][1],n[15]=e[t][2],n}function Hl(i){let e,t,n;return e=new Ul({props:{offset:i[1],tileDuration:i[2],component:i[13],start:i[14],end:i[15]}}),{c(){j(e.$$.fragment),t=H()},m(r,l){V(e,r,l),k(r,t,l),n=!0},p(r,l){const s={};l&2&&(s.offset=r[1]),l&4&&(s.tileDuration=r[2]),l&16&&(s.component=r[13]),l&16&&(s.start=r[14]),l&16&&(s.end=r[15]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){r&&w(t),B(e,r)}}}function Kn(i,e){let t,n,r,l;function s(){return e[9](e[13])}function o(){return e[10](e[13])}function a(c){e[11](c)}let u={getComponent:s,hideChildOnDrag:!0,removeComponent:o,$$slots:{default:[Hl]},$$scope:{ctx:e}};return e[0]!==void 0&&(u.sequence=e[0]),n=new pr({props:u}),oe.push(()=>_e(n,"sequence",a)),{key:i,first:null,c(){t=Z(),j(n.$$.fragment),this.first=t},m(c,f){k(c,t,f),V(n,c,f),l=!0},p(c,f){e=c;const d={};f&16&&(d.getComponent=s),f&16&&(d.removeComponent=o),f&262166&&(d.$$scope={dirty:f,ctx:e}),!r&&f&1&&(r=!0,d.sequence=e[0],ge(()=>r=!1)),n.$set(d)},i(c){l||(v(n.$$.fragment,c),l=!0)},o(c){y(n.$$.fragment,c),l=!1},d(c){c&&w(t),B(n,c)}}}function Yl(i){let e,t=[],n=new Map,r,l=Q(i[4]);const s=o=>o[13];for(let o=0;o<l.length;o+=1){let a=Xn(i,l,o),u=s(a);n.set(u,t[o]=Kn(u,a))}return{c(){e=O("div");for(let o=0;o<t.length;o+=1)t[o].c();g(e,"class","container svelte-1dymnu0"),L(e,"transform",`translateY(${-i[3]*100}%)`),L(e,"background-color",`var(--gray-${i[3]%2==0?"93":"95"})`)},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);r=!0},p(o,[a]){a&55&&(l=Q(o[4]),$(),t=Qe(t,a,s,1,o,l,n,e,$e,Kn,null,Xn),x()),a&8&&L(e,"transform",`translateY(${-o[3]*100}%)`),a&8&&L(e,"background-color",`var(--gray-${o[3]%2==0?"93":"95"})`)},i(o){if(!r){for(let a=0;a<l.length;a+=1)v(t[a]);r=!0}},o(o){for(let a=0;a<t.length;a+=1)y(t[a]);r=!1},d(o){o&&w(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function zl(i,e,t){let n,{offset:r}=e,{duration:l}=e,{layer:s}=e,{index:o}=e,{tileIndex:a}=e,{tilesEnd:u}=e,{sequence:c}=e;function f(_,S){const M=[];for(const N of s.children){const T=N.validate();if(T.solved===void 0)continue;let b;if(T.solved.start===void 0)if(S==0)b=r;else continue;else b=T.solved.start;let J;T.solved.end===void 0?J=_:J=Math.min(_,T.solved.end),(b>=r||J>r&&S===0)&&b<r+l&&M.push([N,Math.max(r,b),J])}return M}function d(_){s.children.delete(_)}const m=_=>_,p=_=>d(_);function h(_){c=_,t(0,c)}return i.$$set=_=>{"offset"in _&&t(1,r=_.offset),"duration"in _&&t(2,l=_.duration),"layer"in _&&t(6,s=_.layer),"index"in _&&t(3,o=_.index),"tileIndex"in _&&t(7,a=_.tileIndex),"tilesEnd"in _&&t(8,u=_.tilesEnd),"sequence"in _&&t(0,c=_.sequence)},i.$$.update=()=>{i.$$.dirty&384&&t(4,n=f(u,a))},[c,r,l,o,n,d,s,a,u,m,p,h]}class Fl extends le{constructor(e){super(),re(this,e,zl,Yl,ie,{offset:1,duration:2,layer:6,index:3,tileIndex:7,tilesEnd:8,sequence:0})}}function Gn(i,e,t){const n=i.slice();return n[6]=e[t],n[8]=t,n}function Qn(i){let e,t,n;function r(s){i[5](s)}let l={offset:i[1],duration:i[2],layer:i[6],index:i[8],tileIndex:i[3],tilesEnd:i[4]};return i[0]!==void 0&&(l.sequence=i[0]),e=new Fl({props:l}),oe.push(()=>_e(e,"sequence",r)),{c(){j(e.$$.fragment)},m(s,o){V(e,s,o),n=!0},p(s,o){const a={};o&2&&(a.offset=s[1]),o&4&&(a.duration=s[2]),o&1&&(a.layer=s[6]),o&8&&(a.tileIndex=s[3]),o&16&&(a.tilesEnd=s[4]),!t&&o&1&&(t=!0,a.sequence=s[0],ge(()=>t=!1)),e.$set(a)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){B(e,s)}}}function Jl(i){let e,t,n=Q(i[0].layers),r=[];for(let s=0;s<n.length;s+=1)r[s]=Qn(Gn(i,n,s));const l=s=>y(r[s],1,1,()=>{r[s]=null});return{c(){e=O("div");for(let s=0;s<r.length;s+=1)r[s].c();g(e,"class","container svelte-k69jkv")},m(s,o){k(s,e,o);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);t=!0},p(s,[o]){if(o&31){n=Q(s[0].layers);let a;for(a=0;a<n.length;a+=1){const u=Gn(s,n,a);r[a]?(r[a].p(u,o),v(r[a],1)):(r[a]=Qn(u),r[a].c(),v(r[a],1),r[a].m(e,null))}for($(),a=n.length;a<r.length;a+=1)l(a);x()}},i(s){if(!t){for(let o=0;o<n.length;o+=1)v(r[o]);t=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)y(r[o]);t=!1},d(s){s&&w(e),je(r,s)}}}function Rl(i,e,t){let{offset:n}=e,{duration:r}=e,{sequence:l}=e,{tileIndex:s}=e,{tilesEnd:o}=e;function a(u){l=u,t(0,l)}return i.$$set=u=>{"offset"in u&&t(1,n=u.offset),"duration"in u&&t(2,r=u.duration),"sequence"in u&&t(0,l=u.sequence),"tileIndex"in u&&t(3,s=u.tileIndex),"tilesEnd"in u&&t(4,o=u.tilesEnd)},[l,n,r,s,o,a]}class Vl extends le{constructor(e){super(),re(this,e,Rl,Jl,ie,{offset:1,duration:2,sequence:0,tileIndex:3,tilesEnd:4})}}function Zn(i){let e,t,n,r,l,s;return{c(){e=O("div"),t=O("div"),n=O("div"),n.innerHTML='<div class="patch svelte-1a939ah"></div>',r=H(),l=O("p"),s=te(i[0]),g(n,"class","tick svelte-1a939ah"),L(n,"border-color",i[1]>0?"var(--gray-50)":void 0),L(n,"min-height",i[1]>0?"1rem":void 0),L(n,"height",i[1]>0?void 0:"100%"),g(l,"class","label svelte-1a939ah"),L(l,"text-align",i[5]),g(t,"class","container-inner svelte-1a939ah"),g(e,"class","container svelte-1a939ah"),L(e,"transform",`translateX(${(i[2]-i[3])/i[4]*100}%)`)},m(o,a){k(o,e,a),D(e,t),D(t,n),D(t,r),D(t,l),D(l,s)},p(o,a){a&2&&L(n,"border-color",o[1]>0?"var(--gray-50)":void 0),a&2&&L(n,"min-height",o[1]>0?"1rem":void 0),a&2&&L(n,"height",o[1]>0?void 0:"100%"),a&1&&Ae(s,o[0]),a&32&&L(l,"text-align",o[5]),a&28&&L(e,"transform",`translateX(${(o[2]-o[3])/o[4]*100}%)`)},d(o){o&&w(e)}}}function Bl(i){let e,t=i[2]>=0&&Zn(i);return{c(){t&&t.c(),e=Z()},m(n,r){t&&t.m(n,r),k(n,e,r)},p(n,[r]){n[2]>=0?t?t.p(n,r):(t=Zn(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ne,o:ne,d(n){n&&w(e),t&&t.d(n)}}}function Wl(i,e,t){let{label:n}=e,{level:r=0}=e,{offset:l}=e,{tileOffset:s}=e,{tileDuration:o}=e,{align:a="left"}=e;return i.$$set=u=>{"label"in u&&t(0,n=u.label),"level"in u&&t(1,r=u.level),"offset"in u&&t(2,l=u.offset),"tileOffset"in u&&t(3,s=u.tileOffset),"tileDuration"in u&&t(4,o=u.tileDuration),"align"in u&&t(5,a=u.align)},[n,r,l,s,o,a]}class fn extends le{constructor(e){super(),re(this,e,Wl,Bl,ie,{label:0,level:1,offset:2,tileOffset:3,tileDuration:4,align:5})}}function $n(i,e,t){const n=i.slice();return n[6]=e[t][0],n[7]=e[t][1],n}function xn(i,e,t){const n=i.slice();return n[10]=e[t][0],n[7]=e[t][1],n}function ei(i){let e,t;return e=new fn({props:{label:"",level:1,offset:i[10],tileOffset:i[0],tileDuration:i[1]}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},p(n,r){const l={};r&1&&(l.tileOffset=n[0]),r&2&&(l.tileDuration=n[1]),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function ti(i){let e,t;return e=new fn({props:{label:i[7],offset:i[6],tileOffset:i[0],tileDuration:i[1]}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},p(n,r){const l={};r&1&&(l.tileOffset=n[0]),r&2&&(l.tileDuration=n[1]),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function jl(i){let e,t,n,r,l,s,o=Q(i[3]),a=[];for(let m=0;m<o.length;m+=1)a[m]=ei(xn(i,o,m));const u=m=>y(a[m],1,1,()=>{a[m]=null});let c=Q(i[2]),f=[];for(let m=0;m<c.length;m+=1)f[m]=ti($n(i,c,m));const d=m=>y(f[m],1,1,()=>{f[m]=null});return{c(){e=O("div"),t=O("div"),n=O("div");for(let m=0;m<a.length;m+=1)a[m].c();r=H(),l=O("div");for(let m=0;m<f.length;m+=1)f[m].c();g(n,"class","ticks svelte-1ppp383"),g(t,"class","ticks-container svelte-1ppp383"),g(l,"class","labels svelte-1ppp383"),g(e,"class","container svelte-1ppp383")},m(m,p){k(m,e,p),D(e,t),D(t,n);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(n,null);D(e,r),D(e,l);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(l,null);s=!0},p(m,[p]){if(p&11){o=Q(m[3]);let h;for(h=0;h<o.length;h+=1){const _=xn(m,o,h);a[h]?(a[h].p(_,p),v(a[h],1)):(a[h]=ei(_),a[h].c(),v(a[h],1),a[h].m(n,null))}for($(),h=o.length;h<a.length;h+=1)u(h);x()}if(p&7){c=Q(m[2]);let h;for(h=0;h<c.length;h+=1){const _=$n(m,c,h);f[h]?(f[h].p(_,p),v(f[h],1)):(f[h]=ti(_),f[h].c(),v(f[h],1),f[h].m(l,null))}for($(),h=c.length;h<f.length;h+=1)d(h);x()}},i(m){if(!s){for(let p=0;p<o.length;p+=1)v(a[p]);for(let p=0;p<c.length;p+=1)v(f[p]);s=!0}},o(m){a=a.filter(Boolean);for(let p=0;p<a.length;p+=1)y(a[p]);f=f.filter(Boolean);for(let p=0;p<f.length;p+=1)y(f[p]);s=!1},d(m){m&&w(e),je(a,m),je(f,m)}}}function Xl(i,e,t){let{offset:n}=e,{duration:r}=e,{timescale:l}=e,{timescaleSet:s}=e,o=l.getLabelIntervals(n,n+r),a=s.shiftIndex(l,1).getLabelIntervals(n,n+r);return i.$$set=u=>{"offset"in u&&t(0,n=u.offset),"duration"in u&&t(1,r=u.duration),"timescale"in u&&t(4,l=u.timescale),"timescaleSet"in u&&t(5,s=u.timescaleSet)},[n,r,o,a,l,s]}class Kl extends le{constructor(e){super(),re(this,e,Xl,jl,ie,{offset:0,duration:1,timescale:4,timescaleSet:5})}}function ni(i,e,t){const n=i.slice();return n[21]=e[t][0],n[22]=e[t][1],n[23]=e[t][2],n}function ii(i,e,t){const n=i.slice();return n[21]=e[t][0],n[26]=e[t][1],n[23]=e[t][2],n}function ri(i,e,t){const n=i.slice();return n[21]=e[t][0],n[29]=e[t][1],n[23]=e[t][2],n[31]=t,n}function Gl(i){let e,t,n,r;function l(o){i[15](o)}let s={offset:i[21],duration:i[23],tileIndex:i[5].length-i[31]-1,tilesEnd:i[9]};return i[0]!==void 0&&(s.sequence=i[0]),e=new Vl({props:s}),oe.push(()=>_e(e,"sequence",l)),{c(){j(e.$$.fragment),n=H()},m(o,a){V(e,o,a),k(o,n,a),r=!0},p(o,a){const u={};a[0]&32&&(u.offset=o[21]),a[0]&32&&(u.duration=o[23]),a[0]&32&&(u.tileIndex=o[5].length-o[31]-1),a[0]&512&&(u.tilesEnd=o[9]),!t&&a[0]&1&&(t=!0,u.sequence=o[0],ge(()=>t=!1)),e.$set(u)},i(o){r||(v(e.$$.fragment,o),r=!0)},o(o){y(e.$$.fragment,o),r=!1},d(o){o&&w(n),B(e,o)}}}function li(i,e){let t,n,r;return n=new an({props:{offset:e[21],duration:e[23],sequence:e[0],$$slots:{default:[Gl]},$$scope:{ctx:e}}}),{key:i,first:null,c(){t=Z(),j(n.$$.fragment),this.first=t},m(l,s){k(l,t,s),V(n,l,s),r=!0},p(l,s){e=l;const o={};s[0]&32&&(o.offset=e[21]),s[0]&32&&(o.duration=e[23]),s[0]&1&&(o.sequence=e[0]),s[0]&545|s[1]&2&&(o.$$scope={dirty:s,ctx:e}),n.$set(o)},i(l){r||(v(n.$$.fragment,l),r=!0)},o(l){y(n.$$.fragment,l),r=!1},d(l){l&&w(t),B(n,l)}}}function Ql(i){let e,t,n;return e=new fn({props:{label:i[26],offset:i[21],tileOffset:i[21],tileDuration:i[14](i[21],i[23]),align:i[14](i[21],i[23])<i[4]-i[3]?"left":"center"}}),{c(){j(e.$$.fragment),t=H()},m(r,l){V(e,r,l),k(r,t,l),n=!0},p(r,l){const s={};l[0]&1024&&(s.label=r[26]),l[0]&1024&&(s.offset=r[21]),l[0]&1024&&(s.tileOffset=r[21]),l[0]&1024&&(s.tileDuration=r[14](r[21],r[23])),l[0]&1048&&(s.align=r[14](r[21],r[23])<r[4]-r[3]?"left":"center"),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){r&&w(t),B(e,r)}}}function si(i,e){let t,n,r;return n=new an({props:{offset:Math.max(e[3],e[21]),duration:e[14](e[21],e[23]),sequence:e[0],$$slots:{default:[Ql]},$$scope:{ctx:e}}}),{key:i,first:null,c(){t=Z(),j(n.$$.fragment),this.first=t},m(l,s){k(l,t,s),V(n,l,s),r=!0},p(l,s){e=l;const o={};s[0]&1032&&(o.offset=Math.max(e[3],e[21])),s[0]&1024&&(o.duration=e[14](e[21],e[23])),s[0]&1&&(o.sequence=e[0]),s[0]&1048|s[1]&2&&(o.$$scope={dirty:s,ctx:e}),n.$set(o)},i(l){r||(v(n.$$.fragment,l),r=!0)},o(l){y(n.$$.fragment,l),r=!1},d(l){l&&w(t),B(n,l)}}}function Zl(i){let e,t,n;return e=new Kl({props:{offset:i[21],duration:i[23],timescale:i[6],timescaleSet:i[7]}}),{c(){j(e.$$.fragment),t=H()},m(r,l){V(e,r,l),k(r,t,l),n=!0},p(r,l){const s={};l[0]&32&&(s.offset=r[21]),l[0]&32&&(s.duration=r[23]),l[0]&64&&(s.timescale=r[6]),l[0]&128&&(s.timescaleSet=r[7]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){r&&w(t),B(e,r)}}}function oi(i,e){let t,n,r;return n=new an({props:{offset:e[21],duration:e[23],sequence:e[0],$$slots:{default:[Zl]},$$scope:{ctx:e}}}),{key:i,first:null,c(){t=Z(),j(n.$$.fragment),this.first=t},m(l,s){k(l,t,s),V(n,l,s),r=!0},p(l,s){e=l;const o={};s[0]&32&&(o.offset=e[21]),s[0]&32&&(o.duration=e[23]),s[0]&1&&(o.sequence=e[0]),s[0]&224|s[1]&2&&(o.$$scope={dirty:s,ctx:e}),n.$set(o)},i(l){r||(v(n.$$.fragment,l),r=!0)},o(l){y(n.$$.fragment,l),r=!1},d(l){l&&w(t),B(n,l)}}}function $l(i){let e,t,n=[],r=new Map,l,s,o,a,u=[],c=new Map,f,d,m=[],p=new Map,h,_,S,M,N=Q(i[5].toReversed());const T=C=>`${C[21]} ${C[6].tileInterval} ${C[12]} ${C[0].id}`;for(let C=0;C<N.length;C+=1){let I=ri(i,N,C),U=T(I);r.set(U,n[C]=li(U,I))}let b=Q(i[10]);const J=C=>`${C[21]} ${C[6].titleInterval}`;for(let C=0;C<b.length;C+=1){let I=ii(i,b,C),U=J(I);c.set(U,u[C]=si(U,I))}let Y=Q(i[5]);const q=C=>`${C[21]} ${C[6].tileInterval}`;for(let C=0;C<Y.length;C+=1){let I=ni(i,Y,C),U=q(I);p.set(U,m[C]=oi(U,I))}return{c(){e=O("div"),t=O("div");for(let C=0;C<n.length;C+=1)n[C].c();l=H(),s=O("div"),o=H(),a=O("div");for(let C=0;C<u.length;C+=1)u[C].c();f=H(),d=O("div");for(let C=0;C<m.length;C+=1)m[C].c();g(t,"class","timelineTiles svelte-4qirzt"),L(t,"transform",`translateY(${i[0].scroll}px)`),L(t,"height",`${i[0].layerHeight}px`),g(s,"class","timescaleBg svelte-4qirzt"),g(a,"class","titleTiles svelte-4qirzt"),g(d,"class","timescaleTiles svelte-4qirzt"),g(e,"id","timeline"),g(e,"class","container svelte-4qirzt"),be(()=>i[17].call(e))},m(C,I){k(C,e,I),D(e,t);for(let U=0;U<n.length;U+=1)n[U]&&n[U].m(t,null);D(e,l),D(e,s),D(e,o),D(e,a);for(let U=0;U<u.length;U+=1)u[U]&&u[U].m(a,null);D(e,f),D(e,d);for(let U=0;U<m.length;U+=1)m[U]&&m[U].m(d,null);i[16](e),h=Ct(e,i[17].bind(e)),_=!0,S||(M=[K(e,"wheel",i[13]),K(e,"click",i[18])],S=!0)},p(C,I){I[0]&4705&&(N=Q(C[5].toReversed()),$(),n=Qe(n,I,T,1,C,N,r,t,$e,li,null,ri),x()),I[0]&1&&L(t,"transform",`translateY(${C[0].scroll}px)`),I[0]&1&&L(t,"height",`${C[0].layerHeight}px`),I[0]&17497&&(b=Q(C[10]),$(),u=Qe(u,I,J,1,C,b,c,a,$e,si,null,ii),x()),I[0]&225&&(Y=Q(C[5]),$(),m=Qe(m,I,q,1,C,Y,p,d,$e,oi,null,ni),x())},i(C){if(!_){for(let I=0;I<N.length;I+=1)v(n[I]);for(let I=0;I<b.length;I+=1)v(u[I]);for(let I=0;I<Y.length;I+=1)v(m[I]);_=!0}},o(C){for(let I=0;I<n.length;I+=1)y(n[I]);for(let I=0;I<u.length;I+=1)y(u[I]);for(let I=0;I<m.length;I+=1)y(m[I]);_=!1},d(C){C&&w(e);for(let I=0;I<n.length;I+=1)n[I].d();for(let I=0;I<u.length;I+=1)u[I].d();for(let I=0;I<m.length;I+=1)m[I].d();i[16](null),h(),S=!1,ve(M)}}}function xl(i){if(i.length===0)return 0;{const e=i[i.length-1];return e[0]+e[2]}}function es(i,e,t){let n,r,l,s,o,a,u,c,f;de(i,pt,q=>t(11,c=q)),de(i,Le,q=>t(12,f=q));let{sequence:d}=e,{width:m=0}=e,p,h=0;function _(q){q!==0&&t(0,d.offset=Math.max(q/d.scale*-.5,d.offset),d)}function S(q,C,I){q!==0&&t(0,d.scroll=Math.max(q*-.5+C,Math.min(q*.5+C*(I-1),d.scroll)),d)}function M(q){if(q.preventDefault(),q.ctrlKey){const C=Math.pow(2,-q.deltaY/1500);t(0,d.offset+=(1-1/C)*((q.clientX-p.getBoundingClientRect().left)/d.scale),d),t(0,d.scale*=C,d),_(m)}else q.shiftKey?(t(0,d.offset+=q.deltaY/d.scale*.75,d),_(m)):q.altKey?(t(0,d.layerHeight-=q.deltaY/10,d),t(0,d.layerHeight=Math.max(100,Math.min(300,d.layerHeight)),d)):(t(0,d.scroll-=q.deltaY/2,d),S(h,d.layerHeight,d.layers.length))}function N(q,C){const I=Math.max(n,q),U=C??Number.MAX_VALUE;return Math.min(r-Math.max(n,I),U,q+U-I)}function T(q){d=q,t(0,d)}function b(q){oe[q?"unshift":"push"](()=>{p=q,t(8,p)})}function J(){m=this.clientWidth,h=this.clientHeight,t(1,m),t(2,h)}const Y=()=>{c.set(d,void 0),pt.set(c)};return i.$$set=q=>{"sequence"in q&&t(0,d=q.sequence),"width"in q&&t(1,m=q.width)},i.$$.update=()=>{i.$$.dirty[0]&3&&_(m),i.$$.dirty[0]&5&&S(h,d.layerHeight,d.layers.length),i.$$.dirty[0]&1&&t(3,n=d.offset),i.$$.dirty[0]&11&&t(4,r=n+m/d.scale),i.$$.dirty[0]&1&&t(7,l=d.isAbsolute?mr:hr),i.$$.dirty[0]&129&&t(6,s=l.bestTimescale(cr,d.scale)),i.$$.dirty[0]&88&&t(10,o=s.getTitleIntervals(n,r)),i.$$.dirty[0]&88&&t(5,a=s.getTileIntervals(n,r)),i.$$.dirty[0]&32&&t(9,u=xl(a))},[d,m,h,n,r,a,s,l,p,u,o,c,f,M,N,T,b,J,Y]}class ts extends le{constructor(e){super(),re(this,e,es,$l,ie,{sequence:0,width:1},null,[-1,-1])}}const rt=1024,Ut=1280;function ns(i){let e;const t=i[1].default,n=Ue(t,i,i[2],null);return{c(){n&&n.c()},m(r,l){n&&n.m(r,l),e=!0},p(r,l){n&&n.p&&(!e||l&4)&&Ye(n,t,r,r[2],e?He(t,r[2],l,null):ze(r[2]),null)},i(r){e||(v(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function is(i){let e,t,n;return t=new rr({props:{width:"100%",height:"100%",$$slots:{default:[ns]},$$scope:{ctx:i}}}),{c(){e=O("div"),j(t.$$.fragment),g(e,"class","container svelte-1es34mx"),L(e,"width",i[0]?"100%":void 0)},m(r,l){k(r,e,l),V(t,e,null),n=!0},p(r,[l]){const s={};l&4&&(s.$$scope={dirty:l,ctx:r}),t.$set(s),l&1&&L(e,"width",r[0]?"100%":void 0)},i(r){n||(v(t.$$.fragment,r),n=!0)},o(r){y(t.$$.fragment,r),n=!1},d(r){r&&w(e),B(t)}}}function rs(i,e,t){let{$$slots:n={},$$scope:r}=e,{fullWidth:l=!1}=e;return i.$$set=s=>{"fullWidth"in s&&t(0,l=s.fullWidth),"$$scope"in s&&t(2,r=s.$$scope)},[l,n,r]}class cn extends le{constructor(e){super(),re(this,e,rs,is,ie,{fullWidth:0})}}function ai(i){let e,t,n,r;const l=i[5].default,s=Ue(l,i,i[4],null);return{c(){e=O("div"),s&&s.c(),g(e,"id",t=`${i[1]}-body`),g(e,"class","body svelte-k6fapt")},m(o,a){k(o,e,a),s&&s.m(e,null),r=!0},p(o,a){s&&s.p&&(!r||a&16)&&Ye(s,l,o,o[4],r?He(l,o[4],a,null):ze(o[4]),null),(!r||a&2&&t!==(t=`${o[1]}-body`))&&g(e,"id",t)},i(o){r||(v(s,o),o&&be(()=>{r&&(n||(n=et(e,dt,{duration:300},!0)),n.run(1))}),r=!0)},o(o){y(s,o),o&&(n||(n=et(e,dt,{duration:300},!1)),n.run(0)),r=!1},d(o){o&&w(e),s&&s.d(o),o&&n&&n.end()}}}function ls(i){let e,t,n,r,l,s,o,a,u,c,f,d,m,p,h,_=i[2]&&ai(i);return{c(){e=O("div"),t=O("button"),n=O("h3"),r=te(i[0]),l=H(),s=O("div"),o=Te("svg"),a=Te("path"),d=H(),_&&_.c(),g(n,"class","svelte-k6fapt"),g(a,"d","M15 18l-6-6 6-6"),g(o,"class",u=_n(i[2]?"rotated":"")+" svelte-k6fapt"),g(o,"xmlns","http://www.w3.org/2000/svg"),g(o,"width","24"),g(o,"height","24"),g(o,"viewBox","0 0 24 24"),g(o,"fill","none"),g(o,"stroke","currentColor"),g(o,"stroke-width","2"),g(o,"stroke-linecap","round"),g(o,"stroke-linejoin","round"),g(s,"class","arrow-container svelte-k6fapt"),g(t,"class","heading svelte-k6fapt"),g(t,"title",c=i[2]?"Collapse section":"Expand section"),g(t,"aria-expanded",i[2]),g(t,"aria-controls",f=`${i[1]}-body`),g(e,"class","section svelte-k6fapt")},m(S,M){k(S,e,M),D(e,t),D(t,n),D(n,r),D(t,l),D(t,s),D(s,o),D(o,a),D(e,d),_&&_.m(e,null),m=!0,p||(h=K(t,"click",i[3]),p=!0)},p(S,[M]){(!m||M&1)&&Ae(r,S[0]),(!m||M&4&&u!==(u=_n(S[2]?"rotated":"")+" svelte-k6fapt"))&&g(o,"class",u),(!m||M&4&&c!==(c=S[2]?"Collapse section":"Expand section"))&&g(t,"title",c),(!m||M&4)&&g(t,"aria-expanded",S[2]),(!m||M&2&&f!==(f=`${S[1]}-body`))&&g(t,"aria-controls",f),S[2]?_?(_.p(S,M),M&4&&v(_,1)):(_=ai(S),_.c(),v(_,1),_.m(e,null)):_&&($(),y(_,1,1,()=>{_=null}),x())},i(S){m||(v(_),m=!0)},o(S){y(_),m=!1},d(S){S&&w(e),_&&_.d(),p=!1,h()}}}function ss(i,e,t){let{$$slots:n={},$$scope:r}=e,{title:l}=e,{name:s}=e;const o=`${s}-expanded`;let a=!0;localStorage.getItem(o)?a=localStorage.getItem(o)==String(!0):a=!0;const u=()=>{t(2,a=!a),s&&localStorage.setItem(o,String(a))};return i.$$set=c=>{"title"in c&&t(0,l=c.title),"name"in c&&t(1,s=c.name),"$$scope"in c&&t(4,r=c.$$scope)},[l,s,a,u,r,n]}class dn extends le{constructor(e){super(),re(this,e,ss,ls,ie,{title:0,name:1})}}function ui(i,e,t){const n=i.slice();return n[8]=e[t][0],n[9]=e[t][1],n}function fi(i){let e,t,n;function r(){return i[6](i[9])}function l(o){i[7](o)}let s={getComponent:r,removeComponent:fs,$$slots:{default:[os]},$$scope:{ctx:i}};return i[3].openedSequence!==void 0&&(s.sequence=i[3].openedSequence),e=new pr({props:s}),oe.push(()=>_e(e,"sequence",l)),{c(){j(e.$$.fragment)},m(o,a){V(e,o,a),n=!0},p(o,a){i=o;const u={};a&4&&(u.getComponent=r),a&4108&&(u.$$scope={dirty:a,ctx:i}),!t&&a&8&&(t=!0,u.sequence=i[3].openedSequence,ge(()=>t=!1)),e.$set(u)},i(o){n||(v(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){B(e,o)}}}function os(i){let e,t=i[9].name+"",n,r;return{c(){e=O("div"),n=te(t),r=H(),g(e,"class","component svelte-fh7wct"),Ne(e,"disabled",i[3].openedSequence===void 0),L(e,"background-color",`hsl(${i[9].hue}deg var(--component-saturation) var(--component-lightness))`)},m(l,s){k(l,e,s),D(e,n),k(l,r,s)},p(l,s){s&4&&t!==(t=l[9].name+"")&&Ae(n,t),s&8&&Ne(e,"disabled",l[3].openedSequence===void 0),s&4&&L(e,"background-color",`hsl(${l[9].hue}deg var(--component-saturation) var(--component-lightness))`)},d(l){l&&(w(e),w(r))}}}function ci(i,e){let t,n=!(e[9]instanceof Pe&&(e[9]===e[3].openedSequence||e[4].includes(e[9])||(e[9].getDuration(!1)??0)===0)),r,l,s=n&&fi(e);return{key:i,first:null,c(){t=Z(),s&&s.c(),r=Z(),this.first=t},m(o,a){k(o,t,a),s&&s.m(o,a),k(o,r,a),l=!0},p(o,a){e=o,a&28&&(n=!(e[9]instanceof Pe&&(e[9]===e[3].openedSequence||e[4].includes(e[9])||(e[9].getDuration(!1)??0)===0))),n?s?(s.p(e,a),a&28&&v(s,1)):(s=fi(e),s.c(),v(s,1),s.m(r.parentNode,r)):s&&($(),y(s,1,1,()=>{s=null}),x())},i(o){l||(v(s),l=!0)},o(o){y(s),l=!1},d(o){o&&(w(t),w(r)),s&&s.d(o)}}}function as(i){let e=[],t=new Map,n,r,l=Q(i[2].children.entries());const s=o=>o[8];for(let o=0;o<l.length;o+=1){let a=ui(i,l,o),u=s(a);t.set(u,e[o]=ci(u,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=Z()},m(o,a){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(o,a);k(o,n,a),r=!0},p(o,a){a&60&&(l=Q(o[2].children.entries()),$(),e=Qe(e,a,s,1,o,l,t,n.parentNode,$e,ci,n,ui),x())},i(o){if(!r){for(let a=0;a<l.length;a+=1)v(e[a]);r=!0}},o(o){for(let a=0;a<e.length;a+=1)y(e[a]);r=!1},d(o){o&&w(n);for(let a=0;a<e.length;a+=1)e[a].d(o)}}}function us(i){let e,t;return e=new dn({props:{title:i[0],name:i[1],$$slots:{default:[as]},$$scope:{ctx:i}}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},p(n,[r]){const l={};r&1&&(l.title=n[0]),r&2&&(l.name=n[1]),r&4124&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}const fs=()=>{};function cs(i,e,t){let n,r;de(i,fe,f=>t(3,r=f));let{title:l}=e,{name:s}=e,{manager:o}=e;function a(f){if(r.openedSequence===void 0)return;const d=new Ot({start:r.openedSequence.isAbsolute?new Date().getTime()/1e3:0,repetitions:1,interval:5},["start","repetitions","interval"],void 0,void 0,void 0,r.openedSequence.isAbsolute?"YYYY-MM-DD HH:MM:SS":"seconds");if(f instanceof De)return new ht(f.newState(),d,Ce.Coincide);if(f instanceof Pe)return new ht(f,d,Ce.Coincide)}const u=f=>a(f);function c(f){i.$$.not_equal(r.openedSequence,f)&&(r.openedSequence=f,fe.set(r))}return i.$$set=f=>{"title"in f&&t(0,l=f.title),"name"in f&&t(1,s=f.name),"manager"in f&&t(2,o=f.manager)},i.$$.update=()=>{var f;i.$$.dirty&8&&t(4,n=((f=r.openedSequence)==null?void 0:f.getDependants())??[])},[l,s,o,r,n,a,u,c]}class Ht extends le{constructor(e){super(),re(this,e,cs,us,ie,{title:0,name:1,manager:2})}}const ds=i=>({toggleDropdown:i&64}),di=i=>({toggleDropdown:i[6]});function hs(i){let e,t,n,r,l,s,o;return{c(){e=O("button"),t=te(i[2]),n=H(),r=Te("svg"),l=Te("path"),g(l,"d","M6 9l6 6 6-6"),g(r,"xmlns","http://www.w3.org/2000/svg"),g(r,"width","1.3em"),g(r,"height","1.3em"),g(r,"viewBox","0 0 24 24"),g(r,"fill","none"),g(r,"stroke","currentColor"),g(r,"stroke-width","2"),g(r,"stroke-linecap","round"),g(r,"stroke-linejoin","round"),g(e,"slot","button"),g(e,"title",i[1]),g(e,"class","select-dropdown-button svelte-1w71hwl"),e.disabled=i[3]},m(a,u){k(a,e,u),D(e,t),D(e,n),D(e,r),D(r,l),s||(o=K(e,"click",function(){Xe(i[6])&&i[6].apply(this,arguments)}),s=!0)},p(a,u){i=a,u&4&&Ae(t,i[2]),u&2&&g(e,"title",i[1]),u&8&&(e.disabled=i[3])},d(a){a&&w(e),s=!1,o()}}}function ms(i){let e;const t=i[4].buttons,n=Ue(t,i,i[5],di);return{c(){n&&n.c()},m(r,l){n&&n.m(r,l),e=!0},p(r,l){n&&n.p&&(!e||l&96)&&Ye(n,t,r,r[5],e?He(t,r[5],l,ds):ze(r[5]),di)},i(r){e||(v(n,r),e=!0)},o(r){y(n,r),e=!1},d(r){n&&n.d(r)}}}function ps(i){let e,t,n,r,l;return r=new ln({props:{fullWidth:!0,lighter:!0,$$slots:{buttons:[ms,({toggleDropdown:s})=>({6:s}),({toggleDropdown:s})=>s?64:0],button:[hs,({toggleDropdown:s})=>({6:s}),({toggleDropdown:s})=>s?64:0]},$$scope:{ctx:i}}}),{c(){e=O("div"),t=te(i[0]),n=te(`:\r
  `),j(r.$$.fragment),g(e,"class","select-dropdown svelte-1w71hwl")},m(s,o){k(s,e,o),D(e,t),D(e,n),V(r,e,null),l=!0},p(s,[o]){(!l||o&1)&&Ae(t,s[0]);const a={};o&110&&(a.$$scope={dirty:o,ctx:s}),r.$set(a)},i(s){l||(v(r.$$.fragment,s),l=!0)},o(s){y(r.$$.fragment,s),l=!1},d(s){s&&w(e),B(r)}}}function gs(i,e,t){let{$$slots:n={},$$scope:r}=e,{label:l}=e,{buttonTitle:s}=e,{dropdownText:o}=e,{disabled:a=!1}=e;return i.$$set=u=>{"label"in u&&t(0,l=u.label),"buttonTitle"in u&&t(1,s=u.buttonTitle),"dropdownText"in u&&t(2,o=u.dropdownText),"disabled"in u&&t(3,a=u.disabled),"$$scope"in u&&t(5,r=u.$$scope)},[l,s,o,a,n,r]}class St extends le{constructor(e){super(),re(this,e,gs,ps,ie,{label:0,buttonTitle:1,dropdownText:2,disabled:3})}}function hi(i,e,t){const n=i.slice();return n[12]=e[t],n}function mi(i,e,t){const n=i.slice();return n[16]=e[t],n}function _s(i){let e,t,n;function r(o,a){if(o[3]instanceof Ge)return Ms;if(o[3]instanceof kt)return Ss;if(typeof o[1].value=="number")return ks;if(typeof o[1].value=="string")return ws;if(typeof o[1].value=="boolean")return vs}let l=r(i),s=l&&l(i);return{c(){e=O("label"),t=O("div"),t.textContent=`${i[3].name}:`,n=H(),s&&s.c(),g(t,"class","label svelte-1san4q5"),g(e,"class","horizontal")},m(o,a){k(o,e,a),D(e,t),D(e,n),s&&s.m(e,null)},p(o,a){l===(l=r(o))&&s?s.p(o,a):(s&&s.d(1),s=l&&l(o),s&&(s.c(),s.m(e,null)))},i:ne,o:ne,d(o){o&&w(e),s&&s.d()}}}function bs(i){let e,t;return e=new St({props:{label:i[3].name,buttonTitle:`Options for ${i[3].name}`,dropdownText:i[1].parameter.getDisplayValue(i[1].value).toString(),$$slots:{buttons:[ys,({toggleDropdown:n})=>({15:n}),({toggleDropdown:n})=>n?32768:0]},$$scope:{ctx:i}}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},p(n,r){const l={};r&2&&(l.dropdownText=n[1].parameter.getDisplayValue(n[1].value).toString()),r&557058&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function vs(i){let e,t,n,r;return{c(){e=O("input"),g(e,"type","checkbox"),e.checked=t=i[1].value},m(l,s){k(l,e,s),n||(r=K(e,"change",i[10]),n=!0)},p(l,s){s&2&&t!==(t=l[1].value)&&(e.checked=t)},d(l){l&&w(e),n=!1,r()}}}function ws(i){let e,t,n,r;return{c(){e=O("input"),g(e,"type","text"),e.value=t=i[1].value,g(e,"placeholder",`Value of ${i[3].name}`)},m(l,s){k(l,e,s),n||(r=K(e,"change",i[9]),n=!0)},p(l,s){s&2&&t!==(t=l[1].value)&&e.value!==t&&(e.value=t)},d(l){l&&w(e),n=!1,r()}}}function ks(i){let e,t,n,r;return{c(){e=O("input"),g(e,"type","number"),e.value=t=i[1].value,g(e,"placeholder",`Value of ${i[3].name}`)},m(l,s){k(l,e,s),n||(r=K(e,"change",i[8]),n=!0)},p(l,s){s&2&&t!==(t=l[1].value)&&e.value!==t&&(e.value=t)},d(l){l&&w(e),n=!1,r()}}}function Ss(i){let e,t,n,r;return{c(){e=O("input"),g(e,"type","text"),g(e,"minlength",i[3].minLength),g(e,"maxlength",i[3].maxLength),e.value=t=i[1].value,g(e,"placeholder",`Value of ${i[3].name}`)},m(l,s){k(l,e,s),n||(r=K(e,"change",i[7]),n=!0)},p(l,s){s&2&&t!==(t=l[1].value)&&e.value!==t&&(e.value=t)},d(l){l&&w(e),n=!1,r()}}}function Ms(i){let e,t,n,r=(i[3].unit??"")+"",l,s,o;return{c(){e=O("input"),n=H(),l=te(r),g(e,"type","number"),g(e,"step",i[3].step),g(e,"min",i[3].min),g(e,"max",i[3].max),e.value=t=i[1].value,g(e,"placeholder",`Value of ${i[3].name}`)},m(a,u){k(a,e,u),k(a,n,u),k(a,l,u),s||(o=K(e,"change",i[6]),s=!0)},p(a,u){u&2&&t!==(t=a[1].value)&&e.value!==t&&(e.value=t)},d(a){a&&(w(e),w(n),w(l)),s=!1,o()}}}function pi(i){let e,t,n;function r(){return i[5](i[16],i[15])}return{c(){e=O("button"),e.textContent=`${i[3].getDisplayValue(i[16])} `},m(l,s){k(l,e,s),t||(n=K(e,"click",r),t=!0)},p(l,s){i=l},d(l){l&&w(e),t=!1,n()}}}function gi(i){let e,t=i[1].value!==i[16]&&pi(i);return{c(){t&&t.c(),e=Z()},m(n,r){t&&t.m(n,r),k(n,e,r)},p(n,r){n[1].value!==n[16]?t?t.p(n,r):(t=pi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&w(e),t&&t.d(n)}}}function ys(i){let e,t=Q(i[3].nested.keys()),n=[];for(let r=0;r<t.length;r+=1)n[r]=gi(mi(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Z()},m(r,l){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(r,l);k(r,e,l)},p(r,l){if(l&32794){t=Q(r[3].nested.keys());let s;for(s=0;s<t.length;s+=1){const o=mi(r,t,s);n[s]?n[s].p(o,l):(n[s]=gi(o),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(r){r&&w(e),je(n,r)}}}function _i(i){let e,t=[],n=new Map,r,l=Q(i[3].nested.get(i[1].value)??[]);const s=o=>o[12].id;for(let o=0;o<l.length;o+=1){let a=hi(i,l,o),u=s(a);n.set(u,t[o]=bi(u,a))}return{c(){e=O("div");for(let o=0;o<t.length;o+=1)t[o].c();g(e,"class","nested svelte-1san4q5")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);r=!0},p(o,a){a&15&&(l=Q(o[3].nested.get(o[1].value)??[]),$(),t=Qe(t,a,s,1,o,l,n,e,$e,bi,null,hi),x())},i(o){if(!r){for(let a=0;a<l.length;a+=1)v(t[a]);r=!0}},o(o){for(let a=0;a<t.length;a+=1)y(t[a]);r=!1},d(o){o&&w(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function bi(i,e){let t,n,r;return n=new gr({props:{actionState:e[0],parameterState:e[2](e[0],e[12]),getParameterState:e[2]}}),{key:i,first:null,c(){t=Z(),j(n.$$.fragment),this.first=t},m(l,s){k(l,t,s),V(n,l,s),r=!0},p(l,s){e=l;const o={};s&1&&(o.actionState=e[0]),s&7&&(o.parameterState=e[2](e[0],e[12])),s&4&&(o.getParameterState=e[2]),n.$set(o)},i(l){r||(v(n.$$.fragment,l),r=!0)},o(l){y(n.$$.fragment,l),r=!1},d(l){l&&w(t),B(n,l)}}}function Os(i){let e,t,n,r,l=i[3]instanceof Ie&&(i[3].nested.get(i[1].value)??[]).length>0,s;const o=[bs,_s],a=[];function u(f,d){return f[3]instanceof Ie?0:1}t=u(i),n=a[t]=o[t](i);let c=l&&_i(i);return{c(){e=O("div"),n.c(),r=H(),c&&c.c(),g(e,"class","container svelte-1san4q5")},m(f,d){k(f,e,d),a[t].m(e,null),D(e,r),c&&c.m(e,null),s=!0},p(f,[d]){n.p(f,d),d&2&&(l=f[3]instanceof Ie&&(f[3].nested.get(f[1].value)??[]).length>0),l?c?(c.p(f,d),d&2&&v(c,1)):(c=_i(f),c.c(),v(c,1),c.m(e,null)):c&&($(),y(c,1,1,()=>{c=null}),x())},i(f){s||(v(n),v(c),s=!0)},o(f){y(n),y(c),s=!1},d(f){f&&w(e),a[t].d(),c&&c.d()}}}function Ds(i,e,t){let n;de(i,Le,h=>t(11,n=h));let{actionState:r}=e,{parameterState:l}=e,{getParameterState:s}=e,o=l.parameter;function a(h,_,S,M){if(_===void 0){if(S===void 0||M===void 0)return;const T=S.target;_=M(T.type==="checkbox"?T.checked:T.value)}const N=h.parameter.validate(_);if(N.error===lr.None)h.value=_,ke(Le,n++,n);else{if(S===void 0)return;const T=S.target;N.fixed?(h.value=N.fixed,T.value=String(N.fixed),ke(Le,n++,n)):T.value=String(h.value)}}const u=(h,_)=>{a(l,h),_()},c=h=>a(l,void 0,h,Number),f=h=>a(l,void 0,h,String),d=h=>a(l,void 0,h,Number),m=h=>a(l,void 0,h,String),p=h=>a(l,void 0,h,Boolean);return i.$$set=h=>{"actionState"in h&&t(0,r=h.actionState),"parameterState"in h&&t(1,l=h.parameterState),"getParameterState"in h&&t(2,s=h.getParameterState)},[r,l,s,o,a,u,c,f,d,m,p]}class gr extends le{constructor(e){super(),re(this,e,Ds,Os,ie,{actionState:0,parameterState:1,getParameterState:2})}}function vi(i,e,t){const n=i.slice();return n[3]=e[t],n}function wi(i){let e,t,n,r;const l=[qs,Ns],s=[];function o(a,u){return a[0].child instanceof Pe?0:a[0].child instanceof tt?1:-1}return~(e=o(i))&&(t=s[e]=l[e](i)),{c(){t&&t.c(),n=Z()},m(a,u){~e&&s[e].m(a,u),k(a,n,u),r=!0},p(a,u){let c=e;e=o(a),e===c?~e&&s[e].p(a,u):(t&&($(),y(s[c],1,1,()=>{s[c]=null}),x()),~e?(t=s[e],t?t.p(a,u):(t=s[e]=l[e](a),t.c()),v(t,1),t.m(n.parentNode,n)):t=null)},i(a){r||(v(t),r=!0)},o(a){y(t),r=!1},d(a){a&&w(n),~e&&s[e].d(a)}}}function Ns(i){let e,t,n,r;const l=[Ts,Cs],s=[];function o(a,u){return a[0].child.action.parameters.length===0?0:1}return e=o(i),t=s[e]=l[e](i),{c(){t.c(),n=Z()},m(a,u){s[e].m(a,u),k(a,n,u),r=!0},p(a,u){let c=e;e=o(a),e===c?s[e].p(a,u):($(),y(s[c],1,1,()=>{s[c]=null}),x(),t=s[e],t?t.p(a,u):(t=s[e]=l[e](a),t.c()),v(t,1),t.m(n.parentNode,n))},i(a){r||(v(t),r=!0)},o(a){y(t),r=!1},d(a){a&&w(n),s[e].d(a)}}}function qs(i){let e;return{c(){e=te("Sequence has no parameters.")},m(t,n){k(t,e,n)},p:ne,i:ne,o:ne,d(t){t&&w(e)}}}function Cs(i){let e,t,n=Q(i[0].child.action.parameters),r=[];for(let s=0;s<n.length;s+=1)r[s]=ki(vi(i,n,s));const l=s=>y(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Z()},m(s,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,o);k(s,e,o),t=!0},p(s,o){if(o&1){n=Q(s[0].child.action.parameters);let a;for(a=0;a<n.length;a+=1){const u=vi(s,n,a);r[a]?(r[a].p(u,o),v(r[a],1)):(r[a]=ki(u),r[a].c(),v(r[a],1),r[a].m(e.parentNode,e))}for($(),a=n.length;a<r.length;a+=1)l(a);x()}},i(s){if(!t){for(let o=0;o<n.length;o+=1)v(r[o]);t=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)y(r[o]);t=!1},d(s){s&&w(e),je(r,s)}}}function Ts(i){let e;return{c(){e=te("Action has no parameters.")},m(t,n){k(t,e,n)},p:ne,i:ne,o:ne,d(t){t&&w(e)}}}function ki(i){let e,t;return e=new gr({props:{actionState:i[0].child,parameterState:Wt(i[0].child,i[3]),getParameterState:Wt}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},p(n,r){const l={};r&1&&(l.actionState=n[0].child),r&1&&(l.parameterState=Wt(n[0].child,n[3])),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Is(i){let e,t,n=i[0]!==void 0&&wi(i);return{c(){n&&n.c(),e=Z()},m(r,l){n&&n.m(r,l),k(r,e,l),t=!0},p(r,l){r[0]!==void 0?n?(n.p(r,l),l&1&&v(n,1)):(n=wi(r),n.c(),v(n,1),n.m(e.parentNode,e)):n&&($(),y(n,1,1,()=>{n=null}),x())},i(r){t||(v(n),t=!0)},o(r){y(n),t=!1},d(r){r&&w(e),n&&n.d(r)}}}function Es(i){let e,t;return e=new dn({props:{title:"Parameters",name:"properties-parameters",$$slots:{default:[Is]},$$scope:{ctx:i}}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},p(n,[r]){const l={};r&65&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function As(i,e){if(e!==void 0)return i.get(e)}function Wt(i,e){const t=i.parameterStates.get(e.id);if(t===void 0)throw new Error(`ParameterState does not exist for Parameter with ID ${e.id}`);return t}function Ps(i,e,t){let n,r;de(i,fe,s=>t(1,n=s)),de(i,pt,s=>t(2,r=s));let l;return i.$$.update=()=>{i.$$.dirty&6&&t(0,l=As(r,n.openedSequence))},[l,n,r]}class hn extends le{constructor(e){super(),re(this,e,Ps,Es,ie,{})}}function Si(i,e,t){const n=i.slice();return n[26]=e[t],n}function Mi(i,e,t){const n=i.slice();return n[26]=e[t],n}function yi(i,e,t){const n=i.slice();return n[26]=e[t],n}function Oi(i,e,t){const n=i.slice();return n[33]=e[t],n[35]=t,n}function Di(i,e,t){const n=i.slice();return n[26]=e[t],n}function Ni(i,e,t){const n=i.slice();return n[38]=e[t][0],n[39]=e[t][1],n}function qi(i){let e,t,n,r,l,s,o,a,u,c,f,d,m,p,h,_=[],S=new Map,M,N,T,b,J,Y,q,C,I,U=Q(Object.entries(i[2].constraints)),P=[];for(let E=0;E<U.length;E+=1)P[E]=Ci(Ni(i,U,E));let W=i[0].child instanceof Pe&&Ti(i),G=Q({length:3});const ae=E=>[E[35],E[1]];for(let E=0;E<G.length;E+=1){let R=Oi(i,G,E),ee=ae(R);S.set(ee,_[E]=Ai(ee,R))}return N=new St({props:{label:"Time unit",buttonTitle:"Time unit options",dropdownText:i[0].props.unit,$$slots:{buttons:[Us,({toggleDropdown:E})=>({25:E}),({toggleDropdown:E})=>[E?33554432:0]]},$$scope:{ctx:i}}}),b=new St({props:{label:"Duration unit",buttonTitle:"Duration unit options",dropdownText:i[0].props.durationUnit,$$slots:{buttons:[Hs,({toggleDropdown:E})=>({25:E}),({toggleDropdown:E})=>[E?33554432:0]]},$$scope:{ctx:i}}}),Y=new St({props:{label:"Layering mode",buttonTitle:"Layering mode options",dropdownText:Ce[i[0].layerMode],$$slots:{buttons:[Ys,({toggleDropdown:E})=>({25:E}),({toggleDropdown:E})=>[E?33554432:0]]},$$scope:{ctx:i}}}),{c(){var E,R;for(let ee=0;ee<P.length;ee+=1)P[ee].c();e=H(),t=O("div"),n=O("label"),r=O("input"),o=te(`\r
        Interval includes child duration`),a=H(),u=O("label"),c=O("input"),m=te(`\r
        Include trailing interval`),p=H(),W&&W.c(),h=H();for(let ee=0;ee<_.length;ee+=1)_[ee].c();M=H(),j(N.$$.fragment),T=H(),j(b.$$.fragment),J=H(),j(Y.$$.fragment),g(r,"type","checkbox"),r.checked=l=i[2].includeChildDuration,r.disabled=s=((E=i[7]("includeChildDuration",!i[2].includeChildDuration))==null?void 0:E.error)!==We.None,g(n,"class","horizontal svelte-1i5tlk4"),g(c,"type","checkbox"),c.checked=f=i[2].trailingInterval,c.disabled=d=((R=i[7]("trailingInterval",!i[2].includeChildDuration))==null?void 0:R.error)!==We.None,g(u,"class","horizontal svelte-1i5tlk4"),g(t,"class","boolean-options svelte-1i5tlk4")},m(E,R){for(let ee=0;ee<P.length;ee+=1)P[ee]&&P[ee].m(E,R);k(E,e,R),k(E,t,R),D(t,n),D(n,r),D(n,o),D(t,a),D(t,u),D(u,c),D(u,m),D(t,p),W&&W.m(t,null),k(E,h,R);for(let ee=0;ee<_.length;ee+=1)_[ee]&&_[ee].m(E,R);k(E,M,R),V(N,E,R),k(E,T,R),V(b,E,R),k(E,J,R),V(Y,E,R),q=!0,C||(I=[K(r,"change",i[17]),K(c,"change",i[18])],C=!0)},p(E,R){var he,me;if(R[0]&8727){U=Q(Object.entries(E[2].constraints));let ue;for(ue=0;ue<U.length;ue+=1){const ye=Ni(E,U,ue);P[ue]?P[ue].p(ye,R):(P[ue]=Ci(ye),P[ue].c(),P[ue].m(e.parentNode,e))}for(;ue<P.length;ue+=1)P[ue].d(1);P.length=U.length}(!q||R[0]&4&&l!==(l=E[2].includeChildDuration))&&(r.checked=l),(!q||R[0]&4&&s!==(s=((he=E[7]("includeChildDuration",!E[2].includeChildDuration))==null?void 0:he.error)!==We.None))&&(r.disabled=s),(!q||R[0]&4&&f!==(f=E[2].trailingInterval))&&(c.checked=f),(!q||R[0]&4&&d!==(d=((me=E[7]("trailingInterval",!E[2].includeChildDuration))==null?void 0:me.error)!==We.None))&&(c.disabled=d),E[0].child instanceof Pe?W?W.p(E,R):(W=Ti(E),W.c(),W.m(t,null)):W&&(W.d(1),W=null),R[0]&33555042&&(G=Q({length:3}),$(),_=Qe(_,R,ae,1,E,G,S,M.parentNode,$e,Ai,M,Oi),x());const ee={};R[0]&1&&(ee.dropdownText=E[0].props.unit),R[0]&33554433|R[1]&2048&&(ee.$$scope={dirty:R,ctx:E}),N.$set(ee);const X={};R[0]&1&&(X.dropdownText=E[0].props.durationUnit),R[0]&33554433|R[1]&2048&&(X.$$scope={dirty:R,ctx:E}),b.$set(X);const we={};R[0]&1&&(we.dropdownText=Ce[E[0].layerMode]),R[0]&33554441|R[1]&2048&&(we.$$scope={dirty:R,ctx:E}),Y.$set(we)},i(E){if(!q){for(let R=0;R<G.length;R+=1)v(_[R]);v(N.$$.fragment,E),v(b.$$.fragment,E),v(Y.$$.fragment,E),q=!0}},o(E){for(let R=0;R<_.length;R+=1)y(_[R]);y(N.$$.fragment,E),y(b.$$.fragment,E),y(Y.$$.fragment,E),q=!1},d(E){E&&(w(e),w(t),w(h),w(M),w(T),w(J)),je(P,E),W&&W.d();for(let R=0;R<_.length;R+=1)_[R].d(E);B(N,E),B(b,E),B(Y,E),C=!1,ve(I)}}}function Ci(i){let e,t=i[9](i[38])+"",n,r,l,s,o,a,u,c,f,d,m=i[13](i[38])+"",p,h,_;function S(...M){return i[16](i[38],...M)}return{c(){e=O("label"),n=te(t),r=te(`:\r
        `),l=O("input"),d=H(),p=te(m),g(l,"type",s=i[0].props.isUnitNumeric(i[38])?"number":"text"),g(l,"step",o=i[0].props.isUnitNumeric(i[38])?"any":void 0),g(l,"min",a=i[0].props.isUnitNumeric(i[38])?0:void 0),l.value=u=i[0].props.toUnitString(i[39],i[38]),l.disabled=c=!i[1].includes(i[38]),g(l,"placeholder",f=i[38]==="repetitions"?"Number of repetitions":`${i[9](i[38])}${i[38]==="start"||i[38]==="end"?" time":""} in ${i[13](i[38],!0)}`),g(e,"class","horizontal")},m(M,N){k(M,e,N),D(e,n),D(e,r),D(e,l),D(e,d),D(e,p),h||(_=K(l,"change",S),h=!0)},p(M,N){i=M,N[0]&4&&t!==(t=i[9](i[38])+"")&&Ae(n,t),N[0]&5&&s!==(s=i[0].props.isUnitNumeric(i[38])?"number":"text")&&g(l,"type",s),N[0]&5&&o!==(o=i[0].props.isUnitNumeric(i[38])?"any":void 0)&&g(l,"step",o),N[0]&5&&a!==(a=i[0].props.isUnitNumeric(i[38])?0:void 0)&&g(l,"min",a),N[0]&5&&u!==(u=i[0].props.toUnitString(i[39],i[38]))&&l.value!==u&&(l.value=u),N[0]&6&&c!==(c=!i[1].includes(i[38]))&&(l.disabled=c),N[0]&4&&f!==(f=i[38]==="repetitions"?"Number of repetitions":`${i[9](i[38])}${i[38]==="start"||i[38]==="end"?" time":""} in ${i[13](i[38],!0)}`)&&g(l,"placeholder",f),N[0]&4&&m!==(m=i[13](i[38])+"")&&Ae(p,m)},d(M){M&&w(e),h=!1,_()}}}function Ti(i){let e,t,n,r,l,s,o;return{c(){var a;e=O("label"),t=O("input"),l=te(`\r
          Keep leading space`),g(t,"type","checkbox"),t.checked=n=i[2].keepLeading,t.disabled=r=((a=i[7]("keepLeading",!i[2].keepLeading))==null?void 0:a.error)!==We.None,g(e,"class","horizontal svelte-1i5tlk4")},m(a,u){k(a,e,u),D(e,t),D(e,l),s||(o=K(t,"change",i[19]),s=!0)},p(a,u){var c;u[0]&4&&n!==(n=a[2].keepLeading)&&(t.checked=n),u[0]&4&&r!==(r=((c=a[7]("keepLeading",!a[2].keepLeading))==null?void 0:c.error)!==We.None)&&(t.disabled=r)},d(a){a&&w(e),s=!1,o()}}}function Ii(i){let e,t,n;function r(){return i[20](i[26],i[35],i[25])}return{c(){e=O("button"),e.textContent=`${i[9](i[26])}`},m(l,s){k(l,e,s),t||(n=K(e,"click",r),t=!0)},p(l,s){i=l},d(l){l&&w(e),t=!1,n()}}}function Ei(i,e){let t,n,r=e[1][e[35]]!==e[26]&&Ii(e);return{key:i,first:null,c(){t=Z(),r&&r.c(),n=Z(),this.first=t},m(l,s){k(l,t,s),r&&r.m(l,s),k(l,n,s)},p(l,s){e=l,e[1][e[35]]!==e[26]?r?r.p(e,s):(r=Ii(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(l){l&&(w(t),w(n)),r&&r.d(l)}}}function Ls(i){let e=[],t=new Map,n,r=Q(i[5](i[35]));const l=s=>[s[26],s[1]];for(let s=0;s<r.length;s+=1){let o=Di(i,r,s),a=l(o);t.set(a,e[s]=Ei(a,o))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();n=Z()},m(s,o){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(s,o);k(s,n,o)},p(s,o){o[0]&33555042&&(r=Q(s[5](s[35])),e=Qe(e,o,l,1,s,r,t,n.parentNode,Ur,Ei,n,Di))},d(s){s&&w(n);for(let o=0;o<e.length;o+=1)e[o].d(s)}}}function Ai(i,e){let t,n,r;return n=new St({props:{label:`Constraint ${e[35]+1}`,buttonTitle:`Constraint ${e[35]+1} options`,dropdownText:e[9](e[1][e[35]]),disabled:e[5](e[35]).length<=1,$$slots:{buttons:[Ls,({toggleDropdown:l})=>({25:l}),({toggleDropdown:l})=>[l?33554432:0]]},$$scope:{ctx:e}}}),{key:i,first:null,c(){t=Z(),j(n.$$.fragment),this.first=t},m(l,s){k(l,t,s),V(n,l,s),r=!0},p(l,s){e=l;const o={};s[0]&2&&(o.dropdownText=e[9](e[1][e[35]])),s[0]&33554434|s[1]&2048&&(o.$$scope={dirty:s,ctx:e}),n.$set(o)},i(l){r||(v(n.$$.fragment,l),r=!0)},o(l){y(n.$$.fragment,l),r=!1},d(l){l&&w(t),B(n,l)}}}function Pi(i){let e,t,n;function r(){return i[21](i[26],i[25])}return{c(){e=O("button"),e.textContent=`${i[26]}`},m(l,s){k(l,e,s),t||(n=K(e,"click",r),t=!0)},p(l,s){i=l},d(l){l&&w(e),t=!1,n()}}}function Li(i){let e,t=i[0].props.unit!==i[26]&&Pi(i);return{c(){t&&t.c(),e=Z()},m(n,r){t&&t.m(n,r),k(n,e,r)},p(n,r){n[0].props.unit!==n[26]?t?t.p(n,r):(t=Pi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&w(e),t&&t.d(n)}}}function Us(i){let e,t=Q(i[10]()),n=[];for(let r=0;r<t.length;r+=1)n[r]=Li(yi(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Z()},m(r,l){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(r,l);k(r,e,l)},p(r,l){if(l[0]&33557505){t=Q(r[10]());let s;for(s=0;s<t.length;s+=1){const o=yi(r,t,s);n[s]?n[s].p(o,l):(n[s]=Li(o),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(r){r&&w(e),je(n,r)}}}function Ui(i){let e,t,n;function r(){return i[22](i[26],i[25])}return{c(){e=O("button"),e.textContent=`${i[26]}`},m(l,s){k(l,e,s),t||(n=K(e,"click",r),t=!0)},p(l,s){i=l},d(l){l&&w(e),t=!1,n()}}}function Hi(i){let e,t=i[0].props.durationUnit!==i[26]&&Ui(i);return{c(){t&&t.c(),e=Z()},m(n,r){t&&t.m(n,r),k(n,e,r)},p(n,r){n[0].props.durationUnit!==n[26]?t?t.p(n,r):(t=Ui(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&w(e),t&&t.d(n)}}}function Hs(i){let e,t=Q(Fi()),n=[];for(let r=0;r<t.length;r+=1)n[r]=Hi(Mi(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Z()},m(r,l){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(r,l);k(r,e,l)},p(r,l){if(l[0]&33558529){t=Q(Fi());let s;for(s=0;s<t.length;s+=1){const o=Mi(r,t,s);n[s]?n[s].p(o,l):(n[s]=Hi(o),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(r){r&&w(e),je(n,r)}}}function Yi(i){let e,t,n;function r(){return i[23](i[26],i[25])}return{c(){e=O("button"),e.textContent=`${Ce[i[26]]}`},m(l,s){k(l,e,s),t||(n=K(e,"click",r),t=!0)},p(l,s){i=l},d(l){l&&w(e),t=!1,n()}}}function zi(i){let e,t=i[0].layerMode!==i[26]&&Yi(i);return{c(){t&&t.c(),e=Z()},m(n,r){t&&t.m(n,r),k(n,e,r)},p(n,r){n[0].layerMode!==n[26]?t?t.p(n,r):(t=Yi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&w(e),t&&t.d(n)}}}function Ys(i){let e,t=Q([Ce.Override,Ce.Coincide]),n=[];for(let r=0;r<2;r+=1)n[r]=zi(Si(i,t,r));return{c(){for(let r=0;r<2;r+=1)n[r].c();e=Z()},m(r,l){for(let s=0;s<2;s+=1)n[s]&&n[s].m(r,l);k(r,e,l)},p(r,l){if(l[0]&33554441){t=Q([Ce.Override,Ce.Coincide]);let s;for(s=0;s<2;s+=1){const o=Si(r,t,s);n[s]?n[s].p(o,l):(n[s]=zi(o),n[s].c(),n[s].m(e.parentNode,e))}for(;s<2;s+=1)n[s].d(1)}},d(r){r&&w(e),je(n,r)}}}function zs(i){let e,t,n=i[0]!==void 0&&i[2]!==void 0&&qi(i);return{c(){n&&n.c(),e=Z()},m(r,l){n&&n.m(r,l),k(r,e,l),t=!0},p(r,l){r[0]!==void 0&&r[2]!==void 0?n?(n.p(r,l),l[0]&5&&v(n,1)):(n=qi(r),n.c(),v(n,1),n.m(e.parentNode,e)):n&&($(),y(n,1,1,()=>{n=null}),x())},i(r){t||(v(n),t=!0)},o(r){y(n),t=!1},d(r){r&&w(e),n&&n.d(r)}}}function Fs(i){let e,t;return e=new dn({props:{title:"Repetition",name:"properties-repitition",$$slots:{default:[zs]},$$scope:{ctx:i}}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},p(n,r){const l={};r[0]&15|r[1]&2048&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Js(i,e){if(e!==void 0)return i.get(e)}function Fi(){return["seconds","minutes","hours","HH:MM:SS"]}function Rs(i,e,t){let n,r,l;de(i,fe,P=>t(14,n=P)),de(i,Le,P=>t(3,r=P)),de(i,pt,P=>t(15,l=P));let s,o,a;function u(P,W){if(P===void 0)return;const G=s==null?void 0:s.validate();if((G==null?void 0:G.solved)!==void 0)return new Ot(G.solved,W,P.props.includeChildDuration,P.props.trailingInterval,P.props.keepLeading,P.props.unit,P.props.durationUnit)}function c(P,W){if(s===void 0||o===void 0)return;const G=s.child.getDuration(o.keepLeading);if(G===void 0)return;const ae=o.constraints[W],E=P.target,R=o.fromUnitString(E.value,W);if(E.value===""||R===void 0){E.value=o.toUnitString(ae,W);return}t(2,o.constraints[W]=R,o);const ee=o.validate(G);if(ee.error!==We.None){t(2,o.constraints[W]=ae,o),E.value=o.toUnitString(ae,W);return}ee.solved!==void 0&&t(2,o.constraints=ee.solved,o),t(0,s.props=o,s),ke(Le,r++,r)}function f(P){let W;return P===0?W=Object.keys(ut[0]):W=ut[P-1][a[P-1]],W}function d(P,W){t(1,a[W]=P,a);for(const[G,ae]of a.entries()){const E=f(G);E.includes(ae)||t(1,a[G]=E[0],a)}}function m(P,W){if(s===void 0||o===void 0)return;const G=s.child.getDuration(!1);if(G===void 0)return;const ae=o,E=ae[P];ae[P]=W;const R=ae.validate(G);return ae[P]=E,R}function p(P,W){if(s===void 0||o===void 0)return;const G=P.target,ae=m(W,G.checked);ae===void 0||ae.solved===void 0?G.checked=!G.checked:(t(2,o[W]=G.checked,o),t(2,o.constraints=ae.solved,o)),t(0,s.props=o,s),ke(Le,r++,r)}const h=P=>P[0].toUpperCase()+P.substring(1);function _(){return n.openedSequence===void 0?[]:n.openedSequence.isAbsolute?["YYYY-MM-DD HH:MM:SS","unix time"]:["seconds","minutes","hours","HH:MM:SS"]}function S(P){s===void 0||o===void 0||(t(2,o.unit=P,o),t(0,s.props=o,s))}function M(P){s===void 0||o===void 0||(t(2,o.durationUnit=P,o),t(0,s.props=o,s))}function N(P,W=!1){if(s===void 0||P==="repetitions")return"";const G=s.props.constraintUnit(P);return(G==="YYYY-MM-DD HH:MM:SS"||G==="HH:MM:SS")&&!W?"":G}const T=(P,W)=>c(W,P),b=P=>p(P,"includeChildDuration"),J=P=>p(P,"trailingInterval"),Y=P=>p(P,"keepLeading"),q=(P,W,G)=>{d(P,W),G()},C=(P,W)=>{S(P),W()},I=(P,W)=>{M(P),W()},U=(P,W)=>{s!==void 0&&(t(0,s.layerMode=P,s),ke(Le,r++,r),W())};return i.$$.update=()=>{i.$$.dirty[0]&49152&&t(0,s=Js(l,n.openedSequence)),i.$$.dirty[0]&1&&t(1,a=[...(s==null?void 0:s.props.selectedConstraints)??[]]),i.$$.dirty[0]&3&&t(2,o=u(s,a))},[s,a,o,r,c,f,d,m,p,h,_,S,M,N,n,l,T,b,J,Y,q,C,I,U]}class mn extends le{constructor(e){super(),re(this,e,Rs,Fs,ie,{},null,[-1,-1])}}function Ji(i){let e,t,n;return t=new cn({props:{$$slots:{default:[Vs]},$$scope:{ctx:i}}}),{c(){e=O("div"),j(t.$$.fragment),g(e,"class","leftPanes")},m(r,l){k(r,e,l),V(t,e,null),n=!0},p(r,l){const s={};l&517&&(s.$$scope={dirty:l,ctx:r}),t.$set(s)},i(r){n||(v(t.$$.fragment,r),n=!0)},o(r){y(t.$$.fragment,r),n=!1},d(r){r&&w(e),B(t)}}}function Ri(i){let e,t,n,r;return e=new hn({}),n=new mn({}),{c(){j(e.$$.fragment),t=H(),j(n.$$.fragment)},m(l,s){V(e,l,s),k(l,t,s),V(n,l,s),r=!0},i(l){r||(v(e.$$.fragment,l),v(n.$$.fragment,l),r=!0)},o(l){y(e.$$.fragment,l),y(n.$$.fragment,l),r=!1},d(l){l&&w(t),B(e,l),B(n,l)}}}function Vs(i){let e,t,n,r,l,s,o,a;function u(p){i[3](p)}let c={title:"Actions",name:"components-actions"};i[2].actionSet.actionManager!==void 0&&(c.manager=i[2].actionSet.actionManager),e=new Ht({props:c}),oe.push(()=>_e(e,"manager",u));function f(p){i[4](p)}let d={title:"Sequences",name:"components-sequences"};i[2].sequenceManager!==void 0&&(d.manager=i[2].sequenceManager),r=new Ht({props:d}),oe.push(()=>_e(r,"manager",f));let m=i[0]<Ut&&Ri();return{c(){j(e.$$.fragment),n=H(),j(r.$$.fragment),s=H(),m&&m.c(),o=Z()},m(p,h){V(e,p,h),k(p,n,h),V(r,p,h),k(p,s,h),m&&m.m(p,h),k(p,o,h),a=!0},p(p,h){const _={};!t&&h&4&&(t=!0,_.manager=p[2].actionSet.actionManager,ge(()=>t=!1)),e.$set(_);const S={};!l&&h&4&&(l=!0,S.manager=p[2].sequenceManager,ge(()=>l=!1)),r.$set(S),p[0]<Ut?m?h&1&&v(m,1):(m=Ri(),m.c(),v(m,1),m.m(o.parentNode,o)):m&&($(),y(m,1,1,()=>{m=null}),x())},i(p){a||(v(e.$$.fragment,p),v(r.$$.fragment,p),v(m),a=!0)},o(p){y(e.$$.fragment,p),y(r.$$.fragment,p),y(m),a=!1},d(p){p&&(w(n),w(s),w(o)),B(e,p),B(r,p),m&&m.d(p)}}}function Vi(i){let e,t,n,r;function l(a){i[5](a)}function s(a){i[6](a)}let o={};return i[2].openedSequence!==void 0&&(o.sequence=i[2].openedSequence),i[1]!==void 0&&(o.width=i[1]),e=new ts({props:o}),oe.push(()=>_e(e,"sequence",l)),oe.push(()=>_e(e,"width",s)),{c(){j(e.$$.fragment)},m(a,u){V(e,a,u),r=!0},p(a,u){const c={};!t&&u&4&&(t=!0,c.sequence=a[2].openedSequence,ge(()=>t=!1)),!n&&u&2&&(n=!0,c.width=a[1],ge(()=>n=!1)),e.$set(c)},i(a){r||(v(e.$$.fragment,a),r=!0)},o(a){y(e.$$.fragment,a),r=!1},d(a){B(e,a)}}}function Bi(i){let e,t;return e=new cn({props:{$$slots:{default:[Bs]},$$scope:{ctx:i}}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Bs(i){let e,t,n,r;return e=new hn({}),n=new mn({}),{c(){j(e.$$.fragment),t=H(),j(n.$$.fragment)},m(l,s){V(e,l,s),k(l,t,s),V(n,l,s),r=!0},i(l){r||(v(e.$$.fragment,l),v(n.$$.fragment,l),r=!0)},o(l){y(e.$$.fragment,l),y(n.$$.fragment,l),r=!1},d(l){l&&w(t),B(e,l),B(n,l)}}}function Wi(i){let e,t,n;return t=new cn({props:{fullWidth:!0,$$slots:{default:[Ws]},$$scope:{ctx:i}}}),{c(){e=O("div"),j(t.$$.fragment)},m(r,l){k(r,e,l),V(t,e,null),n=!0},p(r,l){const s={};l&516&&(s.$$scope={dirty:l,ctx:r}),t.$set(s)},i(r){n||(v(t.$$.fragment,r),n=!0)},o(r){y(t.$$.fragment,r),n=!1},d(r){r&&w(e),B(t)}}}function Ws(i){let e,t,n,r,l,s,o,a,u,c;function f(h){i[7](h)}let d={title:"Actions",name:"components-actions"};i[2].actionSet.actionManager!==void 0&&(d.manager=i[2].actionSet.actionManager),e=new Ht({props:d}),oe.push(()=>_e(e,"manager",f));function m(h){i[8](h)}let p={title:"Sequences",name:"components-sequences"};return i[2].sequenceManager!==void 0&&(p.manager=i[2].sequenceManager),r=new Ht({props:p}),oe.push(()=>_e(r,"manager",m)),o=new hn({}),u=new mn({}),{c(){j(e.$$.fragment),n=H(),j(r.$$.fragment),s=H(),j(o.$$.fragment),a=H(),j(u.$$.fragment)},m(h,_){V(e,h,_),k(h,n,_),V(r,h,_),k(h,s,_),V(o,h,_),k(h,a,_),V(u,h,_),c=!0},p(h,_){const S={};!t&&_&4&&(t=!0,S.manager=h[2].actionSet.actionManager,ge(()=>t=!1)),e.$set(S);const M={};!l&&_&4&&(l=!0,M.manager=h[2].sequenceManager,ge(()=>l=!1)),r.$set(M)},i(h){c||(v(e.$$.fragment,h),v(r.$$.fragment,h),v(o.$$.fragment,h),v(u.$$.fragment,h),c=!0)},o(h){y(e.$$.fragment,h),y(r.$$.fragment,h),y(o.$$.fragment,h),y(u.$$.fragment,h),c=!1},d(h){h&&(w(n),w(s),w(a)),B(e,h),B(r,h),B(o,h),B(u,h)}}}function js(i){let e,t,n,r,l,s,o,a,u,c=i[0]>=rt&&Ji(i);r=new yl({props:{timelineWidth:i[1]}});let f=i[2].openedSequence!==void 0&&Vi(i),d=i[0]>=Ut&&Bi(i),m=i[0]<rt&&Wi(i);return{c(){e=O("div"),c&&c.c(),t=H(),n=O("div"),j(r.$$.fragment),l=H(),f&&f.c(),s=H(),d&&d.c(),o=H(),m&&m.c(),a=Z(),g(n,"class","timeline svelte-b4gfse"),g(e,"class","panes svelte-b4gfse"),L(e,"height",i[0]<rt?"60vh":void 0)},m(p,h){k(p,e,h),c&&c.m(e,null),D(e,t),D(e,n),V(r,n,null),D(n,l),f&&f.m(n,null),D(e,s),d&&d.m(e,null),k(p,o,h),m&&m.m(p,h),k(p,a,h),u=!0},p(p,[h]){p[0]>=rt?c?(c.p(p,h),h&1&&v(c,1)):(c=Ji(p),c.c(),v(c,1),c.m(e,t)):c&&($(),y(c,1,1,()=>{c=null}),x());const _={};h&2&&(_.timelineWidth=p[1]),r.$set(_),p[2].openedSequence!==void 0?f?(f.p(p,h),h&4&&v(f,1)):(f=Vi(p),f.c(),v(f,1),f.m(n,null)):f&&($(),y(f,1,1,()=>{f=null}),x()),p[0]>=Ut?d?h&1&&v(d,1):(d=Bi(p),d.c(),v(d,1),d.m(e,null)):d&&($(),y(d,1,1,()=>{d=null}),x()),h&1&&L(e,"height",p[0]<rt?"60vh":void 0),p[0]<rt?m?(m.p(p,h),h&1&&v(m,1)):(m=Wi(p),m.c(),v(m,1),m.m(a.parentNode,a)):m&&($(),y(m,1,1,()=>{m=null}),x())},i(p){u||(v(c),v(r.$$.fragment,p),v(f),v(d),v(m),u=!0)},o(p){y(c),y(r.$$.fragment,p),y(f),y(d),y(m),u=!1},d(p){p&&(w(e),w(o),w(a)),c&&c.d(),B(r),f&&f.d(),d&&d.d(),m&&m.d(p)}}}function Xs(i,e,t){let n;de(i,fe,d=>t(2,n=d));let{width:r}=e,l=0;function s(d){i.$$.not_equal(n.actionSet.actionManager,d)&&(n.actionSet.actionManager=d,fe.set(n))}function o(d){i.$$.not_equal(n.sequenceManager,d)&&(n.sequenceManager=d,fe.set(n))}function a(d){i.$$.not_equal(n.openedSequence,d)&&(n.openedSequence=d,fe.set(n))}function u(d){l=d,t(1,l)}function c(d){i.$$.not_equal(n.actionSet.actionManager,d)&&(n.actionSet.actionManager=d,fe.set(n))}function f(d){i.$$.not_equal(n.sequenceManager,d)&&(n.sequenceManager=d,fe.set(n))}return i.$$set=d=>{"width"in d&&t(0,r=d.width)},[r,l,n,s,o,a,u,c,f]}class _r extends le{constructor(e){super(),re(this,e,Xs,js,ie,{width:0})}}function Ks(i){let e,t;return{c(){e=O("p"),t=te(i[4])},m(n,r){k(n,e,r),D(e,t)},p(n,r){r&16&&Ae(t,n[4])},d(n){n&&w(e)}}}function Gs(i){let e,t,n,r,l,s,o;function a(c){i[16](c)}let u={title:i[3],showActions:!1,$$slots:{default:[Ks]},$$scope:{ctx:i}};return i[0]!==void 0&&(u.isOpen=i[0]),n=new on({props:u}),oe.push(()=>_e(n,"isOpen",a)),{c(){e=O("input"),t=H(),j(n.$$.fragment),g(e,"type","file"),g(e,"accept",".sqp,application/json"),L(e,"position","absolute"),L(e,"visibility","hidden")},m(c,f){k(c,e,f),i[15](e),k(c,t,f),V(n,c,f),l=!0,s||(o=[K(e,"change",i[8]),K(e,"cancel",i[9])],s=!0)},p(c,f){const d={};f&8&&(d.title=c[3]),f&524304&&(d.$$scope={dirty:f,ctx:c}),!r&&f&1&&(r=!0,d.isOpen=c[0],ge(()=>r=!1)),n.$set(d)},i(c){l||(v(n.$$.fragment,c),l=!0)},o(c){y(n.$$.fragment,c),l=!1},d(c){c&&(w(e),w(t)),i[15](null),B(n,c),s=!1,ve(o)}}}function Qs(i){let e,t,n;return{c(){e=O("button"),e.textContent="File",g(e,"class","menu-button"),g(e,"slot","button"),g(e,"title","File options")},m(r,l){k(r,e,l),t||(n=K(e,"click",function(){Xe(i[18])&&i[18].apply(this,arguments)}),t=!0)},p(r,l){i=r},d(r){r&&w(e),t=!1,n()}}}function Zs(i){let e,t,n,r,l,s=i[5].openedSequence!==void 0&&ji(i);return{c(){e=O("button"),e.textContent="Download",t=H(),s&&s.c(),n=Z()},m(o,a){k(o,e,a),k(o,t,a),s&&s.m(o,a),k(o,n,a),r||(l=K(e,"click",i[13]),r=!0)},p(o,a){o[5].openedSequence!==void 0?s?s.p(o,a):(s=ji(o),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(o){o&&(w(e),w(t),w(n)),s&&s.d(o),r=!1,l()}}}function $s(i){let e,t,n,r,l,s,o,a,u,c=i[5].openedSequence!==void 0&&Xi(i);return{c(){e=O("button"),t=te("Save"),r=H(),l=O("button"),l.textContent="Save as...",s=H(),c&&c.c(),o=Z(),e.disabled=n=!i[6]},m(f,d){k(f,e,d),D(e,t),k(f,r,d),k(f,l,d),k(f,s,d),c&&c.m(f,d),k(f,o,d),a||(u=[K(e,"click",i[10]),K(l,"click",i[11])],a=!0)},p(f,d){d&64&&n!==(n=!f[6])&&(e.disabled=n),f[5].openedSequence!==void 0?c?c.p(f,d):(c=Xi(f),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null)},d(f){f&&(w(e),w(r),w(l),w(s),w(o)),c&&c.d(f),a=!1,ve(u)}}}function ji(i){let e,t,n;return{c(){e=O("button"),e.textContent="Export sequence"},m(r,l){k(r,e,l),t||(n=K(e,"click",i[14]),t=!0)},p:ne,d(r){r&&w(e),t=!1,n()}}}function Xi(i){let e,t,n;return{c(){e=O("button"),e.textContent="Export sequence..."},m(r,l){k(r,e,l),t||(n=K(e,"click",i[12]),t=!0)},p:ne,d(r){r&&w(e),t=!1,n()}}}function xs(i){let e,t,n,r,l;function s(u,c){return"showSaveFilePicker"in window?$s:Zs}let a=s()(i);return{c(){e=O("button"),e.textContent="Open",t=H(),a.c(),n=Z()},m(u,c){k(u,e,c),k(u,t,c),a.m(u,c),k(u,n,c),r||(l=K(e,"click",i[7]),r=!0)},p(u,c){a.p(u,c)},d(u){u&&(w(e),w(t),w(n)),a.d(u),r=!1,l()}}}function eo(i){let e,t,n;function r(s){i[17](s)}let l={closeCondition:i[0],$$slots:{buttons:[xs],button:[Qs,({toggleDropdown:s})=>({18:s}),({toggleDropdown:s})=>s?262144:0],default:[Gs]},$$scope:{ctx:i}};return i[1]!==void 0&&(l.showOptions=i[1]),e=new ln({props:l}),oe.push(()=>_e(e,"showOptions",r)),{c(){j(e.$$.fragment)},m(s,o){V(e,s,o),n=!0},p(s,[o]){const a={};o&1&&(a.closeCondition=s[0]),o&786557&&(a.$$scope={dirty:o,ctx:s}),!t&&o&2&&(t=!0,a.showOptions=s[1],ge(()=>t=!1)),e.$set(a)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){B(e,s)}}}function to(i,e,t){let n,r;de(i,fe,b=>t(5,n=b)),de(i,vt,b=>t(6,r=b));let l=!1,s,o,a="",u="";async function c(){if(t(1,s=!1),t(3,a="Open location..."),t(4,u="Choose project file to open using the popup window."),t(0,l=!0),"showSaveFilePicker"in window){const b={id:"project",types:[{description:"Sequent project file",accept:{"application/json":[".sqp"]}}]};if(ke(vt,[r]=await window.showOpenFilePicker(b),r),!r)return;const Y=await(await r.getFile()).text();console.log(JSON.parse(Y)),ke(fe,n=mt.fromJSON(JSON.parse(Y)),n),t(0,l=!1)}else o.click()}async function f(){var b;t(0,l=!1),o.files&&((b=o.files)==null?void 0:b.length)!==0&&ke(fe,n=mt.fromJSON(JSON.parse(await o.files[0].text())),n)}function d(){t(0,l=!1)}async function m(){if(!r)throw Error("File handle is undefined.");const b=await r.createWritable();await b.write(Kt(n)),await b.close(),t(1,s=!1)}async function p(){t(1,s=!1),t(3,a="Select file location..."),t(4,u="Choose where to save the project file using the popup window."),t(0,l=!0);const b={id:"project",suggestedName:`${n.name}.sqp`,types:[{description:"Sequent project file",accept:{"application/json":[".sqp"]}}]};try{ke(vt,r=await window.showSaveFilePicker(b),r)}catch{}await m(),t(0,l=!1)}async function h(){if(n.openedSequence===void 0)return;t(1,s=!1),t(3,a="Select file location..."),t(4,u="Choose where to save the sequence file using the popup window."),t(0,l=!0);const b={id:"project",suggestedName:`${n.openedSequence.name}.seq`,types:[{description:"Sequent sequence file",accept:{"application/json":[".seq"]}}]};try{ke(vt,r=await window.showSaveFilePicker(b),r)}catch{}if(!r)throw Error("File handle is undefined.");const J=await r.createWritable();await J.write(n.openedSequence.render().export(n.openedSequence.isAbsolute)),await J.close(),t(0,l=!1)}function _(){var b=document.createElement("a");b.href=URL.createObjectURL(new Blob([Kt(n)],{type:"application/json"})),b.download=`${n.name}.sqp`,b.click(),t(1,s=!1)}function S(){if(n.openedSequence!==void 0){var b=document.createElement("a");b.href=URL.createObjectURL(new Blob([n.openedSequence.render().export(n.openedSequence.isAbsolute)],{type:"application/json"})),b.download=`${n.openedSequence.name}.seq`,b.click(),t(1,s=!1)}}function M(b){oe[b?"unshift":"push"](()=>{o=b,t(2,o)})}function N(b){l=b,t(0,l)}function T(b){s=b,t(1,s)}return[l,s,o,a,u,n,r,c,f,d,m,p,h,_,S,M,N,T]}class no extends le{constructor(e){super(),re(this,e,to,eo,ie,{})}}function io(i){let e,t;return{c(){e=Te("svg"),t=Te("path"),g(t,"d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","32"),g(e,"height","32"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"stroke","currentColor"),g(e,"stroke-width","2"),g(e,"stroke-linecap","round"),g(e,"stroke-linejoin","round")},m(n,r){k(n,e,r),D(e,t)},d(n){n&&w(e)}}}function ro(i){let e,t,n;return{c(){e=Te("svg"),t=Te("circle"),n=Te("path"),g(t,"cx","12"),g(t,"cy","12"),g(t,"r","5"),g(n,"d","M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","32"),g(e,"height","32"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"stroke","currentColor"),g(e,"stroke-width","2"),g(e,"stroke-linecap","round"),g(e,"stroke-linejoin","round")},m(r,l){k(r,e,l),D(e,t),D(e,n)},d(r){r&&w(e)}}}function lo(i){let e,t,n;function r(o,a){return o[0]=="light"?ro:io}let l=r(i),s=l(i);return{c(){e=O("button"),s.c(),g(e,"title","Switch theme"),g(e,"class","svelte-19gt07j")},m(o,a){k(o,e,a),s.m(e,null),t||(n=K(e,"click",i[1]),t=!0)},p(o,[a]){l!==(l=r(o))&&(s.d(1),s=l(o),s&&(s.c(),s.m(e,null)))},i:ne,o:ne,d(o){o&&w(e),s.d(),t=!1,n()}}}function so(i,e,t){let{theme:n=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}=e;const r=()=>{const s=window.document.documentElement.classList;n=="dark"?s.add("dark"):s.remove("dark")},l=()=>{t(0,n=n=="light"?"dark":"light"),localStorage.setItem("theme",n),r()};return r(),i.$$set=s=>{"theme"in s&&t(0,n=s.theme)},[n,l]}class oo extends le{constructor(e){super(),re(this,e,so,lo,ie,{theme:0})}}function ao(i){let e,t,n,r,l,s,o,a;return r=new no({}),o=new oo({}),{c(){e=O("div"),t=O("h1"),t.textContent="Sequent Editor",n=H(),j(r.$$.fragment),l=H(),s=O("div"),j(o.$$.fragment),g(t,"class","svelte-1nyte9d"),g(s,"class","theme-button svelte-1nyte9d"),g(e,"class","title svelte-1nyte9d")},m(u,c){k(u,e,c),D(e,t),D(e,n),V(r,e,null),D(e,l),D(e,s),V(o,s,null),a=!0},p:ne,i(u){a||(v(r.$$.fragment,u),v(o.$$.fragment,u),a=!0)},o(u){y(r.$$.fragment,u),y(o.$$.fragment,u),a=!1},d(u){u&&w(e),B(r),B(o)}}}class uo extends le{constructor(e){super(),re(this,e,null,ao,ie,{})}}function fo(i){let e,t;return e=new _r({props:{width:i[0]}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},p(n,r){const l={};r&1&&(l.width=n[0]),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function co(i){let e,t,n;return t=new rr({props:{width:"100%",height:"100%",$$slots:{default:[ho]},$$scope:{ctx:i}}}),{c(){e=O("div"),j(t.$$.fragment),g(e,"class","scrollContainer svelte-t629eq")},m(r,l){k(r,e,l),V(t,e,null),n=!0},p(r,l){const s={};l&5&&(s.$$scope={dirty:l,ctx:r}),t.$set(s)},i(r){n||(v(t.$$.fragment,r),n=!0)},o(r){y(t.$$.fragment,r),n=!1},d(r){r&&w(e),B(t)}}}function ho(i){let e,t;return e=new _r({props:{width:i[0]}}),{c(){j(e.$$.fragment)},m(n,r){V(e,n,r),t=!0},p(n,r){const l={};r&1&&(l.width=n[0]),e.$set(l)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function mo(i){let e,t,n,r,l,s,o;t=new uo({});const a=[co,fo],u=[];function c(f,d){return f[0]<rt?0:1}return r=c(i),l=u[r]=a[r](i),{c(){e=O("main"),j(t.$$.fragment),n=H(),l.c(),g(e,"class","svelte-t629eq"),be(()=>i[1].call(e))},m(f,d){k(f,e,d),V(t,e,null),D(e,n),u[r].m(e,null),s=Ct(e,i[1].bind(e)),o=!0},p(f,[d]){let m=r;r=c(f),r===m?u[r].p(f,d):($(),y(u[m],1,1,()=>{u[m]=null}),x(),l=u[r],l?l.p(f,d):(l=u[r]=a[r](f),l.c()),v(l,1),l.m(e,null))},i(f){o||(v(t.$$.fragment,f),v(l),o=!0)},o(f){y(t.$$.fragment,f),y(l),o=!1},d(f){f&&w(e),B(t),u[r].d(),s()}}}function po(i,e,t){let n=0;function r(){n=this.clientWidth,t(0,n)}return[n,r]}class go extends le{constructor(e){super(),re(this,e,po,mo,ie,{})}}new go({target:document.getElementById("app")});
